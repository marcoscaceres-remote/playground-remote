
<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="utf-8"><meta name="generator" content="ReSpec 24.5.1"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><style>/* --- EXAMPLES --- */
  span.example-title {
      text-transform: none;
  }
  aside.example, div.example, div.illegal-example {
      padding: 0.5em;
      margin: 1em 0;
      position: relative;
      clear: both;
  }
  div.illegal-example { color: red }
  div.illegal-example p { color: black }
  aside.example, div.example {
      padding: .5em;
      border-left-width: .5em;
      border-left-style: solid;
      border-color: #e0cb52;
      background: #fcfaee;
  }

  aside.example div.example {
      border-left-width: .1em;
      border-color: #999;
      background: #fff;
  }
  aside.example div.example span.example-title {
      color: #999;
  }
  </style><style>/* --- ISSUES/NOTES --- */
  .issue-label {
      text-transform: initial;
  }

  .warning > p:first-child { margin-top: 0 }
  .warning {
      padding: .5em;
      border-left-width: .5em;
      border-left-style: solid;
  }
  span.warning { padding: .1em .5em .15em; }

  .issue.closed span.issue-number {
      text-decoration: line-through;
  }

  .warning {
      border-color: #f11;
      border-width: .2em;
      border-style: solid;
      background: #fbe9e9;
  }

  .warning-title:before{
      content: "⚠"; /*U+26A0 WARNING SIGN*/
      font-size: 3em;
      float: left;
      height: 100%;
      padding-right: .3em;
      vertical-align: top;
      margin-top: -0.5em;
  }

  li.task-list-item {
      list-style: none;
  }

  input.task-list-item-checkbox {
      margin: 0 0.35em 0.25em -1.6em;
      vertical-align: middle;
  }

  .issue a.respec-gh-label {
    padding: 5px;
    margin: 0 2px 0 2px;
    font-size: 10px;
    text-transform: none;
    text-decoration: none;
    font-weight: bold;
    border-radius: 4px;
    position: relative;
    bottom: 2px;
    border: none;
  }

  .issue a.respec-label-dark {
    color: #fff;
    background-color: #000;
  }

  .issue a.respec-label-light {
    color: #000;
    background-color: #fff;
  }
  </style><style>/* --- WEB IDL --- */

  pre.idl {
    padding: 1em;
  }

  @media print {
    pre.idl {
      white-space: pre-wrap;
    }
  }

  pre.idl::before {
    content: "WebIDL";
    display: block;
    width: 150px;
    background: #90b8de;
    color: #fff;
    font-family: sans-serif;
    font-weight: bold;
    margin: -1em 0 1em -1em;
    height: 28px;
    line-height: 28px;
  }

  .idlID {
    font-weight: bold;
    color: #005a9c;
  }

  .idlType {
    color: #005a9c;
  }

  .idlName {
    color: #ff4500;
  }

  .idlName a {
    color: #ff4500;
    border-bottom: 1px dotted #ff4500;
    text-decoration: none;
  }

  a.idlEnumItem {
    color: #000;
    border-bottom: 1px dotted #ccc;
    text-decoration: none;
  }

  .idlSuperclass {
    font-style: italic;
    color: #005a9c;
  }


  /*.idlParam*/

  .idlParamName,
  .idlDefaultValue {
    font-style: italic;
  }

  .extAttr {
    color: #666;
  }


  /*.idlSectionComment*/

  .idlSectionComment {
    color: gray;
  }

  .idlIncludes a {
    font-weight: bold;
  }

  .respec-button-copy-paste:focus {
    text-decoration: none;
    border-color: #51a7e8;
    outline: none;
    box-shadow: 0 0 5px rgba(81, 167, 232, 0.5);
  }

  .respec-button-copy-paste:focus:hover,
  .respec-button-copy-paste.selected:focus {
    border-color: #51a7e8;
  }

  .respec-button-copy-paste:hover,
  .respec-button-copy-paste:active,
  .respec-button-copy-paste.zeroclipboard-is-hover,
  .respec-button-copy-paste.zeroclipboard-is-active {
    text-decoration: none;
    background-color: #ddd;
    background-image: linear-gradient(#eee, #ddd);
    border-color: #ccc;
  }

  .respec-button-copy-paste:active,
  .respec-button-copy-paste.selected,
  .respec-button-copy-paste.zeroclipboard-is-active {
    background-color: #dcdcdc;
    background-image: none;
    border-color: #b5b5b5;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15)
  }

  .respec-button-copy-paste.selected:hover {
    background-color: #cfcfcf;
  }

  .respec-button-copy-paste:disabled,
  .respec-button-copy-paste:disabled:hover,
  .respec-button-copy-paste.disabled,
  .respec-button-copy-paste.disabled:hover {
    color: rgba(102, 102, 102, 0.5);
    cursor: default;
    background-color: rgba(229, 229, 229, 0.5);
    background-image: none;
    border-color: rgba(197, 197, 197, 0.5);
    box-shadow: none;
  }

  @media print {
    .respec-button-copy-paste {
      visibility: hidden;
    }
  }
  </style>

      <title>
        Payment Request API
      </title>
      <style id="respec-mainstyle">/*****************************************************************
   * ReSpec 3 CSS
   * Robin Berjon - http://berjon.com/
   *****************************************************************/

  /* Override code highlighter background */
  .hljs {
    background: transparent !important;
  }

  /* --- INLINES --- */
  h1 abbr,
  h2 abbr,
  h3 abbr,
  h4 abbr,
  h5 abbr,
  h6 abbr,
  a abbr {
    border: none;
  }

  dfn {
    font-weight: bold;
  }

  a.internalDFN {
    color: inherit;
    border-bottom: 1px solid #99c;
    text-decoration: none;
  }

  a.externalDFN {
    color: inherit;
    border-bottom: 1px dotted #ccc;
    text-decoration: none;
  }

  a.bibref {
    text-decoration: none;
  }

  #references :target {
    background: #eaf3ff;
  }

  cite .bibref {
    font-style: normal;
  }

  code {
    color: #c83500;
  }

  th code {
    color: inherit;
  }

  /* --- TOC --- */

  .toc a,
  .tof a {
    text-decoration: none;
  }

  a .secno,
  a .figno {
    color: #000;
  }

  ul.tof,
  ol.tof {
    list-style: none outside none;
  }

  .caption {
    margin-top: 0.5em;
    font-style: italic;
  }

  /* --- TABLE --- */

  table.simple {
    border-spacing: 0;
    border-collapse: collapse;
    border-bottom: 3px solid #005a9c;
  }

  .simple th {
    background: #005a9c;
    color: #fff;
    padding: 3px 5px;
    text-align: left;
  }

  .simple th[scope="row"] {
    background: inherit;
    color: inherit;
    border-top: 1px solid #ddd;
  }

  .simple td {
    padding: 3px 10px;
    border-top: 1px solid #ddd;
  }

  .simple tr:nth-child(even) {
    background: #f0f6ff;
  }

  /* --- DL --- */

  .section dd>p:first-child {
    margin-top: 0;
  }

  .section dd>p:last-child {
    margin-bottom: 0;
  }

  .section dd {
    margin-bottom: 1em;
  }

  .section dl.attrs dd,
  .section dl.eldef dd {
    margin-bottom: 0;
  }

  #issue-summary>ul,
  .respec-dfn-list {
    column-count: 2;
  }

  #issue-summary li,
  .respec-dfn-list li {
    list-style: none;
  }

  details.respec-tests-details {
    margin-left: 1em;
    display: inline-block;
    vertical-align: top;
  }

  details.respec-tests-details>* {
    padding-right: 2em;
  }

  details.respec-tests-details[open] {
    z-index: 999999;
    position: absolute;
    border: thin solid #cad3e2;
    border-radius: 0.3em;
    background-color: white;
    padding-bottom: 0.5em;
  }

  details.respec-tests-details[open]>summary {
    border-bottom: thin solid #cad3e2;
    padding-left: 1em;
    margin-bottom: 1em;
    line-height: 2em;
  }

  details.respec-tests-details>ul {
    width: 100%;
    margin-top: -0.3em;
  }

  details.respec-tests-details>li {
    padding-left: 1em;
  }

  a[href].self-link:hover {
    opacity: 1;
    text-decoration: none;
    background-color: transparent;
  }

  h2,
  h3,
  h4,
  h5,
  h6 {
    position: relative;
  }

  aside.example .marker > a.self-link {
    color: inherit;
  }

  h2>a.self-link,
  h3>a.self-link,
  h4>a.self-link,
  h5>a.self-link,
  h6>a.self-link {
    border: none;
    color: inherit;
    font-size: 83%;
    height: 2em;
    left: -1.6em;
    opacity: .5;
    position: absolute;
    text-align: center;
    text-decoration: none;
    top: 0;
    transition: opacity .2s;
    width: 2em;
  }

  h2>a.self-link::before,
  h3>a.self-link::before,
  h4>a.self-link::before,
  h5>a.self-link::before,
  h6>a.self-link::before {
    content: "§";
    display: block;
  }

  @media (max-width: 767px) {
    dd {
      margin-left: 0;
    }

    /* Don't position self-link in headings off-screen */
    h2>a.self-link,
    h3>a.self-link,
    h4>a.self-link,
    h5>a.self-link,
    h6>a.self-link {
      left: auto;
      top: auto;
    }
  }

  @media print {
    .removeOnSave {
      display: none;
    }
  }
  </style>

      <style>
      dt { margin-top: 0.75em; }
      table { margin-top: 0.75em; border-collapse:collapse; border-style:hidden hidden none hidden }
      table thead { border-bottom:solid }
      table tbody th:first-child { border-left:solid }
      table td, table th { border-left:solid; border-right:solid; border-bottom:solid thin; vertical-align:top; padding:0.2em }
      li { margin-top: 0.5em; margin-bottom: 0.5em;}
      </style>
    <link rel="canonical" href="https://www.w3.org/TR/payment-request/"><style>/*

  github.com style (c) Vasily Polovnyov <vast@whiteants.net>

  */

  .hljs {
    display: block;
    overflow-x: auto;
    padding: 0.5em;
    color: #333;
    background: #f8f8f8;
  }

  .hljs-comment,
  .hljs-quote {
    color: #998;
    font-style: italic;
  }

  .hljs-keyword,
  .hljs-selector-tag,
  .hljs-subst {
    color: #333;
    font-weight: bold;
  }

  .hljs-number,
  .hljs-literal,
  .hljs-variable,
  .hljs-template-variable,
  .hljs-tag .hljs-attr {
    color: #008080;
  }

  .hljs-string,
  .hljs-doctag {
    color: #d14;
  }

  .hljs-title,
  .hljs-section,
  .hljs-selector-id {
    color: #900;
    font-weight: bold;
  }

  .hljs-subst {
    font-weight: normal;
  }

  .hljs-type,
  .hljs-class .hljs-title {
    color: #458;
    font-weight: bold;
  }

  .hljs-tag,
  .hljs-name,
  .hljs-attribute {
    color: #000080;
    font-weight: normal;
  }

  .hljs-regexp,
  .hljs-link {
    color: #009926;
  }

  .hljs-symbol,
  .hljs-bullet {
    color: #990073;
  }

  .hljs-built_in,
  .hljs-builtin-name {
    color: #0086b3;
  }

  .hljs-meta {
    color: #999;
    font-weight: bold;
  }

  .hljs-deletion {
    background: #fdd;
  }

  .hljs-addition {
    background: #dfd;
  }

  .hljs-emphasis {
    font-style: italic;
  }

  .hljs-strong {
    font-weight: bold;
  }
  </style><style>/* For assertions in lists containing algorithms */

  .assert {
      border-color: #AAA;
      background: #EEE;
      border-left: .5em solid;
      padding: 0.3em;
  }
  </style><script id="initialUserConfig" type="application/json">{
    "github": "https://github.com/w3c/payment-request/",
    "specStatus": "CR",
    "formerEditors": [
      {
        "name": "Adrian Bateman",
        "company": "Microsoft Corporation",
        "w3cid": 42763
      }
    ],
    "editors": [
      {
        "name": "Marcos Cáceres",
        "company": "Mozilla",
        "w3cid": 39125
      },
      {
        "name": "Domenic Denicola",
        "company": "Google",
        "w3cid": 52873
      },
      {
        "name": "Zach Koch",
        "company": "Google",
        "w3cid": 76588
      },
      {
        "name": "Roy McElmurry",
        "company": "Facebook",
        "w3cid": 88345
      },
      {
        "name": "Ian Jacobs",
        "url": "http://www.w3.org/People/Jacobs/",
        "company": "W3C",
        "companyURL": "https://www.w3.org/",
        "w3cid": 2175
      },
      {
        "name": "Rouslan Solomakhin",
        "url": "https://github.com/rsolomakhin",
        "company": "Google",
        "companyURL": "https://www.google.com/",
        "w3cid": 83784
      }
    ],
    "crEnd": "2018-10-31",
    "license": "w3c-software-doc",
    "previousMaturity": "WD",
    "previousPublishDate": "2016-07-05",
    "wg": "Web Payments Working Group",
    "wgURI": "https://www.w3.org/Payments/WG/",
    "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/83744/status",
    "testSuiteURI": "https://w3c-test.org/payment-request/",
    "implementationReportURI": "https://w3c.github.io/test-results/payment-request/all.html",
    "caniuse": "payment-request",
    "lint": {
      "no-headingless-sections": true,
      "privsec-section": true,
      "no-http-props": true,
      "check-punctuation": true
    },
    "doJsonLd": true,
    "highlightVars": true,
    "pluralize": true,
    "xref": true,
    "publishISODate": "2019-03-22T00:00:00.000Z",
    "generatedSubtitle": "Candidate Recommendation 22 March 2019"
  }</script><meta name="description" content="This specification standardizes an API to allow merchants (i.e. web
          sites selling physical or digital goods) to utilize one or more payment
          methods with minimal integration. User agents (e.g., browsers)
          facilitate the payment flow between merchant and user."><script type="application/ld+json">{
    "@context": [
      "http://schema.org",
      {
        "@vocab": "http://schema.org/",
        "@language": "en",
        "w3p": "http://www.w3.org/2001/02pd/rec54#",
        "foaf": "http://xmlns.com/foaf/0.1/",
        "datePublished": {
          "@type": "http://www.w3.org/2001/XMLSchema#date"
        },
        "inLanguage": {
          "@language": null
        },
        "isBasedOn": {
          "@type": "@id"
        },
        "license": {
          "@type": "@id"
        }
      }
    ],
    "id": "https://www.w3.org/TR/payment-request/",
    "type": [
      "TechArticle",
      "w3p:CR"
    ],
    "name": "Payment Request API",
    "inLanguage": "en",
    "license": "https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document",
    "datePublished": "2019-03-22",
    "copyrightHolder": {
      "name": "World Wide Web Consortium",
      "url": "https://www.w3.org/"
    },
    "discussionUrl": "https://github.com/w3c/payment-request/issues/",
    "alternativeHeadline": "",
    "isBasedOn": "https://www.w3.org/TR/2016/WD-payment-request-20160705/",
    "description": "This specification standardizes an API to allow merchants (i.e. web\n        sites selling physical or digital goods) to utilize one or more payment\n        methods with minimal integration. User agents (e.g., browsers)\n        facilitate the payment flow between merchant and user.",
    "editor": [
      {
        "type": "Person",
        "name": "Marcos Cáceres",
        "worksFor": {
          "name": "Mozilla"
        }
      },
      {
        "type": "Person",
        "name": "Domenic Denicola",
        "worksFor": {
          "name": "Google"
        }
      },
      {
        "type": "Person",
        "name": "Zach Koch",
        "worksFor": {
          "name": "Google"
        }
      },
      {
        "type": "Person",
        "name": "Roy McElmurry",
        "worksFor": {
          "name": "Facebook"
        }
      },
      {
        "type": "Person",
        "name": "Ian Jacobs",
        "url": "http://www.w3.org/People/Jacobs/",
        "worksFor": {
          "name": "W3C",
          "url": "https://www.w3.org/"
        }
      },
      {
        "type": "Person",
        "name": "Rouslan Solomakhin",
        "url": "https://github.com/rsolomakhin",
        "worksFor": {
          "name": "Google",
          "url": "https://www.google.com/"
        }
      }
    ],
    "citation": [
      {
        "id": "https://tools.ietf.org/html/rfc4122",
        "type": "TechArticle",
        "name": "A Universally Unique IDentifier (UUID) URN Namespace",
        "url": "https://tools.ietf.org/html/rfc4122"
      },
      {
        "id": "http://www.iso.org/iso/home/standards/currency_codes.htm",
        "type": "TechArticle",
        "name": "Currency codes - ISO 4217",
        "url": "http://www.iso.org/iso/home/standards/currency_codes.htm"
      },
      {
        "id": "https://www.iso.org/standard/63545.html",
        "type": "TechArticle",
        "name": "ISO 3166: Codes for the representation of names of countries and their subdivisions – Part 1: Country codes",
        "url": "https://www.iso.org/standard/63545.html"
      },
      {
        "type": "TechArticle"
      },
      {
        "id": "https://www.itu.int/rec/dologin_pub.asp?lang=e&id=T-REC-E.164-201011-I!!PDF-E&type=items",
        "type": "TechArticle",
        "name": "The international public telecommunication numbering plan",
        "url": "https://www.itu.int/rec/dologin_pub.asp?lang=e&id=T-REC-E.164-201011-I!!PDF-E&type=items"
      },
      {
        "id": "https://www.iso.org/standard/63546.html",
        "type": "TechArticle",
        "name": "ISO 3166: Codes for the representation of names of countries and their subdivisions – Part 2: Country subdivision code.",
        "url": "https://www.iso.org/standard/63546.html"
      },
      {
        "id": "https://www.w3.org/TR/payment-method-id/",
        "type": "TechArticle",
        "name": "Payment Method Identifiers",
        "url": "https://www.w3.org/TR/payment-method-id/"
      },
      {
        "id": "https://html.spec.whatwg.org/multipage/",
        "type": "TechArticle",
        "name": "HTML Standard",
        "url": "https://html.spec.whatwg.org/multipage/"
      },
      {
        "id": "https://tc39.github.io/ecma262/",
        "type": "TechArticle",
        "name": "ECMAScript Language Specification",
        "url": "https://tc39.github.io/ecma262/"
      },
      {
        "type": "TechArticle"
      },
      {
        "id": "https://dom.spec.whatwg.org/",
        "type": "TechArticle",
        "name": "DOM Standard",
        "url": "https://dom.spec.whatwg.org/"
      },
      {
        "id": "https://tools.ietf.org/html/rfc2119",
        "type": "TechArticle",
        "name": "Key words for use in RFCs to Indicate Requirement Levels",
        "url": "https://tools.ietf.org/html/rfc2119"
      },
      {
        "type": "TechArticle"
      },
      {
        "id": "https://url.spec.whatwg.org/",
        "type": "TechArticle",
        "name": "URL Standard",
        "url": "https://url.spec.whatwg.org/"
      },
      {
        "type": "TechArticle"
      },
      {
        "type": "TechArticle"
      },
      {
        "type": "TechArticle"
      },
      {
        "type": "TechArticle"
      },
      {
        "type": "TechArticle"
      },
      {
        "type": "TechArticle"
      },
      {
        "id": "https://www.w3.org/TR/payment-method-basic-card/",
        "type": "TechArticle",
        "name": "Payment Method: Basic Card",
        "url": "https://www.w3.org/TR/payment-method-basic-card/"
      },
      {
        "type": "TechArticle"
      },
      {
        "type": "TechArticle"
      },
      {
        "id": "https://www.w3.org/TR/secure-contexts/",
        "type": "TechArticle",
        "name": "Secure Contexts",
        "url": "https://www.w3.org/TR/secure-contexts/"
      },
      {
        "id": "https://tools.ietf.org/html/rfc6454",
        "type": "TechArticle",
        "name": "The Web Origin Concept",
        "url": "https://tools.ietf.org/html/rfc6454"
      },
      {
        "type": "TechArticle"
      },
      {
        "type": "TechArticle"
      },
      {
        "type": "TechArticle"
      }
    ]
  }</script><link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-CR"></head>
    <body data-cite="html webidl INFRA URL DOM" class="h-entry"><div class="head">
        <a href="https://www.w3.org/" class="logo"><img alt="W3C" width="72" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"></a> <h1 id="title" class="title p-name">
        Payment Request API
      </h1>

        <h2>
          <abbr title="World Wide Web Consortium">W3C</abbr> Candidate Recommendation
          <time class="dt-published" datetime="2019-03-22">22 March 2019</time>
        </h2>
        <dl>
          <dt>This version:</dt><dd>
                  <a class="u-url" href="https://www.w3.org/TR/2019/CR-payment-request-20190322/">https://www.w3.org/TR/2019/CR-payment-request-20190322/</a>
                </dd><dt>Latest published version:</dt><dd>
                  <a href="https://www.w3.org/TR/payment-request/">https://www.w3.org/TR/payment-request/</a>
                </dd>
          <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/payment-request/">https://w3c.github.io/payment-request/</a></dd>
          <dt>Test suite:</dt><dd><a href="https://w3c-test.org/payment-request/">https://w3c-test.org/payment-request/</a></dd>
          <dt>Implementation report:</dt><dd>
                  <a href="https://w3c.github.io/test-results/payment-request/all.html">https://w3c.github.io/test-results/payment-request/all.html</a>
                </dd>


          <dt>Previous version:</dt><dd><a href="https://www.w3.org/TR/2016/WD-payment-request-20160705/">https://www.w3.org/TR/2016/WD-payment-request-20160705/</a></dd>

          <dt>Editors:</dt>
          <dd class="p-author h-card vcard" data-editor-id="39125"><span class="p-name fn">Marcos Cáceres</span>
              (Mozilla)
            </dd><dd class="p-author h-card vcard" data-editor-id="52873"><span class="p-name fn">Domenic Denicola</span>
              (Google)
            </dd><dd class="p-author h-card vcard" data-editor-id="76588"><span class="p-name fn">Zach Koch</span>
              (Google)
            </dd><dd class="p-author h-card vcard" data-editor-id="88345"><span class="p-name fn">Roy McElmurry</span>
              (Facebook)
            </dd><dd class="p-author h-card vcard" data-editor-id="2175"><a class="u-url url p-name fn" href="http://www.w3.org/People/Jacobs/">Ian Jacobs</a>
              (<a class="p-org org h-org h-card" href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a>)
            </dd><dd class="p-author h-card vcard" data-editor-id="83784"><a class="u-url url p-name fn" href="https://github.com/rsolomakhin">Rouslan Solomakhin</a>
              (<a class="p-org org h-org h-card" href="https://www.google.com/">Google</a>)
            </dd>
          <dt>
                  Former editor:
                </dt><dd class="p-author h-card vcard" data-editor-id="42763"><span class="p-name fn">Adrian Bateman</span>
              (Microsoft Corporation)
            </dd>

          <dt>Participate:</dt><dd>
        <a href="https://github.com/w3c/payment-request/">GitHub w3c/payment-request</a>
      </dd><dd>
        <a href="https://github.com/w3c/payment-request/issues/">File a bug</a>
      </dd><dd>
        <a href="https://github.com/w3c/payment-request/commits/gh-pages">Commit history</a>
      </dd><dd>
        <a href="https://github.com/w3c/payment-request/pulls/">Pull requests</a>
      </dd>
        <dt class="caniuse-title">Can I Use this API?</dt><dd class="caniuse-stats"><a href="https://caniuse.com/#feat=payment-request">caniuse.com</a></dd></dl>



        <p class="copyright">
        <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
        ©
        2019

        <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>,
        <a href="https://ev.buaa.edu.cn/">Beihang</a>).
        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules
        apply.
      </p>
        <hr title="Separator for header">
      </div>

      <section id="abstract" class="introductory"><h2>Abstract</h2>
        <p>
          This specification standardizes an API to allow merchants (i.e. web
          sites selling physical or digital goods) to utilize one or more payment
          methods with minimal integration. User agents (e.g., browsers)
          facilitate the payment flow between merchant and user.
        </p>
      </section>
      <section id="sotd" class="introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em></p>
        <p>
          The working group maintains <a href="https://github.com/w3c/payment-request/issues?utf8=%E2%9C%93&amp;q=is%3Aopen%20is%3Aissue%20-label%3A%22Priority%3A%20Postponed%22%20">
          a list of all bug reports that the group has not yet addressed</a>.
          Pull requests with proposed specification text for outstanding issues
          are strongly encouraged.
        </p>
        <p>
          The working group will demonstrate implementation experience by
          producing an <a href="https://w3c.github.io/payment-request/reports/implementation.html">implementation
          report</a>. The report will show two or more independent
          implementations passing each mandatory test in the <a href="https://w3c-test.org/payment-request/">test suite</a> (i.e., each test
          corresponds to a <em class="rfc2119" title="MUST">MUST</em> requirement of the specification).
        </p>
        <p>
          There has been no change in dependencies on other workings groups
          during the development of this specification.
        </p>
        <p>
                          This document was published by the <a href="https://www.w3.org/Payments/WG/">Web Payments Working Group</a> as
                          a Candidate Recommendation.
                          This document is intended to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation.
                        </p><p>
        <a href="https://github.com/w3c/payment-request/issues/">GitHub Issues</a> are preferred for
              discussion of this specification.


      </p><p>

                    <abbr title="World Wide Web Consortium">W3C</abbr> publishes a Candidate Recommendation to indicate that the document is believed to be
                    stable and to encourage implementation by the developer community. This Candidate
                    Recommendation is expected to advance to Proposed Recommendation no earlier than
                    31 October 2018.



                              </p><p>
                          Please see the Working Group's
                          <a href="https://w3c.github.io/test-results/payment-request/all.html">implementation report</a>.
                        </p><p>
                          Publication as a Candidate Recommendation does not
                          imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. This is a draft
                          document and may be updated, replaced or obsoleted by
                          other documents at any time. It is inappropriate to cite
                          this document as other than work in progress.
                        </p><p>

                          This document was produced by
                          a group operating
                          under the
                          <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.



                                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
                                <a rel="disclosure" href="https://www.w3.org/2004/01/pp-impl/83744/status">public list of any patent disclosures</a>
                          made in connection with the deliverables of
                          the group; that page also includes
                          instructions for disclosing a patent. An individual who
                          has actual knowledge of a patent which the individual
                          believes contains
                          <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a>
                          must disclose the information in accordance with
                          <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.


                  </p><p>
                    This document is governed by the
                    <a id="w3c_process_revision" href="https://www.w3.org/2019/Process-20190301/">1 March 2019 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                  </p><section>
          <h3 id="changes-since-last-publication">
            Changes since last publication
          <a class="self-link" aria-label="§" href="#sotd"></a></h3>
          <p>
            Substantive changes to the Payment Request API since the 9 July 2018
            version are as follows. The complete list of changes, including all
            editorial changes, is viewable in the <a href="https://github.com/w3c/payment-request/commits/gh-pages">commit
            history</a>.
          </p>
          <ul>
            <li>Added support for notification when the user selects a payment
            handler, but before confirming payment. This allows merchant to
            update totals, validate acceptance, etc.
            </li>
            <li>Added support to notify site of billing address selection. This
            allows a merchant to update a total (e.g., for VAT in Europe). To
            enhance privacy, only some billing address data is returned to the
            merchant as long as the user has not confirmed payment.
            </li>
            <li>Added support for <a data-lt="PaymentResponse.retry()" href="#dom-paymentresponse-retry" class="internalDFN" data-link-type="dfn"><code>retry()</code></a> and fine-grain error reporting
            to the user.
            </li>
            <li>Added support for merchant validation by the payment handler.
            </li>
            <li data-link-for="PaymentRequest">Clearer definition of
            <a href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment()</code></a> and worked to align implementations.
            <a href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment()</code></a> does not reveal whether payment handler is
            primed to pay.
            </li>
            <li>Removed <code>languageCode</code> and <code>regionCode</code>
            from <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>.
            </li>
            <li>Removed <code>currencySystem</code>.
            </li>
            <li>"<a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">Payment request is showing</a>" boolean now attached to
            top-level browsing context. Previously, only a single payment UI was
            allowed to be shown at a time across the whole browser. This now
            allows multiple browser tabs to show a payment UI at the same time
            (for those payment handlers able to support it).
            </li>
            <li>Integrated with <a href="https://wicg.github.io/feature-policy/">Feature Policy</a>.
            </li>
            <li>Defined handling of multiple applicable modifiers.
            </li>
          </ul>
        </section>
      </section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><span class="secno">1. </span>
          Introduction
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#goals"><span class="secno">1.1 </span>
            Goals and scope
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#examples-of-usage"><span class="secno">2. </span>
          Examples of usage
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#declaring-multiple-ways-of-paying"><span class="secno">2.1 </span>
            Declaring multiple ways of paying
          </a></li><li class="tocline"><a class="tocxref" href="#describing-what-is-being-paid-for"><span class="secno">2.2 </span>
            Describing what is being paid for
          </a></li><li class="tocline"><a class="tocxref" href="#adding-shipping-options"><span class="secno">2.3 </span>
            Adding shipping options
          </a></li><li class="tocline"><a class="tocxref" href="#conditional-modifications-to-payment-request"><span class="secno">2.4 </span>
            Conditional modifications to payment request
          </a></li><li class="tocline"><a class="tocxref" href="#requesting-specific-information-from-the-end-user"><span class="secno">2.5 </span>
            Requesting specific information from the end user
          </a></li><li class="tocline"><a class="tocxref" href="#constructing-a-paymentrequest"><span class="secno">2.6 </span>
            Constructing a <code>PaymentRequest</code>
          </a></li><li class="tocline"><a class="tocxref" href="#handling-events-and-updating-the-payment-request"><span class="secno">2.7 </span>
            Handling events and updating the payment request
          </a></li><li class="tocline"><a class="tocxref" href="#fine-grained-error-reporting"><span class="secno">2.8 </span>
            Fine-grained error reporting
          </a></li><li class="tocline"><a class="tocxref" href="#posting-payment-response-back-to-a-server"><span class="secno">2.9 </span>
            POSTing payment response back to a server
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#paymentrequest-interface"><span class="secno">3. </span>
          <span data-dfn-for="" data-dfn-type="dfn" data-idl="interface" data-title="PaymentRequest"><code>PaymentRequest</code></span> interface
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#constructor"><span class="secno">3.1 </span>
            Constructor
          </a></li><li class="tocline"><a class="tocxref" href="#id-attribute"><span class="secno">3.2 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="attribute" data-title="id" data-type="DOMString" data-lt="paymentrequest.id|id"><code>id</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#show-method"><span class="secno">3.3 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="operation" data-title="show()" data-type="Promise" data-lt="paymentrequest.show()|paymentrequest.show|show()|show"><code>show()</code></span> method
          </a></li><li class="tocline"><a class="tocxref" href="#abort-method"><span class="secno">3.4 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="operation" data-title="abort()" data-type="Promise" data-lt="paymentrequest.abort()|paymentrequest.abort|abort()|abort"><code>abort()</code></span> method
          </a></li><li class="tocline"><a class="tocxref" href="#canmakepayment-method"><span class="secno">3.5 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="operation" data-title="canMakePayment()" data-type="Promise" data-lt="paymentrequest.canmakepayment()|paymentrequest.canmakepayment|canmakepayment()|canmakepayment"><code>canMakePayment()</code></span> method
          </a></li><li class="tocline"><a class="tocxref" href="#shippingaddress-attribute"><span class="secno">3.6 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="attribute" data-title="shippingAddress" data-type="PaymentAddress" data-lt="paymentrequest.shippingaddress|shippingaddress"><code>shippingAddress</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#shippingtype-attribute"><span class="secno">3.7 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="attribute" data-title="shippingType" data-type="PaymentShippingType" data-lt="paymentrequest.shippingtype|shippingtype"><code>shippingType</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#onmerchantvalidation-attribute"><span class="secno">3.8 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="attribute" data-title="onmerchantvalidation" data-type="EventHandler" data-lt="paymentrequest.onmerchantvalidation|onmerchantvalidation"><code>onmerchantvalidation</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#onshippingaddresschange-attribute"><span class="secno">3.9 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="attribute" data-title="onshippingaddresschange" data-type="EventHandler" data-lt="paymentrequest.onshippingaddresschange|onshippingaddresschange"><code>onshippingaddresschange</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#shippingoption-attribute"><span class="secno">3.10 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="attribute" data-title="shippingOption" data-type="DOMString" data-lt="paymentrequest.shippingoption|shippingoption"><code>shippingOption</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#onshippingoptionchange-attribute"><span class="secno">3.11 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="attribute" data-title="onshippingoptionchange" data-type="EventHandler" data-lt="paymentrequest.onshippingoptionchange|onshippingoptionchange"><code>onshippingoptionchange</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#onpaymentmethodchange-attribute"><span class="secno">3.12 </span>
            <span data-dfn-for="paymentrequest" data-dfn-type="dfn" data-idl="attribute" data-title="onpaymentmethodchange" data-type="EventHandler" data-lt="paymentrequest.onpaymentmethodchange|onpaymentmethodchange"><code>onpaymentmethodchange</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#internal-slots"><span class="secno">3.13 </span>
            Internal Slots
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#paymentmethoddata-dictionary"><span class="secno">4. </span>
          <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentMethodData"><code>PaymentMethodData</code></span> dictionary
        </a></li><li class="tocline"><a class="tocxref" href="#paymentcurrencyamount-dictionary"><span class="secno">5. </span>
          <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentCurrencyAmount"><code>PaymentCurrencyAmount</code></span> dictionary
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#validity-checkers"><span class="secno">5.1 </span>
            Validity checkers
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#payment-details-dictionaries"><span class="secno">6. </span>
          Payment details dictionaries
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#paymentdetailsbase-dictionary"><span class="secno">6.1 </span>
            <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentDetailsBase"><code>PaymentDetailsBase</code></span> dictionary
          </a></li><li class="tocline"><a class="tocxref" href="#paymentdetailsinit-dictionary"><span class="secno">6.2 </span>
            <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentDetailsInit"><code>PaymentDetailsInit</code></span> dictionary
          </a></li><li class="tocline"><a class="tocxref" href="#paymentdetailsupdate-dictionary"><span class="secno">6.3 </span>
            <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentDetailsUpdate"><code>PaymentDetailsUpdate</code></span> dictionary
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#paymentdetailsmodifier-dictionary"><span class="secno">7. </span>
          <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentDetailsModifier"><code>PaymentDetailsModifier</code></span> dictionary
        </a></li><li class="tocline"><a class="tocxref" href="#paymentshippingtype-enum"><span class="secno">8. </span>
          <span data-dfn-for="" data-dfn-type="dfn" data-idl="enum" data-title="PaymentShippingType"><code>PaymentShippingType</code></span> enum
        </a></li><li class="tocline"><a class="tocxref" href="#paymentoptions-dictionary"><span class="secno">9. </span>
          <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentOptions"><code>PaymentOptions</code></span> dictionary
        </a></li><li class="tocline"><a class="tocxref" href="#paymentitem-dictionary"><span class="secno">10. </span>
          <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentItem"><code>PaymentItem</code></span> dictionary
        </a></li><li class="tocline"><a class="tocxref" href="#physical-addresses"><span class="secno">11. </span>
          Physical addresses
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#paymentaddress-interface"><span class="secno">11.1 </span>
            <span data-dfn-for="" data-dfn-type="dfn" data-idl="interface" data-title="PaymentAddress"><code>PaymentAddress</code></span> interface
          </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#internal-constructor"><span class="secno">11.1.1 </span>
              Internal constructor
            </a></li><li class="tocline"><a class="tocxref" href="#tojson-method"><span class="secno">11.1.2 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="operation" data-title="toJSON()" data-type="object" data-lt="paymentaddress.tojson()|paymentaddress.tojson|tojson()|tojson"><code>toJSON()</code></span> method
            </a></li><li class="tocline"><a class="tocxref" href="#country-attribute"><span class="secno">11.1.3 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="attribute" data-title="country" data-type="DOMString" data-lt="paymentaddress.country|country"><code>country</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#addressline-attribute"><span class="secno">11.1.4 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="attribute" data-title="addressLine" data-type="FrozenArray" data-lt="paymentaddress.addressline|addressline"><code>addressLine</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#region-attribute"><span class="secno">11.1.5 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="attribute" data-title="region" data-type="DOMString" data-lt="paymentaddress.region|region"><code>region</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#city-attribute"><span class="secno">11.1.6 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="attribute" data-title="city" data-type="DOMString" data-lt="paymentaddress.city|city"><code>city</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#dependentlocality-attribute"><span class="secno">11.1.7 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="attribute" data-title="dependentLocality" data-type="DOMString" data-lt="paymentaddress.dependentlocality|dependentlocality"><code>dependentLocality</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#postalcode-attribute"><span class="secno">11.1.8 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="attribute" data-title="postalCode" data-type="DOMString" data-lt="paymentaddress.postalcode|postalcode"><code>postalCode</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#sortingcode-attribute"><span class="secno">11.1.9 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="attribute" data-title="sortingCode" data-type="DOMString" data-lt="paymentaddress.sortingcode|sortingcode"><code>sortingCode</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#organization-attribute"><span class="secno">11.1.10 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="attribute" data-title="organization" data-type="DOMString" data-lt="paymentaddress.organization|organization"><code>organization</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#recipient-attribute"><span class="secno">11.1.11 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="attribute" data-title="recipient" data-type="DOMString" data-lt="paymentaddress.recipient|recipient"><code>recipient</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#phone-attribute"><span class="secno">11.1.12 </span>
              <span data-dfn-for="paymentaddress" data-dfn-type="dfn" data-idl="attribute" data-title="phone" data-type="DOMString" data-lt="paymentaddress.phone|phone"><code>phone</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#internal-slots-0"><span class="secno">11.1.13 </span>
              <span data-lt="paymentaddress slots|internal slots" data-no-default="" data-dfn-type="dfn">Internal
              slots</span>
            </a></li></ol></li><li class="tocline"><a class="tocxref" href="#addressinit-dictionary"><span class="secno">11.2 </span>
            <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="AddressInit"><code>AddressInit</code></span> dictionary
          </a></li><li class="tocline"><a class="tocxref" href="#addresserrors-dictionary"><span class="secno">11.3 </span>
            <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="AddressErrors"><code>AddressErrors</code></span> dictionary
          </a></li><li class="tocline"><a class="tocxref" href="#creating-a-paymentaddress-from-user-provided-input"><span class="secno">11.4 </span>
            Creating a <code>PaymentAddress</code> from user-provided input
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#paymentshippingoption-dictionary"><span class="secno">12. </span>
          <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentShippingOption"><code>PaymentShippingOption</code></span> dictionary
        </a></li><li class="tocline"><a class="tocxref" href="#paymentcomplete-enum"><span class="secno">13. </span>
          <span data-dfn-for="" data-dfn-type="dfn" data-idl="enum" data-title="PaymentComplete"><code>PaymentComplete</code></span> enum
        </a></li><li class="tocline"><a class="tocxref" href="#paymentresponse-interface"><span class="secno">14. </span>
          <span data-dfn-for="" data-dfn-type="dfn" data-idl="interface" data-title="PaymentResponse"><code>PaymentResponse</code></span> interface
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#retry-method"><span class="secno">14.1 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="operation" data-title="retry()" data-type="Promise" data-lt="paymentresponse.retry()|paymentresponse.retry|retry()|retry"><code>retry()</code></span> method
          </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#paymentvalidationerrors-dictionary"><span class="secno">14.1.1 </span>
              <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentValidationErrors"><code>PaymentValidationErrors</code></span> dictionary
            </a></li><li class="tocline"><a class="tocxref" href="#payererrors-dictionary"><span class="secno">14.1.2 </span>
              <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PayerErrors"><code>PayerErrors</code></span> dictionary
            </a></li></ol></li><li class="tocline"><a class="tocxref" href="#tojson-method-0"><span class="secno">14.2 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="operation" data-title="toJSON()" data-type="object" data-lt="paymentresponse.tojson()|paymentresponse.tojson|tojson()|tojson"><code>toJSON()</code></span> method
          </a></li><li class="tocline"><a class="tocxref" href="#methodname-attribute"><span class="secno">14.3 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="attribute" data-title="methodName" data-type="DOMString" data-lt="paymentresponse.methodname|methodname"><code>methodName</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#details-attribute"><span class="secno">14.4 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="attribute" data-title="details" data-type="object" data-lt="paymentresponse.details|details"><code>details</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#shippingaddress-attribute-0"><span class="secno">14.5 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="attribute" data-title="shippingAddress" data-type="PaymentAddress" data-lt="paymentresponse.shippingaddress|shippingaddress"><code>shippingAddress</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#shippingoption-attribute-0"><span class="secno">14.6 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="attribute" data-title="shippingOption" data-type="DOMString" data-lt="paymentresponse.shippingoption|shippingoption"><code>shippingOption</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#payername-attribute"><span class="secno">14.7 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="attribute" data-title="payerName" data-type="DOMString" data-lt="paymentresponse.payername|payername"><code>payerName</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#payeremail-attribute"><span class="secno">14.8 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="attribute" data-title="payerEmail" data-type="DOMString" data-lt="paymentresponse.payeremail|payeremail"><code>payerEmail</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#payerphone-attribute"><span class="secno">14.9 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="attribute" data-title="payerPhone" data-type="DOMString" data-lt="paymentresponse.payerphone|payerphone"><code>payerPhone</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#requestid-attribute"><span class="secno">14.10 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="attribute" data-title="requestId" data-type="DOMString" data-lt="paymentresponse.requestid|requestid"><code>requestId</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#complete-method"><span class="secno">14.11 </span>
            <span data-lt="complete(result)|complete()|paymentresponse.complete()|paymentresponse.complete|complete" data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="operation" data-title="complete()" data-type="Promise"><code>complete()</code></span> method
          </a></li><li class="tocline"><a class="tocxref" href="#onpayerdetailchange-attribute"><span class="secno">14.12 </span>
            <span data-dfn-for="paymentresponse" data-dfn-type="dfn" data-idl="attribute" data-title="onpayerdetailchange" data-type="EventHandler" data-lt="paymentresponse.onpayerdetailchange|onpayerdetailchange"><code>onpayerdetailchange</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#internal-slots-1"><span class="secno">14.13 </span>
            Internal Slots
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#paymentrequest-and-iframe-elements"><span class="secno">15. </span>
          <code>PaymentRequest</code> and <code>iframe</code> elements
        </a></li><li class="tocline"><a class="tocxref" href="#feature-policy"><span class="secno">16. </span>
          Feature Policy integration
        </a></li><li class="tocline"><a class="tocxref" href="#events"><span class="secno">17. </span>
          Events
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#summary"><span class="secno">17.1 </span>
            Summary
          </a></li><li class="tocline"><a class="tocxref" href="#merchantvalidationevent-interface"><span class="secno">17.2 </span>
            <span data-dfn-for="" data-dfn-type="dfn" data-idl="interface" data-title="MerchantValidationEvent"><code>MerchantValidationEvent</code></span> interface
          </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#methodname-attribute-0"><span class="secno">17.2.1 </span>
              <span data-dfn-for="merchantvalidationevent" data-dfn-type="dfn" data-idl="attribute" data-title="methodName" data-type="DOMString" data-lt="merchantvalidationevent.methodname|methodname"><code>methodName</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#merchantvalidationevent-constructor"><span class="secno">17.2.2 </span>
              <span data-lt="merchantvalidationevent.merchantvalidationevent()|merchantvalidationevent constructor" data-dfn-type="dfn"><code>MerchantValidationEvent</code>
              constructor</span>
            </a></li><li class="tocline"><a class="tocxref" href="#validationurl-attribute"><span class="secno">17.2.3 </span>
              <span data-dfn-for="merchantvalidationevent" data-dfn-type="dfn" data-idl="attribute" data-title="validationURL" data-type="USVString" data-lt="merchantvalidationevent.validationurl|validationurl"><code>validationURL</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#complete-method-0"><span class="secno">17.2.4 </span>
              <span data-dfn-for="merchantvalidationevent" data-dfn-type="dfn" data-idl="operation" data-title="complete()" data-type="void" data-lt="merchantvalidationevent.complete()|merchantvalidationevent.complete|complete()|complete"><code>complete()</code></span> method
            </a></li><li class="tocline"><a class="tocxref" href="#internal-slots-2"><span class="secno">17.2.5 </span>
              Internal Slots
            </a></li><li class="tocline"><a class="tocxref" href="#merchantvalidationeventinit-dictionary"><span class="secno">17.2.6 </span>
              <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="MerchantValidationEventInit"><code>MerchantValidationEventInit</code></span> dictionary
            </a></li></ol></li><li class="tocline"><a class="tocxref" href="#paymentmethodchangeevent-interface"><span class="secno">17.3 </span>
            <span data-dfn-for="" data-dfn-type="dfn" data-idl="interface" data-title="PaymentMethodChangeEvent"><code>PaymentMethodChangeEvent</code></span> interface
          </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#methoddetails-attribute"><span class="secno">17.3.1 </span>
              <span data-dfn-for="paymentmethodchangeevent" data-dfn-type="dfn" data-idl="attribute" data-title="methodDetails" data-type="object" data-lt="paymentmethodchangeevent.methoddetails|methoddetails"><code>methodDetails</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#methodname-attribute-1"><span class="secno">17.3.2 </span>
              <span data-dfn-for="paymentmethodchangeevent" data-dfn-type="dfn" data-idl="attribute" data-title="methodName" data-type="DOMString" data-lt="paymentmethodchangeevent.methodname|methodname"><code>methodName</code></span> attribute
            </a></li><li class="tocline"><a class="tocxref" href="#paymentmethodchangeeventinit-dictionary"><span class="secno">17.3.3 </span>
              <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentMethodChangeEventInit"><code>PaymentMethodChangeEventInit</code></span> dictionary
            </a></li></ol></li><li class="tocline"><a class="tocxref" href="#paymentrequestupdateevent-interface"><span class="secno">17.4 </span>
            <span data-dfn-for="" data-dfn-type="dfn" data-idl="interface" data-title="PaymentRequestUpdateEvent"><code>PaymentRequestUpdateEvent</code></span> interface
          </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#constructor-0"><span class="secno">17.4.1 </span>
              <span data-lt="paymentrequestupdateevent.paymentrequestupdateevent()|constructor" data-dfn-type="dfn">Constructor</span>
            </a></li><li class="tocline"><a class="tocxref" href="#updatewith-method"><span class="secno">17.4.2 </span>
              <span data-lt="updatewith(detailspromise)|updatewith()|paymentrequestupdateevent.updatewith()|paymentrequestupdateevent.updatewith|updatewith" data-dfn-for="paymentrequestupdateevent" data-dfn-type="dfn" data-idl="operation" data-title="updateWith()" data-type="void"><code>updateWith()</code></span> method
            </a></li><li class="tocline"><a class="tocxref" href="#internal-slots-3"><span class="secno">17.4.3 </span>
              Internal Slots
            </a></li><li class="tocline"><a class="tocxref" href="#paymentrequestupdateeventinit-dictionary"><span class="secno">17.4.4 </span>
              <span data-dfn-for="" data-dfn-type="dfn" data-idl="dictionary" data-title="PaymentRequestUpdateEventInit"><code>PaymentRequestUpdateEventInit</code></span> dictionary
            </a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#algorithms"><span class="secno">18. </span>
          Algorithms
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#merchant-validation"><span class="secno">18.1 </span>
            Merchant validation
          </a></li><li class="tocline"><a class="tocxref" href="#shipping-address-changed-algorithm"><span class="secno">18.2 </span>
            Shipping address changed algorithm
          </a></li><li class="tocline"><a class="tocxref" href="#shipping-option-changed-algorithm"><span class="secno">18.3 </span>
            Shipping option changed algorithm
          </a></li><li class="tocline"><a class="tocxref" href="#payment-method-changed-algorithm"><span class="secno">18.4 </span>
            Payment method changed algorithm
          </a></li><li class="tocline"><a class="tocxref" href="#paymentrequest-updated-algorithm"><span class="secno">18.5 </span>
            PaymentRequest updated algorithm
          </a></li><li class="tocline"><a class="tocxref" href="#payer-detail-changed-algorithm"><span class="secno">18.6 </span>
            Payer detail changed algorithm
          </a></li><li class="tocline"><a class="tocxref" href="#user-accepts-the-payment-request-algorithm"><span class="secno">18.7 </span>
            User accepts the payment request algorithm
          </a></li><li class="tocline"><a class="tocxref" href="#user-aborts-the-payment-request-algorithm"><span class="secno">18.8 </span>
            User aborts the payment request algorithm
          </a></li><li class="tocline"><a class="tocxref" href="#update-a-paymentrequest-s-details-algorithm"><span class="secno">18.9 </span>
            Update a <code>PaymentRequest</code>'s details algorithm
          </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#abort-the-update"><span class="secno">18.9.1 </span>
              Abort the update
            </a></li></ol></li><li class="tocline"><a class="tocxref" href="#validate-merchant-s-details-algorithm"><span class="secno">18.10 </span>
            Validate merchant's details algorithm
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#privacy"><span class="secno">19. </span>
          Privacy and Security Considerations
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#user-protections-with-show-method"><span class="secno">19.1 </span>
            User protections with <code>show()</code> method
          </a></li><li class="tocline"><a class="tocxref" href="#secure-contexts"><span class="secno">19.2 </span>
            Secure contexts
          </a></li><li class="tocline"><a class="tocxref" href="#cross-origin-payment-requests"><span class="secno">19.3 </span>
            Cross-origin payment requests
          </a></li><li class="tocline"><a class="tocxref" href="#encryption-of-data-fields"><span class="secno">19.4 </span>
            Encryption of data fields
          </a></li><li class="tocline"><a class="tocxref" href="#how-user-agents-match-payment-handlers"><span class="secno">19.5 </span>
            How user agents match payment handlers
          </a></li><li class="tocline"><a class="tocxref" href="#exposing-user-information"><span class="secno">19.6 </span>
            Exposing user information
          </a></li><li class="tocline"><a class="tocxref" href="#merchant-validation-0"><span class="secno">19.7 </span>
            Merchant Validation
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#accessibility-considerations"><span class="secno">20. </span>
          Accessibility Considerations
        </a></li><li class="tocline"><a class="tocxref" href="#dependencies"><span class="secno">21. </span>
          Dependencies
        </a></li><li class="tocline"><a class="tocxref" href="#conformance"><span class="secno">22. </span>Conformance</a></li><li class="tocline"><a class="tocxref" href="#idl-index"><span class="secno">A. </span>IDL Index</a></li><li class="tocline"><a class="tocxref" href="#acknowledgements"><span class="secno">B. </span>
          Acknowledgements
        </a></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno">C. </span>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><span class="secno">C.1 </span>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><span class="secno">C.2 </span>Informative references</a></li></ol></li></ol></nav>
      <section class="informative" id="introduction">
        <!--OddPage--><h2 id="x1-introduction"><span class="secno">1. </span>
          Introduction
        <a class="self-link" aria-label="§" href="#introduction"></a></h2><p><em>This section is non-normative.</em></p>
        <p>
          This specification describes an API that allows <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agents</a>
          (e.g., browsers) to act as an intermediary between three parties in a
          transaction:
        </p>
        <ul>
          <li>The payee: the merchant that runs an online store, or other party
          that requests to be paid.
          </li>
          <li>The payer: the party that makes a purchase at that online store,
          and who authenticates and authorizes payment as required.
          </li>
          <li>The <dfn data-dfn-type="dfn" data-plurals="payment methods" id="dfn-payment-method">payment method</dfn>: the means that the payer uses to pay
          the payee (e.g., a basic card payment). The <dfn data-dfn-type="dfn" id="dfn-payment-method-provider">payment method
          provider</dfn> establishes the ecosystem to support that payment
          method.
          </li>
        </ul>
        <p>
          The details of how to fulfill a payment request for a given <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment
          method</a> is an implementation detail of a <dfn data-dfn-type="dfn" data-plurals="payment handlers" id="dfn-payment-handler">payment handler</dfn>.
          Concretely, each payment handler defines:
        </p>
        <dl>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-steps-to-check-if-a-payment-can-be-made">Steps to check if a payment can be made</dfn>:
          </dt>
          <dd>
            How a payment handler determines whether it, or the user, can
            potentially "make a payment" is also an implementation detail of a
            payment handler. For an example, see the <a href="https://www.w3.org/TR/payment-method-basic-card/#steps-to-check-if-a-payment-can-be-made">can
            make payment</a> algorithm of [<cite><a class="bibref" href="#bib-payment-method-basic-card">payment-method-basic-card</a></cite>].
          </dd>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-steps-to-respond-to-a-payment-request">Steps to respond to a payment request</dfn>:
          </dt>
          <dd>
            Steps that return an object or <a data-cite-path="" href="https://heycam.github.io/webidl/#dfn-dictionary">dictionary</a> that a merchant uses
            to process or validate the transaction. The structure of this object
            is specific to each <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a>. For an example of such an
            object, see the <code><a href="https://www.w3.org/TR/payment-method-basic-card/#dom-basiccardresponse">BasicCardResponse</a></code>
            dictionary of [<cite><a class="bibref" href="#bib-payment-method-basic-card">payment-method-basic-card</a></cite>].
          </dd>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-steps-for-when-a-user-changes-payment-method">Steps for when a user changes payment method</dfn> (optional)
          </dt>
          <dd>
            <p>
              Steps that describe how to handle the user changing payment method
              or monetary instrument (e.g., from a debit card to a credit card)
              that results in a <a data-cite-path="" href="https://heycam.github.io/webidl/#dfn-dictionary">dictionary</a> or <a href="https://heycam.github.io/webidl/#idl-object">object</a> or null.
            </p>
            <p>
              A <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> that defines <a href="#dfn-steps-for-when-a-user-changes-payment-method" class="internalDFN" data-link-type="dfn">steps for when a user
              changes payment method</a> <em class="rfc2119" title="MUST">MUST</em> redact the <a href="#dfn-address-line" class="internalDFN" data-link-type="dfn">address line</a>,
              <a href="#dfn-organization" class="internalDFN" data-link-type="dfn">organization</a>, <a href="#dfn-phone-number" class="internalDFN" data-link-type="dfn">phone number</a>, and <a href="#dfn-recipient" class="internalDFN" data-link-type="dfn">recipient</a> from
              any <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a> included in the
              <a href="#dom-paymentmethodchangeevent" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEvent</code></a>'s <a data-link-for="PaymentMethodChangeEvent" href="#dom-paymentmethodchangeevent-methoddetails" class="internalDFN" data-link-type="dfn"><code>methodDetails</code></a> attribute.
            </p>
          </dd>
        </dl>
        <p>
          This API also enables web sites to take advantage of more secure
          payment schemes (e.g., tokenization and system-level authentication)
          that are not possible with standard JavaScript libraries. This has the
          potential to reduce liability for the merchant and helps protect
          sensitive user information.
        </p>
        <section id="goals">
          <h3 id="x1-1-goals-and-scope"><span class="secno">1.1 </span>
            Goals and scope
          <a class="self-link" aria-label="§" href="#goals"></a></h3>
          <ul>
            <li>Allow the user agent to act as intermediary between a merchant,
            user, and <a href="#dfn-payment-method-provider" class="internalDFN" data-link-type="dfn">payment method provider</a>.
            </li>
            <li>Enable user agents to streamline the user's payment experience by
            taking into account user preferences, merchant information, security
            considerations, and other factors.
            </li>
            <li>Standardize (to the extent that it makes sense) the communication
            flow between a merchant, user agent, and <a href="#dfn-payment-method-provider" class="internalDFN" data-link-type="dfn">payment method
            provider</a>.
            </li>
            <li>Enable a <a href="#dfn-payment-method-provider" class="internalDFN" data-link-type="dfn">payment method provider</a> to bring more secure
            payment transactions to the web.
            </li>
          </ul>
          <p>
            The following are out of scope for this specification:
          </p>
          <ul>
            <li>Create a new <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a>.
            </li>
            <li>Integrate directly with payment processors.
            </li>
          </ul>
        </section>
      </section>
      <section class="informative" id="examples-of-usage">
        <!--OddPage--><h2 id="x2-examples-of-usage"><span class="secno">2. </span>
          Examples of usage
        <a class="self-link" aria-label="§" href="#examples-of-usage"></a></h2><p><em>This section is non-normative.</em></p>
        <p>
          In order to use the API, the developer needs to provide and keep track
          of a number of key pieces of information. These bits of information are
          passed to the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> constructor as arguments, and
          subsequently used to update the payment request being displayed to the
          user. Namely, these bits of information are:
        </p>
        <ul>
          <li>The <var>methodData</var>: A sequence of <a href="#dom-paymentmethoddata" class="internalDFN" data-link-type="dfn"><code>PaymentMethodData</code></a>s
          that represents the <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment methods</a> that the site supports
          (e.g., "we support card-based payments, but only Visa and MasterCard
          credit cards.").
          </li>
          <li>The <var>details</var>: The details of the transaction, as a
          <a href="#dom-paymentdetailsinit" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsInit</code></a> dictionary. This includes total cost, and
          optionally a list of goods or services being purchased, for physical
          goods, and shipping options. Additionally, it can optionally include
          "modifiers" to how payments are made. For example, "if you pay with a
          card belonging to network X, it incurs a US$3.00 processing fee".
          </li>
          <li>The <var>options</var>: Optionally, a list of things as
          <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a> that the site needs to deliver the good or
          service (e.g., for physical goods, the merchant will typically need a
          physical address to ship to. For digital goods, an email will usually
          suffice).
          </li>
        </ul>
        <p data-link-for="PaymentRequest">
          Once a <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> is constructed, it's presented to the end
          user via the <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> method. The <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> returns a promise
          that, once the user confirms request for payment, results in a
          <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a>.
        </p>
        <section id="declaring-multiple-ways-of-paying">
          <h3 id="x2-1-declaring-multiple-ways-of-paying"><span class="secno">2.1 </span>
            Declaring multiple ways of paying
          <a class="self-link" aria-label="§" href="#declaring-multiple-ways-of-paying"></a></h3>
          <p>
            When constructing a new <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>, a merchant uses the
            first argument (<var>methodData</var>) to list the different ways a
            user can pay for things (e.g., credit cards, Apple Pay, Google Pay,
            etc.). More specifically, the <var>methodData</var> sequence contains
            <a href="#dom-paymentmethoddata" class="internalDFN" data-link-type="dfn"><code>PaymentMethodData</code></a> dictionaries containing the <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment
            method identifiers</a> for the <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment methods</a> that the
            merchant accepts and any associated <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a> specific
            data (e.g., which credit card networks are supported).
          </p>
          <div class="example" id="example-1-the-methoddata-argument">
            <div class="marker">
        <a class="self-link" href="#example-1-the-methoddata-argument">Example 1</a><span class="example-title">: The `methodData` argument</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> methodData = [
    {
      <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"basic-card"</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">supportedNetworks</span>: [<span class="hljs-string">"visa"</span>, <span class="hljs-string">"mastercard"</span>],
      },
    },
    {
      <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"https://example.com/bobpay"</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">merchantIdentifier</span>: <span class="hljs-string">"XXXX"</span>,
        <span class="hljs-attr">bobPaySpecificField</span>: <span class="hljs-literal">true</span>,
      },
    },
  ];</code></pre>
          </div>
        </section>
        <section id="describing-what-is-being-paid-for">
          <h3 id="x2-2-describing-what-is-being-paid-for"><span class="secno">2.2 </span>
            Describing what is being paid for
          <a class="self-link" aria-label="§" href="#describing-what-is-being-paid-for"></a></h3>
          <p>
            When constructing a new <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>, a merchant uses the
            second argument of the constructor (<var>details</var>) to provide
            the details of the transaction that the user is being asked to
            complete. This includes the total of the order and, optionally, some
            line items that can provide a detailed breakdown of what is being
            paid for.
          </p>
          <div class="example" id="example-2-the-details-argument">
            <div class="marker">
        <a class="self-link" href="#example-2-the-details-argument">Example 2</a><span class="example-title">: The `details` argument</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> details = {
    <span class="hljs-attr">id</span>: <span class="hljs-string">"super-store-order-123-12312"</span>,
    <span class="hljs-attr">displayItems</span>: [
      {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"Sub-total"</span>,
        <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"55.00"</span> },
      },
      {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"Sales Tax"</span>,
        <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"5.00"</span> },
        <span class="hljs-attr">type</span>: <span class="hljs-string">"tax"</span>
      },
    ],
    <span class="hljs-attr">total</span>: {
      <span class="hljs-attr">label</span>: <span class="hljs-string">"Total due"</span>,
      <span class="hljs-comment">// The total is USD$65.00 here because we need to</span>
      <span class="hljs-comment">// add shipping (below). The selected shipping</span>
      <span class="hljs-comment">// costs USD$5.00.</span>
      amount: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"65.00"</span> },
    },
  };</code></pre>
          </div>
        </section>
        <section id="adding-shipping-options">
          <h3 id="x2-3-adding-shipping-options"><span class="secno">2.3 </span>
            Adding shipping options
          <a class="self-link" aria-label="§" href="#adding-shipping-options"></a></h3>
          <p>
            Here we see an example of how to add two shipping options to the
            <var>details</var>.
          </p>
          <div class="example" id="example-3-adding-shipping-options">
            <div class="marker">
        <a class="self-link" href="#example-3-adding-shipping-options">Example 3</a><span class="example-title">: Adding shipping options</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> shippingOptions = [
    {
      <span class="hljs-attr">id</span>: <span class="hljs-string">"standard"</span>,
      <span class="hljs-attr">label</span>: <span class="hljs-string">"🚛 Ground Shipping (2 days)"</span>,
      <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"5.00"</span> },
      <span class="hljs-attr">selected</span>: <span class="hljs-literal">true</span>,
    },
    {
      <span class="hljs-attr">id</span>: <span class="hljs-string">"drone"</span>,
      <span class="hljs-attr">label</span>: <span class="hljs-string">"🚀 Drone Express (2 hours)"</span>,
      <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"25.00"</span> }
    },
  ];
  <span class="hljs-built_in">Object</span>.assign(details, { shippingOptions });</code></pre>
          </div>
        </section>
        <section id="conditional-modifications-to-payment-request">
          <h3 id="x2-4-conditional-modifications-to-payment-request"><span class="secno">2.4 </span>
            Conditional modifications to payment request
          <a class="self-link" aria-label="§" href="#conditional-modifications-to-payment-request"></a></h3>
          <p>
            Here we see how to add a processing fee for using a card on a
            particular network. Notice that it requires recalculating the total.
          </p>
          <div class="example" id="example-4-modifying-payment-request-based-on-card-type">
            <div class="marker">
        <a class="self-link" href="#example-4-modifying-payment-request-based-on-card-type">Example 4</a><span class="example-title">: Modifying payment request based on card type</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-comment">// Certain cards incurs a $3.00 processing fee.</span>
  <span class="hljs-keyword">const</span> cardFee = {
    <span class="hljs-attr">label</span>: <span class="hljs-string">"Card processing fee"</span>,
    <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"3.00"</span> },
  };

  <span class="hljs-comment">// Modifiers apply when the user chooses to pay with</span>
  <span class="hljs-comment">// a card.</span>
  <span class="hljs-keyword">const</span> modifiers = [
    {
      <span class="hljs-attr">additionalDisplayItems</span>: [cardFee],
      <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"basic-card"</span>,
      <span class="hljs-attr">total</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"Total due"</span>,
        <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"68.00"</span> },
      },
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">supportedNetworks</span>: networks,
      },
    },
  ];
  <span class="hljs-built_in">Object</span>.assign(details, { modifiers });</code></pre>
          </div>
        </section>
        <section id="requesting-specific-information-from-the-end-user">
          <h3 id="x2-5-requesting-specific-information-from-the-end-user"><span class="secno">2.5 </span>
            Requesting specific information from the end user
          <a class="self-link" aria-label="§" href="#requesting-specific-information-from-the-end-user"></a></h3>
          <p>
            Some financial transactions require a user to provide specific
            information in order for a merchant to fulfill a purchase (e.g., the
            user's shipping address, in case a physical good needs to be
            shipped). To request this information, a merchant can pass a third
            optional argument (<var>options</var>) to the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>
            constructor indicating what information they require. When the
            payment request is shown, the user agent will request this
            information from the end user and return it to the merchant when the
            user accepts the payment request.
          </p>
          <div class="example" id="example-5-the-options-argument">
            <div class="marker">
        <a class="self-link" href="#example-5-the-options-argument">Example 5</a><span class="example-title">: The `options` argument</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> options = {
    <span class="hljs-attr">requestPayerEmail</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">requestPayerName</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">requestPayerPhone</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">requestShipping</span>: <span class="hljs-literal">true</span>,
  }</code></pre>
          </div>
        </section>
        <section id="constructing-a-paymentrequest">
          <h3 id="x2-6-constructing-a-paymentrequest"><span class="secno">2.6 </span>
            Constructing a <code>PaymentRequest</code>
          <a class="self-link" aria-label="§" href="#constructing-a-paymentrequest"></a></h3>
          <p>
            Having gathered all the prerequisite bits of information, we can now
            construct a <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> and request that the browser
            present it to the user:
          </p>
          <div class="example" id="example-6-constructing-a-paymentrequest">
            <div class="marker">
        <a class="self-link" href="#example-6-constructing-a-paymentrequest">Example 6</a><span class="example-title">: Constructing a `PaymentRequest`</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doPaymentRequest</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> request = <span class="hljs-keyword">new</span> PaymentRequest(methodData, details, options);
      <span class="hljs-comment">// See below for a detailed example of handling these events</span>
      request.onshippingaddresschange = <span class="hljs-function"><span class="hljs-params">ev</span> =&gt;</span> ev.updateWith(details);
      request.onshippingoptionchange = <span class="hljs-function"><span class="hljs-params">ev</span> =&gt;</span> ev.updateWith(details);
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> request.show();
      <span class="hljs-keyword">await</span> validateResponse(response);
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-comment">// AbortError, SecurityError</span>
      <span class="hljs-built_in">console</span>.error(err);
    }
  }
  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateResponse</span>(<span class="hljs-params">response</span>) </span>{
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> errors = <span class="hljs-keyword">await</span> checkAllValuesAreGood(response);
      <span class="hljs-keyword">if</span> (errors.length) {
        <span class="hljs-keyword">await</span> request.retry(errors);
        <span class="hljs-keyword">return</span> validateResponse(response);
      }
      <span class="hljs-keyword">await</span> response.complete(<span class="hljs-string">"success"</span>);
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-comment">// Something went wrong...</span>
      <span class="hljs-keyword">await</span> response.complete(<span class="hljs-string">"fail"</span>);
    }
  }
  doPaymentRequest();</code></pre>
          </div>
        </section>
        <section id="handling-events-and-updating-the-payment-request">
          <h3 id="x2-7-handling-events-and-updating-the-payment-request"><span class="secno">2.7 </span>
            Handling events and updating the payment request
          <a class="self-link" aria-label="§" href="#handling-events-and-updating-the-payment-request"></a></h3>
          <p>
            Prior to the user accepting to make payment, the site is given an
            opportunity to update the payment request in response to user input.
            This can include, for example, providing additional shipping options
            (or modifying their cost), removing items that cannot ship to a
            particular address, etc.
          </p>
          <div class="example" id="example-7-registering-event-handlers">
            <div class="marker">
        <a class="self-link" href="#example-7-registering-event-handlers">Example 7</a><span class="example-title">: Registering event handlers</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> request = <span class="hljs-keyword">new</span> PaymentRequest(methodData, details, options);
  <span class="hljs-comment">// Async update to details</span>
  request.onshippingaddresschange = <span class="hljs-function"><span class="hljs-params">ev</span> =&gt;</span> {
    ev.updateWith(checkShipping(request));
  };
  <span class="hljs-comment">// Sync update to the total</span>
  request.onshippingoptionchange = <span class="hljs-function"><span class="hljs-params">ev</span> =&gt;</span> {
    <span class="hljs-comment">// selected shipping option</span>
    <span class="hljs-keyword">const</span> { shippingOption } = request;
    <span class="hljs-keyword">const</span> newTotal = {
      <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>,
      <span class="hljs-attr">label</span>: <span class="hljs-string">"Total due"</span>,
      <span class="hljs-attr">value</span>: calculateNewTotal(shippingOption),
    };
    ev.updateWith({ <span class="hljs-attr">total</span>: newTotal });
  };
  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkShipping</span>(<span class="hljs-params">request</span>) </span>{
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> json = request.shippingAddress.toJSON();

      <span class="hljs-keyword">await</span> ensureCanShipTo(json);
      <span class="hljs-keyword">const</span> { shippingOptions, total } = <span class="hljs-keyword">await</span> calculateShipping(json);

      <span class="hljs-keyword">return</span> { shippingOptions, total };
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">error</span>: <span class="hljs-string">`Sorry! we can't ship to your address.`</span> };
    }
  }</code></pre>
          </div>
        </section>
        <section id="fine-grained-error-reporting">
          <h3 id="x2-8-fine-grained-error-reporting"><span class="secno">2.8 </span>
            Fine-grained error reporting
          <a class="self-link" aria-label="§" href="#fine-grained-error-reporting"></a></h3>
          <p>
            A developer can use the <a data-link-for="PaymentDetailsUpdate" href="#dom-paymentdetailsupdate-shippingaddresserrors" class="internalDFN" data-link-type="dfn"><code>shippingAddressErrors</code></a> member of the
            <a href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a> dictionary to indicate that there are
            validation errors with specific attributes of a
            <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>. The <a data-link-for="PaymentDetailsUpdate" href="#dom-paymentdetailsupdate-shippingaddresserrors" class="internalDFN" data-link-type="dfn"><code>shippingAddressErrors</code></a> member is a
            <a href="#dom-addresserrors" class="internalDFN" data-link-type="dfn"><code>AddressErrors</code></a> dictionary, whose members specifically demarcate
            the fields of a <a href="#dfn-physical-address" class="internalDFN" data-link-type="dfn">physical address</a> that are erroneous while also
            providing helpful error messages to be displayed to the end user.
          </p>
          <div class="example" id="example-8">
            <div class="marker">
        <a class="self-link" href="#example-8">Example 8</a>
      </div>
            <pre aria-busy="false"><code class="hljs js">request.onshippingaddresschange = <span class="hljs-function"><span class="hljs-params">ev</span> =&gt;</span> {
    ev.updateWith(validateAddress(request.shippingAddress));
  };
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateAddress</span>(<span class="hljs-params">shippingAddress</span>) </span>{
    <span class="hljs-keyword">const</span> error = <span class="hljs-string">"Can't ship to this address."</span>;
    <span class="hljs-keyword">const</span> shippingAddressErrors = {
      <span class="hljs-attr">city</span>: <span class="hljs-string">"FarmVille is not a real place."</span>,
      <span class="hljs-attr">postalCode</span>: <span class="hljs-string">"Unknown postal code for your country."</span>,
    };
    <span class="hljs-comment">// Empty shippingOptions implies that we can't ship</span>
    <span class="hljs-comment">// to this address.</span>
    <span class="hljs-keyword">const</span> shippingOptions = [];
    <span class="hljs-keyword">return</span> { error, shippingAddressErrors, shippingOptions };
  }</code></pre>
          </div>
        </section>
        <section data-link-for="PaymentResponse" id="posting-payment-response-back-to-a-server">
          <h3 id="x2-9-posting-payment-response-back-to-a-server"><span class="secno">2.9 </span>
            POSTing payment response back to a server
          <a class="self-link" aria-label="§" href="#posting-payment-response-back-to-a-server"></a></h3>
          <p>
            It's expected that data in a <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a> will be POSTed
            back to a server for processing. To make this as easy as possible,
            <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a> provides a <a href="#dom-paymentresponse-tojson" class="internalDFN" data-link-type="dfn"><code>toJSON()</code></a> method that
            serializes the object directly into JSON. This makes it trivial to
            POST the resulting JSON back to a server using the <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a>:
          </p>
          <div class="example" id="example-9-posting-with-fetch">
            <div class="marker">
        <a class="self-link" href="#example-9-posting-with-fetch">Example 9</a><span class="example-title">: POSTing with `fetch()`</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doPaymentRequest</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> payRequest = <span class="hljs-keyword">new</span> PaymentRequest(methodData, details, options);
    <span class="hljs-keyword">const</span> payResponse = <span class="hljs-keyword">await</span> payRequest.show();
    <span class="hljs-keyword">let</span> result = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> httpResponse = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">"/process-payment"</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
        <span class="hljs-attr">headers</span>: { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span> },
        <span class="hljs-attr">body</span>: payResponse.toJSON(),
      });
      result = httpResponse.ok ? <span class="hljs-string">"success"</span> : <span class="hljs-string">"fail"</span>;
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.error(err);
      result = <span class="hljs-string">"fail"</span>;
    }
    <span class="hljs-keyword">await</span> payResponse.complete(result);
  }
  doPaymentRequest();</code></pre>
          </div>
        </section>
      </section>
      <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="paymentrequest-interface">
        <!--OddPage--><h2 id="x3-paymentrequest-interface"><span class="secno">3. </span>
          <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentrequest" data-idl="interface" data-title="PaymentRequest"><code>PaymentRequest</code></dfn> interface
        <a class="self-link" aria-label="§" href="#paymentrequest-interface"></a></h2>
        <div><pre class="def idl"><span data-idl="" class="idlInterface" id="idl-def-paymentrequest" data-title="PaymentRequest">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a data-link-for="" href="#dom-paymentmethoddata" class="internalDFN" data-link-type="dfn"><code>PaymentMethodData</code></a>&gt;</span> <span class="idlParamName">methodData</span>,<span class="idlType"> <a data-link-for="" href="#dom-paymentdetailsinit" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsInit</code></a></span> <span class="idlParamName">details</span>, optional<span class="idlType"> <a data-link-for="" href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a></span> <span class="idlParamName">options</span>)</span>,
  <span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=Window</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#interface-eventtarget"><code>EventTarget</code></a></span> {<span data-idl="" class="idlMethod" id="idl-def-paymentrequest-show-detailspromise" data-title="show" data-dfn-for="paymentrequest">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#NewObject">NewObject</a></span>]<span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a data-link-for="" href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a>&gt;</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.show()|paymentrequest.show|show()|show" href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show</code></a></span>(optional<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a data-link-for="" href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a>&gt;</span> <span class="idlParamName">detailsPromise</span>);</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequest-abort" data-title="abort" data-dfn-for="paymentrequest">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#NewObject">NewObject</a></span>]<span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.abort()|paymentrequest.abort|abort()|abort" href="#dom-paymentrequest-abort" class="internalDFN" data-link-type="dfn"><code>abort</code></a></span>();</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequest-canmakepayment" data-title="canMakePayment" data-dfn-for="paymentrequest">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#NewObject">NewObject</a></span>]<span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a>&gt;</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.canmakepayment()|paymentrequest.canmakepayment|canmakepayment()|canmakepayment" href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment</code></a></span>();</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequest-id" data-title="id" data-dfn-for="paymentrequest">

    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.id|id" href="#dom-paymentrequest-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequest-shippingaddress" data-title="shippingAddress" data-dfn-for="paymentrequest">
    readonly attribute<span class="idlType"> <a data-link-for="" href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>?</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.shippingaddress|shippingaddress" href="#dom-paymentrequest-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequest-shippingoption" data-title="shippingOption" data-dfn-for="paymentrequest">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.shippingoption|shippingoption" href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequest-shippingtype" data-title="shippingType" data-dfn-for="paymentrequest">
    readonly attribute<span class="idlType"> <a data-link-for="" href="#dom-paymentshippingtype" class="internalDFN" data-link-type="dfn"><code>PaymentShippingType</code></a>?</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.shippingtype|shippingtype" href="#dom-paymentrequest-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequest-onmerchantvalidation" data-title="onmerchantvalidation" data-dfn-for="paymentrequest">

    attribute<span class="idlType"> <a href="https://html.spec.whatwg.org/multipage/#eventhandler">EventHandler</a></span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.onmerchantvalidation|onmerchantvalidation" href="#dom-paymentrequest-onmerchantvalidation" class="internalDFN" data-link-type="dfn"><code>onmerchantvalidation</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequest-onshippingaddresschange" data-title="onshippingaddresschange" data-dfn-for="paymentrequest">
    attribute<span class="idlType"> <a href="https://html.spec.whatwg.org/multipage/#eventhandler">EventHandler</a></span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.onshippingaddresschange|onshippingaddresschange" href="#dom-paymentrequest-onshippingaddresschange" class="internalDFN" data-link-type="dfn"><code>onshippingaddresschange</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequest-onshippingoptionchange" data-title="onshippingoptionchange" data-dfn-for="paymentrequest">
    attribute<span class="idlType"> <a href="https://html.spec.whatwg.org/multipage/#eventhandler">EventHandler</a></span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.onshippingoptionchange|onshippingoptionchange" href="#dom-paymentrequest-onshippingoptionchange" class="internalDFN" data-link-type="dfn"><code>onshippingoptionchange</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequest-onpaymentmethodchange" data-title="onpaymentmethodchange" data-dfn-for="paymentrequest">
    attribute<span class="idlType"> <a href="https://html.spec.whatwg.org/multipage/#eventhandler">EventHandler</a></span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.onpaymentmethodchange|onpaymentmethodchange" href="#dom-paymentrequest-onpaymentmethodchange" class="internalDFN" data-link-type="dfn"><code>onpaymentmethodchange</code></a></span>;</span>
  };</span></pre></div>
        <div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div><div class="">
          <p>
            A developer creates a <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> to make a payment
            request. This is typically associated with the user initiating a
            payment process (e.g., by activating a "Buy," "Purchase," or
            "Checkout" button on a web site, selecting a "Power Up" in an
            interactive game, or paying at a kiosk in a parking structure). The
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> allows developers to exchange information with
            the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> while the user is providing input (up to the
            point of user approval or denial of the payment request).
          </p>
          <p data-link-for="PaymentRequest">
            The <a href="#dom-paymentrequest-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a>, <a href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a>, and
            <a href="#dom-paymentrequest-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a> attributes are populated during processing if the
            <a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a>
            member is set.
          </p>
        </div></div>
        <p>
          A <var>request</var>'s <dfn data-dfn-type="dfn" id="dfn-payment-relevant-browsing-context">payment-relevant browsing context</dfn> is
          that <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>'s <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>'s browsing
          context's <a data-cite-path="browsers.html" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>. Every <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant
          browsing context</a> has a <dfn data-dfn-type="dfn" id="dfn-payment-request-is-showing">payment request is showing</dfn>
          boolean, which prevents showing more than one payment UI at a time.
        </p>
        <p class="Note">
          The <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean simply prevents more than
          one payment UI being shown in a single browser tab. However, a
          <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> can restrict the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> to showing
          only one payment UI across all browser windows and tabs. Other payment
          handlers might allow showing a payment UI across disparate browser
          tabs.
        </p>
        <section id="constructor">
          <h3 id="x3-1-constructor"><span class="secno">3.1 </span>
            Constructor
          <a class="self-link" aria-label="§" href="#constructor"></a></h3>
          <p>
            The <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> is constructed using the supplied sequence
            of <a href="#dom-paymentmethoddata" class="internalDFN" data-link-type="dfn"><code>PaymentMethodData</code></a> <var>methodData</var> including any
            <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a> specific <a data-lt="PaymentMethodData.data" href="#dom-paymentmethoddata-data" class="internalDFN" data-link-type="dfn"><code>data</code></a>, the <a href="#dom-paymentdetailsinit" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsInit</code></a>
            <var>details</var>, and the <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a> <var>options</var>.
          </p>
          <p>
            The <code><dfn data-lt="paymentrequest.paymentrequest()|paymentrequest(methoddata, details, options)" data-dfn-type="dfn" id="dfn-paymentrequest-paymentrequest">PaymentRequest(<var>methodData</var>,
            <var>details</var>, <var>options</var>)</dfn></code> constructor <em class="rfc2119" title="MUST">MUST</em>
            act as follows:
          </p>
          <ol data-link-for="PaymentDetailsBase" class="algorithm">
            <li>If the <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a>'s <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-document">responsible
            document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use">allowed to use</a> the "<a data-lt="payment-feature" href="#dfn-payment-feature" class="internalDFN" data-link-type="dfn"><code>payment</code></a>" feature, then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a
            "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#securityerror"><code>SecurityError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>Establish the request's id:
              <ol>
                <li>If <var>
                  details</var>.<a data-lt="PaymentDetailsInit.id" href="#dom-paymentdetailsinit-id" class="internalDFN" data-link-type="dfn"><code>id</code></a> is
                  missing, add an <a data-lt="PaymentDetailsInit.id" href="#dom-paymentdetailsinit-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
                  member to <var>details</var> and set its value to a
                  <abbr title="Universally Unique Identifier">UUID</abbr>
                  [<cite><a class="bibref" href="#bib-rfc4122">RFC4122</a></cite>].
                </li>
              </ol>
            </li>
            <li>Let <var>serializedMethodData</var> be an empty list.
            </li>
            <li>Process payment methods:
              <ol data-link-for="PaymentMethodData">
                <li>If the length of the <var>methodData</var> sequence is zero,
                then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"><code>TypeError</code></a>, optionally informing the
                developer that at least one <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a> is required.
                </li>
                <li>For each <var>paymentMethod</var> of <var>methodData</var>:
                  <ol>
                    <li>Run the steps
                    to <a href="https://www.w3.org/TR/payment-method-id/#dfn-validate-a-payment-method-identifier">
                      validate a payment method identifier</a> with
                      <var>paymentMethod</var>.<a data-lt="PaymentMethodData.supportedMethods" href="#dom-paymentmethoddata-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a>.
                      If it returns false, then throw a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror"><code>RangeError</code></a>
                      exception. Optionally, inform the developer that the
                      payment method identifier is invalid.
                    </li>
                    <li>If the <a data-lt="PaymentMethodData.data" href="#dom-paymentmethoddata-data" class="internalDFN" data-link-type="dfn"><code>data</code></a>
                    member of <var>paymentMethod</var> is missing, let
                    <var>serializedData</var> be null. Otherwise, let
                    <var>serializedData</var> be the result of
                    <a href="#dfn-json-serialized" class="internalDFN" data-link-type="dfn">JSON-serializing</a>
                      <var>paymentMethod</var>.<a data-lt="PaymentMethodData.data" href="#dom-paymentmethoddata-data" class="internalDFN" data-link-type="dfn"><code>data</code></a>
                      into a string. Rethrow any exceptions.
                    </li>
                    <li>If <var>serializedData</var> is not null, and if required
                    by the specification that defines the
                    <var>paymentMethod</var>.<a href="#dom-paymentmethoddata-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a>:
                      <ol>
                        <li>Let <var>object</var> be the result of
                          <a href="https://tc39.github.io/ecma262/#sec-json.parse">JSON-parsing</a>
                          <var>serializedData</var>.
                        </li>
                        <li>
                          <p>
                            <a data-lt="converting" data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value">Convert</a> <var>object</var>
                            to an IDL value of the type specified by the
                            specification that defines the
                            <var>paymentMethod</var>.<a href="#dom-paymentmethoddata-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a>
                            (e.g., a <a href="https://www.w3.org/TR/payment-method-basic-card/#dom-basiccardrequest">BasicCardRequest</a>
                            in the case of [<cite><a class="bibref" href="#bib-payment-method-basic-card">payment-method-basic-card</a></cite>]).
                            Rethrow any exceptions.
                          </p>
                          <div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div><p class="">
                            This step assures that any IDL type conversion errors
                            are caught as early as possible.
                          </p></div>
                        </li>
                      </ol>
                    </li>
                    <li>Add the tuple (<var>paymentMethod</var>.<a data-lt="PaymentMethodData.supportedMethods" href="#dom-paymentmethoddata-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a>,
                    <var>serializedData</var>) to
                    <var>serializedMethodData</var>.
                    </li>
                  </ol>
                </li>
              </ol>
            </li>
            <li data-link-for="PaymentDetailsInit">Process the total:
              <ol>
                <li>
                  <a href="#dfn-check-and-canonicalize-total-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize total amount</a>
                  <var>details</var>.<a href="#dom-paymentdetailsinit-total" class="internalDFN" data-link-type="dfn"><code>total</code></a>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>. Rethrow any exceptions.
                </li>
              </ol>
            </li>
            <li>If the <a href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a> member of <var>details</var> is
            present, then for each <var>item</var> in
            <var>details</var>.<a href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a>:
              <ol>
                <li>
                  <a href="#dfn-check-and-canonicalize-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize amount</a>
                  <var>item</var>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>.
                  Rethrow any exceptions.
                </li>
              </ol>
            </li>
            <li>Let <var>selectedShippingOption</var> be null.
            </li>
            <li>If the <a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> member of <var>
              options</var> is present and set to true, process shipping options:
              <ol>
                <li>Let <var>options</var> be an empty
                <code><a data-cite-path="" href="https://heycam.github.io/webidl/#idl-sequence">sequence</a></code>&lt;<a href="#dom-paymentshippingoption" class="internalDFN" data-link-type="dfn"><code>PaymentShippingOption</code></a>&gt;.
                </li>
                <li>If the <a href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a> member of <var>details</var> is
                present, then:
                  <ol data-link-for="PaymentShippingOption">
                    <li>Let <var>seenIDs</var> be an empty set.
                    </li>
                    <li>For each <var>option</var> in
                    <var>details</var>.<a data-link-for="PaymentDetailsBase" href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a>:
                      <ol>
                        <li>
                          <a href="#dfn-check-and-canonicalize-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize amount</a>
                          <var>item</var>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>. Rethrow any
                          exceptions.
                        </li>
                        <li>If <var>seenIDs</var> contains
                        <var>option</var>.<a href="#dom-paymentshippingoption-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>, then throw a
                        <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"><code>TypeError</code></a>. Optionally, inform the developer that
                        shipping option IDs must be unique.
                        </li>
                        <li>Otherwise, append <var>option</var>.<a href="#dom-paymentshippingoption-id" class="internalDFN" data-link-type="dfn"><code>id</code></a> to
                        <var>seenIDs</var>.
                        </li>
                        <li>If <var>option</var>.<a href="#dom-paymentshippingoption-selected" class="internalDFN" data-link-type="dfn"><code>selected</code></a> is true, then
                        set <var>selectedShippingOption</var> to
                        <var>option</var>.<a href="#dom-paymentshippingoption-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>.
                        </li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li>Set <var>details</var>.<a data-lt="PaymentDetailsBase.shippingOptions" href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a> to <var>
                  options</var>.
                </li>
              </ol>
            </li>
            <li>Let <var>serializedModifierData</var> be an empty list.
            </li>
            <li data-link-for="PaymentDetailsBase">Process payment details
            modifiers:
              <ol>
                <li>Let <var>modifiers</var> be an empty
                <code><a data-cite-path="" href="https://heycam.github.io/webidl/#idl-sequence">sequence</a></code>&lt;<a href="#dom-paymentdetailsmodifier" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsModifier</code></a>&gt;.
                </li>
                <li>If the <a href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a> member of <var>details</var> is
                present, then:
                  <ol>
                    <li>Set <var>modifiers</var> to
                    <var>details</var>.<a href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a>.
                    </li>
                    <li>For each <var>modifier</var> of <var>modifiers</var>:
                      <ol>
                        <li>If the <a data-lt="PaymentDetailsModifier.total" href="#dom-paymentdetailsmodifier-total" class="internalDFN" data-link-type="dfn"><code>total</code></a> member of <var>
                          modifier</var> is present, then:
                          <ol>
                            <li>
                              <a href="#dfn-check-and-canonicalize-total-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize total amount</a>
                              <var>modifier</var>.<a data-lt="PaymentDetailsModifier.total" href="#dom-paymentdetailsmodifier-total" class="internalDFN" data-link-type="dfn"><code>total</code></a>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>.
                              Rethrow any exceptions.
                            </li>
                          </ol>
                        </li>
                        <li>If the <a data-lt="PaymentDetailsModifier.additionalDisplayItems" href="#dom-paymentdetailsmodifier-additionaldisplayitems" class="internalDFN" data-link-type="dfn"><code>additionalDisplayItems</code></a>
                        member of <var>modifier</var> is present, then for each
                        <var>item</var> of <var>modifier</var>.<a data-lt="PaymentDetailsModifier.additionalDisplayItems" href="#dom-paymentdetailsmodifier-additionaldisplayitems" class="internalDFN" data-link-type="dfn"><code>additionalDisplayItems</code></a>:
                          <ol>
                            <li>
                              <a href="#dfn-check-and-canonicalize-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize amount</a>
                              <var>item</var>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>. Rethrow any
                              exceptions.
                            </li>
                          </ol>
                        </li>
                        <li>If the <a data-lt="PaymentDetailsModifier.data" href="#dom-paymentdetailsmodifier-data" class="internalDFN" data-link-type="dfn"><code>data</code></a> member of
                        <var>modifier</var> is missing, let
                        <var>serializedData</var> be null. Otherwise, let
                        <var>serializedData</var> be the result of
                        <a href="#dfn-json-serialized" class="internalDFN" data-link-type="dfn">JSON-serializing</a> <var>modifier</var>.<a data-lt="PaymentDetailsModifier.data" href="#dom-paymentdetailsmodifier-data" class="internalDFN" data-link-type="dfn"><code>data</code></a> into a string.
                        Rethrow any exceptions.
                        </li>
                        <li>Add the tuple (<var>modifier</var>.<a data-lt="PaymentDetailsModifier.supportedMethods" href="#dom-paymentdetailsmodifier-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a>,
                        <var>serializedData</var>) to
                        <var>serializedModifierData</var>.
                        </li>
                        <li>Remove the <a data-lt="PaymentDetailsModifier.data" href="#dom-paymentdetailsmodifier-data" class="internalDFN" data-link-type="dfn"><code>
                          data</code></a> member of <var>modifier</var>, if it is
                          present.
                        </li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li>Set <var>details</var>.<a data-lt="PaymentDetailsBase.modifiers" href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a> to
                <var>modifiers</var>.
                </li>
              </ol>
            </li>
            <li>Let <var>request</var> be a new <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>.
            </li>
            <li>Set <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a> to <var>options</var>.
            </li>
            <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to "<a href="#dfn-created" class="internalDFN" data-link-type="dfn">created</a>".
            </li>
            <li>Set <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> to false.
            </li>
            <li>Set <var>request</var>.<a href="#dfn-details" class="internalDFN" data-link-type="dfn">[[details]]</a> to <var>details</var>.
            </li>
            <li>Set <var>request</var>.<a href="#dfn-serializedmodifierdata" class="internalDFN" data-link-type="dfn">[[serializedModifierData]]</a> to
            <var>serializedModifierData</var>.
            </li>
            <li>Set <var>request</var>.<a href="#dfn-serializedmethoddata" class="internalDFN" data-link-type="dfn">[[serializedMethodData]]</a> to <var>
              serializedMethodData</var>.
            </li>
            <li>Set <var>request</var>.<a href="#dfn-response" class="internalDFN" data-link-type="dfn">[[response]]</a> to null.
            </li>
            <li>Set the value of <var>request</var>'s <a data-lt="PaymentRequest.shippingOption" href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a> attribute to <var>
              selectedShippingOption</var>.
            </li>
            <li>Set the value of the <a data-lt="PaymentRequest.shippingAddress" href="#dom-paymentrequest-shippingaddress" class="internalDFN" data-link-type="dfn"><code>
              shippingAddress</code></a> attribute on <var>request</var> to null.
            </li>
            <li>If <var>options</var>.<a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> is set to true,
            then set the value of the <a data-lt="PaymentRequest.shippingType" href="#dom-paymentrequest-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a> attribute on
            <var>request</var> to <var>options</var>.<a data-lt="PaymentOptions.shippingType" href="#dom-paymentoptions-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a>. Otherwise, set it to
            null.
            </li>
            <li>Return <var>request</var>.
            </li>
          </ol>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="id-attribute">
          <h3 id="x3-2-id-attribute"><span class="secno">3.2 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-id" data-idl="attribute" data-title="id" data-type="DOMString" data-lt="paymentrequest.id|id"><code>id</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#id-attribute"></a></h3>
          <p>
            When getting, the <a href="#dom-paymentrequest-id" class="internalDFN" data-link-type="dfn"><code>id</code></a> attribute returns this
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>'s <a href="#dfn-details" class="internalDFN" data-link-type="dfn">[[details]]</a>.<a data-lt="PaymentDetailsInit.id" href="#dom-paymentdetailsinit-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>.
          </p>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="show-method">
          <h3 id="x3-3-show-method"><span class="secno">3.3 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-show" data-idl="operation" data-title="show()" data-type="Promise" data-lt="paymentrequest.show()|paymentrequest.show|show()|show"><code>show()</code></dfn> method
          <a class="self-link" aria-label="§" href="#show-method"></a></h3>
          <div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Note</span></div><div class="">
            <p>
              The <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> method is called when a developer wants to begin
              user interaction for the payment request. The <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> method
              returns a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a> that will be resolved when the <a href="#dfn-user-accepts-the-payment-request" class="internalDFN" data-link-type="dfn">user
              accepts the payment request</a>. Some kind of user interface will
              be presented to the user to facilitate the payment request after
              the <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> method returns.
            </p>
            <p>
              Each payment handler controls what happens when multiple browsing
              context simultaneously call the <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> method. For instance,
              some payment handlers will allow multiple payment UIs to be shown
              in different browser tabs/windows. Other payment handlers might
              only allow a single payment UI to be shown for the entire user
              agent.
            </p>
          </div></div>
          <p>
            The <code>show(optional <var>detailsPromise</var>)</code> method <em class="rfc2119" title="MUST">MUST</em>
            act as follows:
          </p>
          <ol class="algorithm">
            <li>
            If the method was not <a data-cite-path="interaction.html" href="https://html.spec.whatwg.org/multipage/interaction.html#triggered-by-user-activation">triggered by user activation</a>, return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">
              a promise rejected with</a> with a "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#securityerror"><code>SecurityError</code></a>"
              <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>Let <var>request</var> be the <a data-cite-path="" href="https://dom.spec.whatwg.org/#context-object">context object</a>.
            </li>
            <li>Let <var>document</var> be <var>request</var>'s <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant
            global object</a>'s <a data-cite-path="window-object.html" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window">associated <code>Document</code></a>.
            </li>
            <li>If
            <var>document</var> is not <a data-cite-path="browsers.html" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active">fully active</a>, then return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a
            promise rejected with</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>
              <p>
                Optionally, if the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> wishes to disallow the call
                to <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> to protect the user, then return a promise
                rejected with a "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#securityerror"><code>SecurityError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>. For
                example, the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> may limit the rate at which a page
                can call <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a>, as described in section <a href="#privacy" class="sec-ref"><span class="secno">§&nbsp;19.</span> <span class="sec-title">Privacy and Security Considerations</span></a>.
              </p>
            </li>
            <li>If <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is not "<a href="#dfn-created" class="internalDFN" data-link-type="dfn">created</a>"
            then return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a promise rejected with</a> an
            "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>If the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a>
            boolean is true, then:
              <ol>
                <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>".
                </li>
                <li>Return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a promise rejected with</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>"
                <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
                </li>
              </ol>
            </li>
            <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>".
            </li>
            <li>Let <var>acceptPromise</var> be <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-new-promise">a new promise</a>.
            </li>
            <li>Set <var>request</var>.<a href="#dfn-acceptpromise" class="internalDFN" data-link-type="dfn">[[acceptPromise]]</a> to
            <var>acceptPromise</var>.
            </li>
            <li>
              <p>
                Optionally:
              </p>
              <ol>
                <li>Reject <var>acceptPromise</var> with an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>"
                <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
                </li>
                <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>".
                </li>
                <li>Return <var>acceptPromise</var>.
                </li>
              </ol>
              <div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Note</span></div><p class="">
                This allows the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> to act as if the user had
                immediately <a data-lt="user aborts the payment request" href="#dfn-user-aborts-the-payment-request" class="internalDFN" data-link-type="dfn">aborted
                the payment request</a>, at its discretion. For example, in
                "private browsing" modes or similar, user agents might take
                advantage of this step.
              </p></div>
            </li>
            <li>Set <var>request</var>'s <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant browsing
            context</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean to true.
            </li>
            <li>Return <var>acceptPromise</var> and perform the remaining steps
            <a data-cite-path="infrastructure.html" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
            </li>
            <li>Let <var>handlers</var> be an empty <a data-cite-path="" href="https://infra.spec.whatwg.org/#list">list</a>.
            </li>
            <li>For each <var>paymentMethod</var> tuple in
            <var>request</var>.<a href="#dfn-serializedmethoddata" class="internalDFN" data-link-type="dfn">[[serializedMethodData]]</a>:
              <ol>
                <li>Let <var>identifier</var> be the first element in the
                <var>paymentMethod</var> tuple.
                </li>
                <li>Let <var>data</var> be the result of <a href="https://tc39.github.io/ecma262/#sec-json.parse">JSON-parsing</a> the second element
                in the <var>paymentMethod</var> tuple.
                </li>
                <li>If required by the specification that defines the
                <var>identifier</var>, then <a data-cite-path="" href="https://infra.spec.whatwg.org/#javascript-string-convert">convert</a> <var>data</var> to an
                IDL value of the type specified there. Otherwise, <a data-cite-path="" href="https://infra.spec.whatwg.org/#javascript-string-convert">convert</a>
                to <a href="https://heycam.github.io/webidl/#idl-object">object</a>.
                </li>
                <li>If conversion results in an <a data-cite-path="" href="https://heycam.github.io/webidl/#dfn-exception">exception</a>
                <var>error</var>:
                  <ol>
                    <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to
                    "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>".
                    </li>
                    <li>Reject <var>acceptPromise</var> with <var>error</var>.
                    </li>
                    <li>Set <var>request</var>'s <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant browsing
                    context</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean to
                    false.
                    </li>
                    <li>Terminate this algorithm.
                    </li>
                  </ol>
                </li>
                <li>Let <var>registeredHandlers</var> be a <a data-cite-path="" href="https://infra.spec.whatwg.org/#list">list</a> of
                registered payment handlers for the payment method
                <var>identifier</var>.
                </li>
                <li>For each <var>handler</var> in <var>registeredHandlers</var>:
                  <ol>
                    <li>Let <var>canMakePayment</var> be the result of running
                    <var>handler</var>'s <a href="#dfn-steps-to-check-if-a-payment-can-be-made" class="internalDFN" data-link-type="dfn">steps to check if a payment can be
                    made</a> with <var>data</var>.
                    </li>
                    <li>If <var>canMakePayment</var> is true, then append
                    <var>handler</var> to <var>handlers</var>.
                    </li>
                  </ol>
                </li>
              </ol>
            </li>
            <li>If <var>handlers</var> is empty, then:
              <ol>
                <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>".
                </li>
                <li>Reject <var>acceptPromise</var> with
                "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#notsupportederror"><code>NotSupportedError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
                </li>
                <li>Set <var>request</var>'s <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant browsing
                context</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean to false.
                </li>
                <li>Terminate this algorithm.
                </li>
              </ol>
            </li>
            <li>Present a user interface that will allow the user to interact
            with the <var>handlers</var>. The user agent <em class="rfc2119" title="SHOULD">SHOULD</em> prioritize the
            preference of the user when presenting payment methods. It is
            <em class="rfc2119" title="RECOMMENDED">RECOMMENDED</em> that the language of the user interface match the
            <a href="https://html.spec.whatwg.org/multipage/#language">language</a> of <a href="https://html.spec.whatwg.org/multipage/multipage/dom.html#the-body-element-2">the body element</a>.
            </li>
            <li>
            If <var>detailsPromise</var> was passed, then:
              <ol>
                <li>Run the <a href="#dfn-update-a-paymentrequest-s-details-algorithm" class="internalDFN" data-link-type="dfn">update a <code>PaymentRequest</code>'s details
                algorithm</a> with <var>detailsPromise</var>, <var>request</var>,
                and null.
                </li>
                <li>Wait for the <var>detailsPromise</var> to settle.
                  <div class="note" role="note" id="issue-container-generatedID-3"><div role="heading" class="note-title marker" id="h-note-3" aria-level="4"><span>Note</span></div><p class="">
                    Based on how the <var>detailsPromise</var> settles, the
                    <a href="#dfn-update-a-paymentrequest-s-details-algorithm" class="internalDFN" data-link-type="dfn">update a <code>PaymentRequest</code>'s details
                    algorithm</a> determines how the payment UI behaves. That is,
                    <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#upon-rejection">upon rejection</a> of the <var>detailsPromise</var>, the
                    payment request aborts. Otherwise, <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#upon-fulfillment">upon fulfillment</a>
                    <var>detailsPromise</var>, the user agent re-enables the
                    payment request UI and the payment flow can continue.
                  </p></div>
                </li>
              </ol>
            </li>
            <li>Let <var>handler</var> be the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> selected by
            the end-user.
            </li>
            <li>Let <var>modifiers</var> be an empty list.
            </li>
            <li>For each <var>tuple</var> in <a href="#dfn-serializedmodifierdata" class="internalDFN" data-link-type="dfn">[[serializedModifierData]]</a>:
              <ol>
                <li>If the first element of <var>tuple</var> (a <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">PMI</a>)
                matches the <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method identifier</a> of
                <var>handler</var>, then append the second element of
                <var>tuple</var> (the serialized method data) to
                <var>modifiers</var>.
                </li>
              </ol>
            </li>
            <li>
              <p>
                Pass the <a data-lt="convert" data-cite-path="" href="https://infra.spec.whatwg.org/#javascript-string-convert">converted</a> second element in the
                <var>paymentMethod</var> tuple and <var>modifiers</var>.
                Optionally, the user agent <em class="rfc2119" title="SHOULD">SHOULD</em> send the appropriate data from
                <var>request</var> to the user-selected <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> in
                order to guide the user through the payment process. This
                includes the various attributes and other internal slots of
                <var>request</var> (some <em class="rfc2119" title="MAY">MAY</em> be excluded for privacy reasons
                where appropriate).
              </p>
              <p>
                Handling of multiple applicable modifiers in the
                <a href="#dfn-serializedmodifierdata" class="internalDFN" data-link-type="dfn">[[serializedModifierData]]</a> internal slot is <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment
                handler</a> specific and beyond the scope of this specification.
                Nevertheless, it is <em class="rfc2119" title="RECOMMENDED">RECOMMENDED</em> that <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handlers</a> use
                a "last one wins" approach with items in the
                <a href="#dfn-serializedmodifierdata" class="internalDFN" data-link-type="dfn">[[serializedModifierData]]</a> list: that is to say, an item
                at the end of the list always takes precedence over any item at
                the beginning of the list (see example below).
              </p>
              <aside class="example" id="example-10-handling-of-multiple-applicable-modifiers"><div class="marker">
        <a class="self-link" href="#example-10-handling-of-multiple-applicable-modifiers">Example 10</a><span class="example-title">: Handling of multiple applicable modifiers</span>
      </div>
                <p>
                  This example uses the "basic-card" payment method to from
                  [<cite><a class="bibref" href="#bib-payment-method-basic-card">payment-method-basic-card</a></cite>] demonstrate precedence order of
                  <a href="#dfn-serializedmodifierdata" class="internalDFN" data-link-type="dfn">[[serializedModifierData]]</a>. The first modifier applies
                  equally to all cards, irrespective of network. The second
                  modifier applies specifically to cards on the "visa" network.
                </p>
                <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> details = {
    <span class="hljs-attr">total</span>: {
      <span class="hljs-attr">label</span>: <span class="hljs-string">"Total due"</span>,
      <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"65.00"</span> },
    },
  };
  <span class="hljs-comment">// All cards incur a $3.00 processing fee.</span>
  <span class="hljs-keyword">const</span> cardFee = {
    <span class="hljs-attr">label</span>: <span class="hljs-string">"Card processing fee"</span>,
    <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"3.00"</span> },
  };

  <span class="hljs-comment">// But visa card incurs a $1.00 processing fee.</span>
  <span class="hljs-keyword">const</span> visaFee = {
    <span class="hljs-attr">label</span>: <span class="hljs-string">"Visa processing fee"</span>,
    <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"1.00"</span> },
  };

  <span class="hljs-comment">// Modifiers apply when the user chooses to pay with</span>
  <span class="hljs-comment">// a credit card.</span>
  details.modifiers = [
    <span class="hljs-comment">// Applies to all cards...</span>
    {
      <span class="hljs-attr">additionalDisplayItems</span>: [cardFee],
      <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"basic-card"</span>,
      <span class="hljs-attr">total</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"Total due"</span>,
        <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"53.00"</span> },
      },
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">supportedNetworks</span>: [], <span class="hljs-comment">// All networks</span>
      },
    },
    <span class="hljs-comment">// Applies only to visa cards...</span>
    {
      <span class="hljs-attr">additionalDisplayItems</span>: [visaFee],
      <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"basic-card"</span>,
      <span class="hljs-attr">total</span>: {
        <span class="hljs-attr">label</span>: <span class="hljs-string">"Total due"</span>,
        <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"51.00"</span> },
      },
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">supportedNetworks</span>: [<span class="hljs-string">"visa"</span>], <span class="hljs-comment">// Visa network only</span>
      },
    },
  ];</code></pre>
                <p>
                  If the modifiers array in the example above was to be reversed
                  (i.e., <code class="js">supportedNetworks: []</code> was to
                  come last in the modifiers list), then it would take precedence
                  over the "visa" modifier even though the visa modifier matches
                  visa cards more specifically. This is because "last one wins".
                </p>
              </aside>
              <p>
                The <var>acceptPromise</var> will later be resolved or rejected
                by either the <a href="#dfn-user-accepts-the-payment-request" class="internalDFN" data-link-type="dfn">user accepts the payment request algorithm</a>
                or the <a href="#dfn-user-aborts-the-payment-request" class="internalDFN" data-link-type="dfn">user aborts the payment request algorithm</a>, which
                are triggered through interaction with the user interface.
              </p>
              <p>
                If <var>document</var> stops being <a data-cite-path="browsers.html" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active">fully active</a> while the
                user interface is being shown, or no longer is by the time this
                step is reached, then:
              </p>
              <ol>
                <li>Close down the user interface.
                </li>
                <li>Set <var>request</var>'s <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant browsing
                context</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean to false.
                </li>
                <li>Reject <var>acceptPromise</var> with an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>"
                <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
                </li>
              </ol>
            </li>
          </ol>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="abort-method">
          <h3 id="x3-4-abort-method"><span class="secno">3.4 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-abort" data-idl="operation" data-title="abort()" data-type="Promise" data-lt="paymentrequest.abort()|paymentrequest.abort|abort()|abort"><code>abort()</code></dfn> method
          <a class="self-link" aria-label="§" href="#abort-method"></a></h3>
          <div class="note" role="note" id="issue-container-generatedID-4"><div role="heading" class="note-title marker" id="h-note-4" aria-level="4"><span>Note</span></div><div class="">
            <p>
              The <a href="#dom-paymentrequest-abort" class="internalDFN" data-link-type="dfn"><code>abort()</code></a> method is called if a developer wishes to tell
              the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> to abort the payment <var>request</var> and
              to tear down any user interface that might be shown. The
              <a href="#dom-paymentrequest-abort" class="internalDFN" data-link-type="dfn"><code>abort()</code></a> can only be called after the <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> method
              has been called (see <a href="#dfn-state-0" class="internalDFN" data-link-type="dfn">states</a>) and before this instance's
              <a href="#dfn-acceptpromise" class="internalDFN" data-link-type="dfn">[[acceptPromise]]</a> has been resolved. For example,
              developers might choose to do this if the goods they are selling
              are only available for a limited amount of time. If the user does
              not accept the payment request within the allowed time period, then
              the request will be aborted.
            </p>
            <p>
              A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> might not always be able to abort a request.
              For example, if the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> has delegated responsibility
              for the request to another app. In this situation, <a href="#dom-paymentrequest-abort" class="internalDFN" data-link-type="dfn"><code>abort()</code></a>
              will reject the returned <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a>.
            </p>
            <p>
              See also the algorithm when the <a href="#dfn-user-aborts-the-payment-request" class="internalDFN" data-link-type="dfn">user aborts the payment
              request</a>.
            </p>
          </div></div>
          <p>
            The <a href="#dom-paymentrequest-abort" class="internalDFN" data-link-type="dfn"><code>abort()</code></a> method <em class="rfc2119" title="MUST">MUST</em> act as follows:
          </p>
          <ol class="algorithm">
            <li>Let <var>request</var> be the <a data-cite-path="" href="https://dom.spec.whatwg.org/#context-object">context object</a>.
            </li>
            <li>If <var>request</var>.<a href="#dfn-response" class="internalDFN" data-link-type="dfn">[[response]]</a> is not null, and <var>
              request</var>.<a href="#dfn-response" class="internalDFN" data-link-type="dfn">[[response]]</a>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> is not
              null, return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a promise rejected with</a> an
              "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>If the value of <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is not
            "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>" then return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a promise rejected with</a> an
            "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>Let <var>promise</var> be <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-new-promise">a new promise</a>.
            </li>
            <li>Return <var>promise</var> and perform the remaining steps <a data-cite-path="infrastructure.html" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in
            parallel</a>.
            </li>
            <li>Try to abort the current user interaction with the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment
            handler</a> and close down any remaining user interface.
            </li>
            <li>
              <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user interaction task source</a> to
              perform the following steps:
              <ol>
                <li>If it is not possible to abort the current user interaction,
                then reject <var>promise</var> with "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>"
                <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a> and abort these steps.
                </li>
                <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>".
                </li>
                <li>Reject the promise
                <var>request</var>.<a href="#dfn-acceptpromise" class="internalDFN" data-link-type="dfn">[[acceptPromise]]</a> with an
                "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
                </li>
                <li>Resolve <var>promise</var> with undefined.
                </li>
              </ol>
            </li>
          </ol>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="canmakepayment-method">
          <h3 id="x3-5-canmakepayment-method"><span class="secno">3.5 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-canmakepayment" data-idl="operation" data-title="canMakePayment()" data-type="Promise" data-lt="paymentrequest.canmakepayment()|paymentrequest.canmakepayment|canmakepayment()|canmakepayment"><code>canMakePayment()</code></dfn> method
          <a class="self-link" aria-label="§" href="#canmakepayment-method"></a></h3>
          <div class="note" role="note" id="issue-container-generatedID-5"><div role="heading" class="note-title marker" id="h-note-5" aria-level="4"><span>Note</span></div><p class="">
            The <a href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment()</code></a> method can be used by the developer to
            determine if the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> object can be used to make a
            payment, before they call <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a>. It returns a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a>
            that will be fulfilled with true if the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> supports
            any of the desired <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment methods</a> supplied to the
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> constructor, and false if none are supported.
            If the method is called too often, the user agent might instead
            return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a promise rejected with</a> a "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#notallowederror"><code>NotAllowedError</code></a>"
            <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>, at its discretion.
          </p></div>
          <p>
            The <a href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment()</code></a> method <em class="rfc2119" title="MUST">MUST</em> act as follows:
          </p>
          <ol class="algorithm">
            <li>Let <var>request</var> be the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> object on
            which the method was called.
            </li>
            <li>If <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is not "<a href="#dfn-created" class="internalDFN" data-link-type="dfn">created</a>",
            then return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a promise rejected with</a> an
            "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>
            Optionally, at the <a data-cite-path="browsers.html" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>'s discretion,
            return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a promise rejected with</a> a "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#notallowederror"><code>NotAllowedError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>
              DOMException</code></a>. As described in section <a href="#canmakepayment-protections"></a>, the user agent may limit the
              rate at which a page can call <a href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment()</code></a>.
            </li>
            <li>Let <var>hasHandlerPromise</var> be <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-new-promise">a new promise</a>.
            </li>
            <li>Return <var>hasHandlerPromise</var>, and perform the remaining
            steps <a data-cite-path="infrastructure.html" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
            </li>
            <li>For each <var>paymentMethod</var> tuple in
            <var>request</var>.<a href="#dfn-serializedmethoddata" class="internalDFN" data-link-type="dfn">[[serializedMethodData]]</a>:
              <ol>
                <li>Let <var>identifier</var> be the first element in the
                <var>paymentMethod</var> tuple.
                </li>
                <li>If the user agent has a <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> that supports
                handling payment requests for <var>identifier</var>, resolve
                <var>hasHandlerPromise</var> with true and terminate this
                algorithm.
                </li>
              </ol>
            </li>
            <li>Resolve <var>hasHandlerPromise</var> with false.
            </li>
          </ol>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="shippingaddress-attribute">
          <h3 id="x3-6-shippingaddress-attribute"><span class="secno">3.6 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-shippingaddress" data-idl="attribute" data-title="shippingAddress" data-type="PaymentAddress" data-lt="paymentrequest.shippingaddress|shippingaddress"><code>shippingAddress</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#shippingaddress-attribute"></a></h3>
          <p>
            A <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>'s <a href="#dom-paymentrequest-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a> attribute is
            populated when the user provides a shipping address. It is null by
            default. When a user provides a shipping address, the <a href="#dfn-shipping-address-changed-algorithm" class="internalDFN" data-link-type="dfn">shipping
            address changed algorithm</a> runs.
          </p>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="shippingtype-attribute">
          <h3 id="x3-7-shippingtype-attribute"><span class="secno">3.7 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-shippingtype" data-idl="attribute" data-title="shippingType" data-type="PaymentShippingType" data-lt="paymentrequest.shippingtype|shippingtype"><code>shippingType</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#shippingtype-attribute"></a></h3>
          <p>
            A <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>'s <a href="#dom-paymentrequest-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a> attribute is the type
            of shipping used to fulfill the transaction. Its value is either a
            <a href="#dom-paymentshippingtype" class="internalDFN" data-link-type="dfn"><code>PaymentShippingType</code></a> enum value, or null if none is provided by
            the developer during <a data-lt="PaymentRequest.PaymentRequest()" href="#dfn-paymentrequest-paymentrequest" class="internalDFN" data-link-type="dfn"><code>construction</code></a> (see
            <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a>'s <a data-lt="PaymentOptions.shippingType" href="#dom-paymentoptions-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a> member).
          </p>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="onmerchantvalidation-attribute">
          <h3 id="x3-8-onmerchantvalidation-attribute"><span class="secno">3.8 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-onmerchantvalidation" data-idl="attribute" data-title="onmerchantvalidation" data-type="EventHandler" data-lt="paymentrequest.onmerchantvalidation|onmerchantvalidation"><code>onmerchantvalidation</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#onmerchantvalidation-attribute"></a></h3>
          <p>
            A <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>'s <a href="#dom-paymentrequest-onmerchantvalidation" class="internalDFN" data-link-type="dfn"><code>onmerchantvalidation</code></a> attribute is an
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a> for a <a href="#dom-merchantvalidationevent" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEvent</code></a> named
            "<a href="#dfn-merchantvalidation" class="internalDFN" data-link-type="dfn"><code>merchantvalidation</code></a>".
          </p>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="onshippingaddresschange-attribute">
          <h3 id="x3-9-onshippingaddresschange-attribute"><span class="secno">3.9 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-onshippingaddresschange" data-idl="attribute" data-title="onshippingaddresschange" data-type="EventHandler" data-lt="paymentrequest.onshippingaddresschange|onshippingaddresschange"><code>onshippingaddresschange</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#onshippingaddresschange-attribute"></a></h3>
          <p>
            A <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>'s <a href="#dom-paymentrequest-onshippingaddresschange" class="internalDFN" data-link-type="dfn"><code>onshippingaddresschange</code></a> attribute is
            an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a> for a <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a> named
            <a href="#dfn-shippingaddresschange" class="internalDFN" data-link-type="dfn"><code>shippingaddresschange</code></a>.
          </p>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="shippingoption-attribute">
          <h3 id="x3-10-shippingoption-attribute"><span class="secno">3.10 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-shippingoption" data-idl="attribute" data-title="shippingOption" data-type="DOMString" data-lt="paymentrequest.shippingoption|shippingoption"><code>shippingOption</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#shippingoption-attribute"></a></h3>
          <p>
            A <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>'s <a href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a> attribute is
            populated when the user chooses a shipping option. It is null by
            default. When a user chooses a shipping option, the <a href="#dfn-shipping-option-changed-algorithm" class="internalDFN" data-link-type="dfn">shipping
            option changed algorithm</a> runs.
          </p>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="onshippingoptionchange-attribute">
          <h3 id="x3-11-onshippingoptionchange-attribute"><span class="secno">3.11 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-onshippingoptionchange" data-idl="attribute" data-title="onshippingoptionchange" data-type="EventHandler" data-lt="paymentrequest.onshippingoptionchange|onshippingoptionchange"><code>onshippingoptionchange</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#onshippingoptionchange-attribute"></a></h3>
          <p>
            A <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>'s <a href="#dom-paymentrequest-onshippingoptionchange" class="internalDFN" data-link-type="dfn"><code>onshippingoptionchange</code></a> attribute is
            an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a> for a <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a> named
            <a href="#dfn-shippingoptionchange" class="internalDFN" data-link-type="dfn"><code>shippingoptionchange</code></a>.
          </p>
        </section>
        <section data-dfn-for="PaymentRequest" data-link-for="PaymentRequest" id="onpaymentmethodchange-attribute">
          <h3 id="x3-12-onpaymentmethodchange-attribute"><span class="secno">3.12 </span>
            <dfn data-dfn-for="paymentrequest" data-dfn-type="dfn" id="dom-paymentrequest-onpaymentmethodchange" data-idl="attribute" data-title="onpaymentmethodchange" data-type="EventHandler" data-lt="paymentrequest.onpaymentmethodchange|onpaymentmethodchange"><code>onpaymentmethodchange</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#onpaymentmethodchange-attribute"></a></h3>
          <p>
            A <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>'s <a href="#dom-paymentrequest-onpaymentmethodchange" class="internalDFN" data-link-type="dfn"><code>onpaymentmethodchange</code></a> attribute is
            an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a> for a <a href="#dom-paymentmethodchangeevent" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEvent</code></a> named
            "<a href="#dfn-paymentmethodchange" class="internalDFN" data-link-type="dfn"><code>paymentmethodchange</code></a>".
          </p>
        </section>
        <section id="internal-slots">
          <h3 id="x3-13-internal-slots"><span class="secno">3.13 </span>
            Internal Slots
          <a class="self-link" aria-label="§" href="#internal-slots"></a></h3>
          <p>
            Instances of <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> are created with the internal
            slots in the following table:
          </p>
          <table>
            <tbody><tr>
              <th>
                Internal Slot
              </th>
              <th>
                Description (<em>non-normative</em>)
              </th>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-serializedmethoddata">[[serializedMethodData]]</dfn>
              </td>
              <td>
                The <code>methodData</code> supplied to the constructor, but
                represented as tuples containing supported methods and a string
                or null for data (instead of the original object form).
              </td>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-serializedmodifierdata">[[serializedModifierData]]</dfn>
              </td>
              <td>
                A list containing the serialized string form of each <a data-lt="PaymentDetailsModifier.data" href="#dom-paymentdetailsmodifier-data" class="internalDFN" data-link-type="dfn"><code>data</code></a> member for each
                corresponding item in the sequence
                <a href="#dfn-details" class="internalDFN" data-link-type="dfn">[[details]]</a>.<a data-lt="PaymentDetailsBase" href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn">modifier</a>,
                or null if no such member was present.
              </td>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-details">[[details]]</dfn>
              </td>
              <td>
                The current <a href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a> for the payment request
                initially supplied to the constructor and then updated with calls
                to <a data-lt="PaymentRequestUpdateEvent.updateWith" href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code>updateWith()</code></a>. Note
                that all <a data-lt="PaymentDetailsModifier.data" href="#dom-paymentdetailsmodifier-data" class="internalDFN" data-link-type="dfn"><code>data</code></a>
                members of <a href="#dom-paymentdetailsmodifier" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsModifier</code></a> instances contained in
                the <a data-lt="PaymentDetailsBase.modifiers" href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a>
                member will be removed, as they are instead stored in serialized
                form in the <a href="#dfn-serializedmodifierdata" class="internalDFN" data-link-type="dfn">[[serializedModifierData]]</a> internal slot.
              </td>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-options">[[options]]</dfn>
              </td>
              <td>
                The <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a> supplied to the constructor.
              </td>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-state">[[state]]</dfn>
              </td>
              <td>
                <p>
                  The current <dfn data-dfn-type="dfn" data-plurals="states" id="dfn-state-0">state</dfn> of the payment request, which
                  transitions from:
                </p>
                <dl>
                  <dt>
                    "<dfn data-dfn-type="dfn" id="dfn-created">created</dfn>"
                  </dt>
                  <dd>
                    The payment request is constructed and has not been presented
                    to the user.
                  </dd>
                  <dt>
                    "<dfn data-dfn-type="dfn" id="dfn-interactive">interactive</dfn>"
                  </dt>
                  <dd>
                    The payment request is being presented to the user.
                  </dd>
                  <dt>
                    "<dfn data-dfn-type="dfn" id="dfn-closed">closed</dfn>"
                  </dt>
                  <dd>
                    The payment request completed.
                  </dd>
                </dl>
                <p>
                  The <a href="#dfn-state-0" class="internalDFN" data-link-type="dfn">state</a> transitions are illustrated in the figure
                  below:
                </p>
                <figure id="fig-the-constructor-sets-the-initial-state-to-created-the-show-method-changes-the-state-to-interactive-from-there-the-abort-method-or-any-other-error-can-send-the-state-to-closed-similarly-the-user-accepts-the-payment-request-algorithm-and-user-aborts-the-payment-request-algorithm-will-change-the-state-to-closed">
                  <img alt="" src="images/state-transitions.svg" width="518" height="125">
                  <figcaption data-link-for="PaymentRequest">Figure <span class="figno">1</span> <span class="fig-title">
                    The constructor sets the initial <a href="#dfn-state-0" class="internalDFN" data-link-type="dfn">state</a> to
                    "<a href="#dfn-created" class="internalDFN" data-link-type="dfn">created</a>". The <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> method changes the
                    <a href="#dfn-state-0" class="internalDFN" data-link-type="dfn">state</a> to "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>". From there, the
                    <a href="#dom-paymentrequest-abort" class="internalDFN" data-link-type="dfn"><code>abort()</code></a> method or any other error can send the
                    <a href="#dfn-state-0" class="internalDFN" data-link-type="dfn">state</a> to "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>"; similarly, the <a href="#dfn-user-accepts-the-payment-request" class="internalDFN" data-link-type="dfn">user
                    accepts the payment request algorithm</a> and <a href="#dfn-user-aborts-the-payment-request" class="internalDFN" data-link-type="dfn">user aborts
                    the payment request algorithm</a> will change the
                    <a href="#dfn-state-0" class="internalDFN" data-link-type="dfn">state</a> to "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>".
                  </span></figcaption>
                </figure>
              </td>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-updating">[[updating]]</dfn>
              </td>
              <td>
                True if there is a pending <a data-lt="PaymentRequestUpdateEvent.updateWith" href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code>updateWith()</code></a> call to
                update the payment request and false otherwise.
              </td>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-acceptpromise">[[acceptPromise]]</dfn>
              </td>
              <td>
                The pending <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a> created during <a data-lt="PaymentRequest.show" href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show</code></a> that will be resolved if the user
                accepts the payment request.
              </td>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-response">[[response]]</dfn>
              </td>
              <td>
                Null, or the <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a> instantiated by this
                <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>.
              </td>
            </tr>
          </tbody></table>
        </section>
      </section>
      <section data-dfn-for="PaymentMethodData" data-link-for="PaymentMethodData" id="paymentmethoddata-dictionary">
        <!--OddPage--><h2 id="x4-paymentmethoddata-dictionary"><span class="secno">4. </span>
          <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentmethoddata" data-idl="dictionary" data-title="PaymentMethodData"><code>PaymentMethodData</code></dfn> dictionary
        <a class="self-link" aria-label="§" href="#paymentmethoddata-dictionary"></a></h2>
        <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentmethoddata" data-title="PaymentMethodData">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentmethoddata" class="internalDFN" data-link-type="dfn"><code>PaymentMethodData</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentmethoddata-supportedmethods" data-title="supportedMethods" data-dfn-for="paymentmethoddata">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentmethoddata" data-lt="" href="#dom-paymentmethoddata-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentmethoddata-data" data-title="data" data-dfn-for="paymentmethoddata"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentmethoddata" data-lt="" href="#dom-paymentmethoddata-data" class="internalDFN" data-link-type="dfn"><code>data</code></a></span>;</span>
  };</span></pre></div>
        <p>
          A <a href="#dom-paymentmethoddata" class="internalDFN" data-link-type="dfn"><code>PaymentMethodData</code></a> dictionary is used to indicate a set of
          supported <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment methods</a> and any associated <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment
          method</a> specific data for those methods.
        </p>
        <dl>
          <dt>
            <dfn data-dfn-for="paymentmethoddata" data-dfn-type="dfn" id="dom-paymentmethoddata-supportedmethods" data-idl="field" data-title="supportedMethods" data-type="DOMString"><code>supportedMethods</code></dfn> member
          </dt>
          <dd>
            A <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method identifier</a> for a <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a> that
            the merchant web site accepts.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentmethoddata" data-dfn-type="dfn" id="dom-paymentmethoddata-data" data-idl="field" data-title="data" data-type="object"><code>data</code></dfn> member
          </dt>
          <dd>
            An object that provides optional information that might be needed by
            the supported payment methods. If supplied, it will be
            <a href="#dfn-json-serialized" class="internalDFN" data-link-type="dfn">JSON-serialized</a>.
          </dd>
        </dl>
        <div class="note" role="note" id="issue-container-generatedID-6"><div role="heading" class="note-title marker" id="h-note-6" aria-level="3"><span>Note</span></div><p class="">
          The value of <code>supportedMethods</code> was changed from array to
          string, but the name was left as a plural to maintain compatibility
          with existing content on the Web.
        </p></div>
      </section>
      <section data-dfn-for="PaymentCurrencyAmount" data-link-for="PaymentCurrencyAmount" id="paymentcurrencyamount-dictionary">
        <!--OddPage--><h2 id="x5-paymentcurrencyamount-dictionary"><span class="secno">5. </span>
          <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentcurrencyamount" data-idl="dictionary" data-title="PaymentCurrencyAmount"><code>PaymentCurrencyAmount</code></dfn> dictionary
        <a class="self-link" aria-label="§" href="#paymentcurrencyamount-dictionary"></a></h2>
        <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentcurrencyamount" data-title="PaymentCurrencyAmount">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentcurrencyamount-currency" data-title="currency" data-dfn-for="paymentcurrencyamount">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentcurrencyamount" data-lt="" href="#dom-paymentcurrencyamount-currency" class="internalDFN" data-link-type="dfn"><code>currency</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentcurrencyamount-value" data-title="value" data-dfn-for="paymentcurrencyamount">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentcurrencyamount" data-lt="" href="#dom-paymentcurrencyamount-value" class="internalDFN" data-link-type="dfn"><code>value</code></a></span>;</span>
  };</span></pre></div>
        <p>
          A <a href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a> dictionary is used to supply monetary
          amounts.
        </p>
        <dl>
          <dt>
            <dfn data-dfn-for="paymentcurrencyamount" data-dfn-type="dfn" id="dom-paymentcurrencyamount-currency" data-idl="field" data-title="currency" data-type="DOMString"><code>currency</code></dfn> member
          </dt>
          <dd>
            <p>
              An [<cite><a class="bibref" href="#bib-iso4217">ISO4217</a></cite>] <a href="https://tc39.github.io/ecma402/#sec-iswellformedcurrencycode">well-formed</a> 3-letter
              alphabetic code (i.e., the numeric codes are not supported). Their
              canonical form is upper case. However, the set of combinations of
              currency code for which localized currency symbols are available is
              implementation dependent. Where a localized currency symbol is not
              available, a user agent <em class="rfc2119" title="SHOULD">SHOULD</em> use U+00A4 (¤) for formatting. User
              agents <em class="rfc2119" title="MAY">MAY</em> format the display of the <a href="#dom-paymentcurrencyamount-currency" class="internalDFN" data-link-type="dfn"><code>currency</code></a> member to
              adhere to OS conventions (e.g., for localization purposes).
            </p>
            <div class="note" role="note" id="issue-container-generatedID-7"><div role="heading" class="note-title marker" id="h-note-7" aria-level="3"><span>Note</span><span class="issue-label">: Digital currencies and ISO 4217 currency codes</span></div><div class="">
              <p>
                User agents implementing this specification enforce [<cite><a class="bibref" href="#bib-iso4217">ISO4217</a></cite>]'s
                3-letter codes format via ECMAScript’s <a href="https://tc39.github.io/ecma402/#sec-iswellformedcurrencycode">isWellFormedCurrencyCode</a>
                abstract operation, which is invoked as part of the <a href="#dfn-check-and-canonicalize-amount" class="internalDFN" data-link-type="dfn">check and
                canonicalize amount</a> algorithm. When a code does not adhere to
                the [<cite><a class="bibref" href="#bib-iso4217">ISO4217</a></cite>] defined format, a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror"><code>RangeError</code></a> is thrown.
              </p>
              <p>
                Current implementations will therefore allow the use of
                well-formed currency codes that are not part of the official
                [<cite><a class="bibref" href="#bib-iso4217">ISO4217</a></cite>] list (e.g., XBT, XRP, etc.). If the provided code is
                a currency that the browser knows how to display, then an
                implementation will generally display the appropriate currency
                symbol in the user interface (e.g., "USD" is shown as "$", "GBP"
                is "£", and the non-standard "XBT" could be shown as "Ƀ"). When a
                code cannot be matched, the specification recommends browsers
                show a scarab "¤".
              </p>
              <p>
                Efforts are underway at ISO to account for digital currencies,
                which may result in an update to the [<cite><a class="bibref" href="#bib-iso4217">ISO4217</a></cite>] registry or an
                entirely new registry. The community expects this will resolve
                ambiguities that have crept in through the use of non-standard
                3-letter codes; for example, does "BTC" refer to Bitcoin or to a
                future Bhutan currency? At the time of publication, it remains
                unclear what form this evolution will take, or even the time
                frame in which the work will be completed. The <abbr title="World Wide Web Consortium">W3C</abbr> Web Payments
                Working Group is liaising with ISO so that, in the future,
                revisions to this specification remain compatible with relevant
                ISO registries.
              </p>
            </div></div>
          </dd>
          <dt>
            <dfn data-dfn-for="paymentcurrencyamount" data-dfn-type="dfn" id="dom-paymentcurrencyamount-value" data-idl="field" data-title="value" data-type="DOMString"><code>value</code></dfn> member
          </dt>
          <dd>
            A <a href="#dfn-valid-decimal-monetary-value" class="internalDFN" data-link-type="dfn">valid decimal monetary value</a> containing a monetary amount.
          </dd>
        </dl>
        <div class="example" id="example-11-how-to-represent-us-55-00">
            <div class="marker">
        <a class="self-link" href="#example-11-how-to-represent-us-55-00">Example 11</a><span class="example-title">: How to represent US$55.00</span>
      </div>
            <pre aria-busy="false"><code class="hljs js">{
    <span class="hljs-string">"currency"</span>: <span class="hljs-string">"USD"</span>,
    <span class="hljs-string">"value"</span>: <span class="hljs-string">"55.00"</span>
  }</code></pre>
          </div>
        <section id="validity-checkers">
          <h3 id="x5-1-validity-checkers"><span class="secno">5.1 </span>
            Validity checkers
          <a class="self-link" aria-label="§" href="#validity-checkers"></a></h3>
          <p>
            A <dfn data-dfn-type="dfn" id="dfn-javascript-string">JavaScript string</dfn> is a <dfn data-dfn-type="dfn" id="dfn-valid-decimal-monetary-value">valid decimal monetary
            value</dfn> if it consists of the following <a data-lt="code point" data-cite-path="" href="https://infra.spec.whatwg.org/#code-point">code points</a> in the given order:
          </p>
          <ol>
            <li>Optionally, a single U+002D (-), to indicate that the amount is
            negative.
            </li>
            <li>One or more <a data-lt="code point" data-cite-path="" href="https://infra.spec.whatwg.org/#code-point">code points</a> in the range
            U+0030 (0) to U+0039 (9).
            </li>
            <li>Optionally, a single U+002E (.) followed by one or more
            <a data-lt="code point" data-cite-path="" href="https://infra.spec.whatwg.org/#code-point">code points</a> in the range U+0030 (0) to
            U+0039 (9).
            </li>
          </ol>
          <div class="note" role="note" id="issue-container-generatedID-8"><div role="heading" class="note-title marker" id="h-note-8" aria-level="4"><span>Note</span></div><div class="">
            The following regular expression is an implementation of the above
            definition.
            <pre class="hljs" aria-busy="false"><code class="hljs">^-?[0-9]+(\.[0-9]+)?$</code></pre>
          </div></div>
          <p>
            To <dfn data-dfn-type="dfn" id="dfn-check-and-canonicalize-amount">check and canonicalize amount</dfn> given a
            <a href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a> <var>amount</var>, run the following
            steps:
          </p>
          <ol data-link-for="PaymentCurrencyAmount">
            <li>If the result of <a href="https://tc39.github.io/ecma402/#sec-iswellformedcurrencycode">IsWellFormedCurrencyCode</a>(<var>amount</var>.<a href="#dom-paymentcurrencyamount-currency" class="internalDFN" data-link-type="dfn"><code>currency</code></a>)
            is false, then throw a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror"><code>RangeError</code></a> exception, optionally
            informing the developer that the currency is invalid.
            </li>
            <li>If <var>amount</var>.<a href="#dom-paymentcurrencyamount-value" class="internalDFN" data-link-type="dfn"><code>value</code></a> is not a <a href="#dfn-valid-decimal-monetary-value" class="internalDFN" data-link-type="dfn">valid decimal
            monetary value</a>, throw a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"><code>TypeError</code></a>, optionally informing
            the developer that the currency is invalid.
            </li>
            <li>Set <var>amount</var>.<a href="#dom-paymentcurrencyamount-currency" class="internalDFN" data-link-type="dfn"><code>currency</code></a> to the result of <a data-cite-path="" href="https://infra.spec.whatwg.org/#ascii-uppercase">ASCII
            uppercase</a> <var>amount</var>.<a href="#dom-paymentcurrencyamount-currency" class="internalDFN" data-link-type="dfn"><code>currency</code></a>.
            </li>
          </ol>
          <p>
            To <dfn data-dfn-type="dfn" id="dfn-check-and-canonicalize-total-amount">check and canonicalize total amount</dfn> given a
            <a href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a> <var>amount</var>, run the following
            steps:
          </p>
          <ol data-link-for="PaymentCurrencyAmount">
            <li>
              <a href="#dfn-check-and-canonicalize-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize amount</a> <var>amount</var>. Rethrow any
              exceptions.
            </li>
            <li>If the first <a data-cite-path="" href="https://infra.spec.whatwg.org/#code-point">code point</a> of <var>amount</var>.<a href="#dom-paymentcurrencyamount-value" class="internalDFN" data-link-type="dfn"><code>value</code></a>
            is U+002D (-), then throw a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"><code>TypeError</code></a> optionally informing the
            developer that a total's value can't be a negative number.
            </li>
          </ol>
          <div class="note" role="note" id="issue-container-generatedID-9"><div role="heading" class="note-title marker" id="h-note-9" aria-level="4"><span>Note</span><span class="issue-label">: No alteration of values</span></div><aside class="">
            <p>
              The algorithm does not alter or canonicalize the
              <var>amount</var>.<a href="#dom-paymentcurrencyamount-value" class="internalDFN" data-link-type="dfn"><code>value</code></a>. For example, a user agent will not
              change "55" into "55.00". Payment handlers need to be prepared to
              deal with such values.
            </p>
          </aside></div>
        </section>
      </section>
      <section id="payment-details-dictionaries">
        <!--OddPage--><h2 id="x6-payment-details-dictionaries"><span class="secno">6. </span>
          Payment details dictionaries
        <a class="self-link" aria-label="§" href="#payment-details-dictionaries"></a></h2>
        <section data-dfn-for="PaymentDetailsBase" data-link-for="PaymentDetailsBase" id="paymentdetailsbase-dictionary">
          <h3 id="x6-1-paymentdetailsbase-dictionary"><span class="secno">6.1 </span>
            <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentdetailsbase" data-idl="dictionary" data-title="PaymentDetailsBase"><code>PaymentDetailsBase</code></dfn> dictionary
          <a class="self-link" aria-label="§" href="#paymentdetailsbase-dictionary"></a></h3>
          <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentdetailsbase" data-title="PaymentDetailsBase">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentdetailsbase-displayitems" data-title="displayItems" data-dfn-for="paymentdetailsbase"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a data-link-for="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a>&gt;</span> <span class="idlName"><a data-link-for="paymentdetailsbase" data-lt="" href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentdetailsbase-shippingoptions" data-title="shippingOptions" data-dfn-for="paymentdetailsbase"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a data-link-for="" href="#dom-paymentshippingoption" class="internalDFN" data-link-type="dfn"><code>PaymentShippingOption</code></a>&gt;</span> <span class="idlName"><a data-link-for="paymentdetailsbase" data-lt="" href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentdetailsbase-modifiers" data-title="modifiers" data-dfn-for="paymentdetailsbase"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a data-link-for="" href="#dom-paymentdetailsmodifier" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsModifier</code></a>&gt;</span> <span class="idlName"><a data-link-for="paymentdetailsbase" data-lt="" href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a></span>;</span>
  };</span></pre></div>
          <dl>
            <dt>
              <dfn data-dfn-for="paymentdetailsbase" data-dfn-type="dfn" id="dom-paymentdetailsbase-displayitems" data-idl="field" data-title="displayItems" data-type="sequence"><code>displayItems</code></dfn> member
            </dt>
            <dd>
              A sequence of <a href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a> dictionaries contains line items
              for the payment request that the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MAY">MAY</em> display.
              <div class="note" role="note" id="issue-container-generatedID-10"><div role="heading" class="note-title marker" id="h-note-10" aria-level="4"><span>Note</span></div><aside class="">
                It is the developer's responsibility, when generating or updating
                a <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>, to verify that the <a data-lt="PaymentDetailsInit.total" href="#dom-paymentdetailsinit-total" class="internalDFN" data-link-type="dfn"><code>total</code></a> amount is the sum of these
                items.
              </aside></div>
            </dd>
            <dt>
              <dfn data-dfn-for="paymentdetailsbase" data-dfn-type="dfn" id="dom-paymentdetailsbase-shippingoptions" data-idl="field" data-title="shippingOptions" data-type="sequence"><code>shippingOptions</code></dfn> member
            </dt>
            <dd>
              <p>
                A sequence containing the different shipping options for the user
                to choose from.
              </p>
              <p>
                If an item in the sequence has the <a data-lt="PaymentShippingOption.selected" href="#dom-paymentshippingoption-selected" class="internalDFN" data-link-type="dfn"><code>selected</code></a> member set to true,
                then this is the shipping option that will be used by default and
                <a data-lt="PaymentRequest.shippingOption" href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a>
                will be set to the <a data-lt="PaymentShippingOption.id" href="#dom-paymentshippingoption-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
                of this option without running the <a href="#dfn-shipping-option-changed-algorithm" class="internalDFN" data-link-type="dfn">shipping option changed
                algorithm</a>. If more than one item in the sequence has
                <a data-lt="PaymentShippingOption.selected" href="#dom-paymentshippingoption-selected" class="internalDFN" data-link-type="dfn"><code>selected</code></a> set to
                true, then the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> selects the last one in the
                sequence.
              </p>
              <p>
                The <a href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a> member is only used if the
                <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> was constructed with <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a>
                and <a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> set to true.
              </p>
              <div class="note" role="note" id="issue-container-generatedID-11"><div role="heading" class="note-title marker" id="h-note-11" aria-level="4"><span>Note</span></div><aside class="">
                If the sequence has an item with the <a data-lt="PaymentShippingOption.selected" href="#dom-paymentshippingoption-selected" class="internalDFN" data-link-type="dfn"><code>selected</code></a> member set to true,
                then authors are responsible for ensuring that the <a data-lt="PaymentDetailsInit.total" href="#dom-paymentdetailsinit-total" class="internalDFN" data-link-type="dfn"><code>total</code></a> member includes the cost of
                the shipping option. This is because no
                <a href="#dfn-shippingoptionchange" class="internalDFN" data-link-type="dfn"><code>shippingoptionchange</code></a> event will be fired for this option
                unless the user selects an alternative option first.
              </aside></div>
            </dd>
            <dt>
              <dfn data-dfn-for="paymentdetailsbase" data-dfn-type="dfn" data-plurals="modifier" id="dom-paymentdetailsbase-modifiers" data-idl="field" data-title="modifiers" data-type="sequence"><code>modifiers</code></dfn> member
            </dt>
            <dd>
              A sequence of <a href="#dom-paymentdetailsmodifier" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsModifier</code></a> dictionaries that
              contains modifiers for particular payment method identifiers. For
              example, it allows you to adjust the total amount based on payment
              method.
            </dd>
          </dl>
        </section>
        <section data-dfn-for="PaymentDetailsInit" data-link-for="PaymentDetailsInit" id="paymentdetailsinit-dictionary">
          <h3 id="x6-2-paymentdetailsinit-dictionary"><span class="secno">6.2 </span>
            <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentdetailsinit" data-idl="dictionary" data-title="PaymentDetailsInit"><code>PaymentDetailsInit</code></dfn> dictionary
          <a class="self-link" aria-label="§" href="#paymentdetailsinit-dictionary"></a></h3>
          <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentdetailsinit" data-title="PaymentDetailsInit">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentdetailsinit" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsInit</code></a></span> : <span class="idlSuperclass"><a data-link-for="" href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentdetailsinit-id" data-title="id" data-dfn-for="paymentdetailsinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentdetailsinit" data-lt="" href="#dom-paymentdetailsinit-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentdetailsinit-total" data-title="total" data-dfn-for="paymentdetailsinit">
    required<span class="idlType"> <a data-link-for="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a></span> <span class="idlName"><a data-link-for="paymentdetailsinit" data-lt="" href="#dom-paymentdetailsinit-total" class="internalDFN" data-link-type="dfn"><code>total</code></a></span>;</span>
  };</span></pre></div>
          <div class="note" role="note" id="issue-container-generatedID-12"><div role="heading" class="note-title marker" id="h-note-12" aria-level="4"><span>Note</span></div><aside class="">
            The <a href="#dom-paymentdetailsinit" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsInit</code></a> dictionary is used in the construction
            of the payment request.
          </aside></div>
          <p>
            In addition to the members inherited from the
            <a href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a> dictionary, the following members are part
            of the <a href="#dom-paymentdetailsinit" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsInit</code></a> dictionary:
          </p>
          <dl>
            <dt>
              <dfn data-dfn-for="paymentdetailsinit" data-dfn-type="dfn" id="dom-paymentdetailsinit-id" data-idl="field" data-title="id" data-type="DOMString"><code>id</code></dfn> member
            </dt>
            <dd>
              A free-form identifier for this payment request.
              <div class="note" role="note" id="issue-container-generatedID-13"><div role="heading" class="note-title marker" id="h-note-13" aria-level="4"><span>Note</span></div><aside class="">
                If an <a href="#dom-paymentdetailsinit-id" class="internalDFN" data-link-type="dfn"><code>id</code></a> member is not present, then the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>
                will generate a unique identifier for the payment request during
                <a data-lt="PaymentRequest.PaymentRequest()" href="#dfn-paymentrequest-paymentrequest" class="internalDFN" data-link-type="dfn"><code>construction</code></a>.
              </aside></div>
            </dd>
            <dt>
              <dfn data-dfn-for="paymentdetailsinit" data-dfn-type="dfn" id="dom-paymentdetailsinit-total" data-idl="field" data-title="total" data-type="PaymentItem"><code>total</code></dfn> member
            </dt>
            <dd>
              A <a href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a> containing a non-negative total amount for the
              payment request.
              <div class="note" role="note" id="issue-container-generatedID-14"><div role="heading" class="note-title marker" id="h-note-14" aria-level="4"><span>Note</span></div><aside class="">
                Algorithms in this specification that accept a
                <a href="#dom-paymentdetailsinit" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsInit</code></a> dictionary will throw if the
                <a href="#dom-paymentdetailsinit-total" class="internalDFN" data-link-type="dfn"><code>total</code></a>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>.<a data-lt="PaymentCurrencyAmount.value" href="#dom-paymentcurrencyamount-value" class="internalDFN" data-link-type="dfn"><code>value</code></a> is a negative number.
              </aside></div>
            </dd>
          </dl>
        </section>
        <section data-dfn-for="PaymentDetailsUpdate" data-link-for="PaymentDetailsUpdate" id="paymentdetailsupdate-dictionary">
          <h3 id="x6-3-paymentdetailsupdate-dictionary"><span class="secno">6.3 </span>
            <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentdetailsupdate" data-idl="dictionary" data-title="PaymentDetailsUpdate"><code>PaymentDetailsUpdate</code></dfn> dictionary
          <a class="self-link" aria-label="§" href="#paymentdetailsupdate-dictionary"></a></h3>
          <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentdetailsupdate" data-title="PaymentDetailsUpdate">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a></span> : <span class="idlSuperclass"><a data-link-for="" href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentdetailsupdate-error" data-title="error" data-dfn-for="paymentdetailsupdate"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentdetailsupdate" data-lt="" href="#dom-paymentdetailsupdate-error" class="internalDFN" data-link-type="dfn"><code>error</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentdetailsupdate-total" data-title="total" data-dfn-for="paymentdetailsupdate"><span class="idlType">
    <a data-link-for="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a></span> <span class="idlName"><a data-link-for="paymentdetailsupdate" data-lt="" href="#dom-paymentdetailsupdate-total" class="internalDFN" data-link-type="dfn"><code>total</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentdetailsupdate-shippingaddresserrors" data-title="shippingAddressErrors" data-dfn-for="paymentdetailsupdate"><span class="idlType">
    <a data-link-for="" href="#dom-addresserrors" class="internalDFN" data-link-type="dfn"><code>AddressErrors</code></a></span> <span class="idlName"><a data-link-for="paymentdetailsupdate" data-lt="" href="#dom-paymentdetailsupdate-shippingaddresserrors" class="internalDFN" data-link-type="dfn"><code>shippingAddressErrors</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentdetailsupdate-payererrors" data-title="payerErrors" data-dfn-for="paymentdetailsupdate"><span class="idlType">
    <a data-link-for="" href="#dom-payererrors" class="internalDFN" data-link-type="dfn"><code>PayerErrors</code></a></span> <span class="idlName"><a data-link-for="paymentdetailsupdate" data-lt="" href="#dom-paymentdetailsupdate-payererrors" class="internalDFN" data-link-type="dfn"><code>payerErrors</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentdetailsupdate-paymentmethoderrors" data-title="paymentMethodErrors" data-dfn-for="paymentdetailsupdate"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentdetailsupdate" data-lt="" href="#dom-paymentdetailsupdate-paymentmethoderrors" class="internalDFN" data-link-type="dfn"><code>paymentMethodErrors</code></a></span>;</span>
  };</span></pre></div>
          <p>
            The <a href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a> dictionary is used to update the
            payment request using <a data-lt="PaymentRequestUpdateEvent.updateWith" href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code>updateWith()</code></a>.
          </p>
          <p>
            In addition to the members inherited from the
            <a href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a> dictionary, the following members are part
            of the <a href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a> dictionary:
          </p>
          <dl>
            <dt>
              <dfn data-dfn-for="paymentdetailsupdate" data-dfn-type="dfn" id="dom-paymentdetailsupdate-error" data-idl="field" data-title="error" data-type="DOMString"><code>error</code></dfn> member
            </dt>
            <dd>
              A human-readable string that explains why goods cannot be shipped
              to the chosen shipping address, or any other reason why no shipping
              options are available. When the payment request is updated using
              <a data-lt="PaymentRequestUpdateEvent.updateWith" href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code>updateWith()</code></a>,
              the <a href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a> can contain a message in the
              <a href="#dom-paymentdetailsupdate-error" class="internalDFN" data-link-type="dfn"><code>error</code></a> member that will be displayed to the user if the
              <a href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a> indicates that there are no valid
              <a data-lt="PaymentDetailsBase.shippingOptions" href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a>
              (and the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> was constructed with the <a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> option set to
              true).
            </dd>
            <dt>
              <dfn data-dfn-for="paymentdetailsupdate" data-dfn-type="dfn" id="dom-paymentdetailsupdate-total" data-idl="field" data-title="total" data-type="PaymentItem"><code>total</code></dfn> member
            </dt>
            <dd>
              A <a href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a> containing a non-negative <a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>.
              <div class="note" role="note" id="issue-container-generatedID-15"><div role="heading" class="note-title marker" id="h-note-15" aria-level="4"><span>Note</span></div><p class="">
                Algorithms in this specification that accept a
                <a href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a> dictionary will throw if the
                <a href="#dom-paymentdetailsupdate-total" class="internalDFN" data-link-type="dfn"><code>total</code></a>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>.<a data-lt="PaymentCurrencyAmount.value" href="#dom-paymentcurrencyamount-value" class="internalDFN" data-link-type="dfn"><code>value</code></a> is a negative number.
              </p></div>
            </dd>
            <dt>
              <dfn data-dfn-for="paymentdetailsupdate" data-dfn-type="dfn" id="dom-paymentdetailsupdate-shippingaddresserrors" data-idl="field" data-title="shippingAddressErrors" data-type="AddressErrors"><code>shippingAddressErrors</code></dfn> member
            </dt>
            <dd>
              Represents validation errors with the shipping address that is
              associated with the <a href="https://dom.spec.whatwg.org/#event-target">event
              target</a>.
            </dd>
            <dt>
              <dfn data-dfn-for="paymentdetailsupdate" data-dfn-type="dfn" id="dom-paymentdetailsupdate-payererrors" data-idl="field" data-title="payerErrors" data-type="PayerErrors"><code>payerErrors</code></dfn> member
            </dt>
            <dd>
              Validation errors related to the <a href="#dfn-payer-details" class="internalDFN" data-link-type="dfn">payer details</a>.
            </dd>
            <dt>
              <dfn data-dfn-for="paymentdetailsupdate" data-dfn-type="dfn" id="dom-paymentdetailsupdate-paymentmethoderrors" data-idl="field" data-title="paymentMethodErrors" data-type="object"><code>paymentMethodErrors</code></dfn> member
            </dt>
            <dd>
              <p>
                <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">Payment method</a> specific errors. See, for example,
                [<cite><a class="bibref" href="#bib-payment-method-basic-card">payment-method-basic-card</a></cite>]'s <a href="https://www.w3.org/TR/payment-method-basic-card/#basiccarderrors-dictionary"><code>BasicCardErrors</code></a>.
              </p>
            </dd>
          </dl>
        </section>
      </section>
      <section data-dfn-for="PaymentDetailsModifier" data-link-for="PaymentDetailsModifier" id="paymentdetailsmodifier-dictionary">
        <!--OddPage--><h2 id="x7-paymentdetailsmodifier-dictionary"><span class="secno">7. </span>
          <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentdetailsmodifier" data-idl="dictionary" data-title="PaymentDetailsModifier"><code>PaymentDetailsModifier</code></dfn> dictionary
        <a class="self-link" aria-label="§" href="#paymentdetailsmodifier-dictionary"></a></h2>
        <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentdetailsmodifier" data-title="PaymentDetailsModifier">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentdetailsmodifier" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsModifier</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentdetailsmodifier-supportedmethods" data-title="supportedMethods" data-dfn-for="paymentdetailsmodifier">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentdetailsmodifier" data-lt="" href="#dom-paymentdetailsmodifier-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentdetailsmodifier-total" data-title="total" data-dfn-for="paymentdetailsmodifier"><span class="idlType">
    <a data-link-for="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a></span> <span class="idlName"><a data-link-for="paymentdetailsmodifier" data-lt="" href="#dom-paymentdetailsmodifier-total" class="internalDFN" data-link-type="dfn"><code>total</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentdetailsmodifier-additionaldisplayitems" data-title="additionalDisplayItems" data-dfn-for="paymentdetailsmodifier"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a data-link-for="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a>&gt;</span> <span class="idlName"><a data-link-for="paymentdetailsmodifier" data-lt="" href="#dom-paymentdetailsmodifier-additionaldisplayitems" class="internalDFN" data-link-type="dfn"><code>additionalDisplayItems</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentdetailsmodifier-data" data-title="data" data-dfn-for="paymentdetailsmodifier"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentdetailsmodifier" data-lt="" href="#dom-paymentdetailsmodifier-data" class="internalDFN" data-link-type="dfn"><code>data</code></a></span>;</span>
  };</span></pre></div>
        <p>
          The <a href="#dom-paymentdetailsmodifier" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsModifier</code></a> dictionary provides details that
          modify the <a href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a> based on a <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method
          identifier</a>. It contains the following members:
        </p>
        <dl>
          <dt>
            <dfn data-dfn-for="paymentdetailsmodifier" data-dfn-type="dfn" id="dom-paymentdetailsmodifier-supportedmethods" data-idl="field" data-title="supportedMethods" data-type="DOMString"><code>supportedMethods</code></dfn> member
          </dt>
          <dd>
            A <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method identifier</a>. The members of the
            <a href="#dom-paymentdetailsmodifier" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsModifier</code></a> only apply if the user selects this
            <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a>.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentdetailsmodifier" data-dfn-type="dfn" id="dom-paymentdetailsmodifier-total" data-idl="field" data-title="total" data-type="PaymentItem"><code>total</code></dfn> member
          </dt>
          <dd>
            A <a href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a> value that overrides the <a data-lt="PaymentDetailsInit.total" href="#dom-paymentdetailsinit-total" class="internalDFN" data-link-type="dfn"><code>total</code></a> member in the
            <a href="#dom-paymentdetailsinit" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsInit</code></a> dictionary for the <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method
            identifiers</a> of the <a href="#dom-paymentdetailsmodifier-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a> member.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentdetailsmodifier" data-dfn-type="dfn" id="dom-paymentdetailsmodifier-additionaldisplayitems" data-idl="field" data-title="additionalDisplayItems" data-type="sequence"><code>additionalDisplayItems</code></dfn> member
          </dt>
          <dd>
            A sequence of <a href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a> dictionaries provides additional
            display items that are appended to the <a data-lt="PaymentDetailsBase.displayItems" href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a> member in the
            <a href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a> dictionary for the <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method
            identifiers</a> in the <a href="#dom-paymentdetailsmodifier-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a> member. This member is
            commonly used to add a discount or surcharge line item indicating the
            reason for the different <a href="#dom-paymentdetailsmodifier-total" class="internalDFN" data-link-type="dfn"><code>total</code></a> amount for the selected
            <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a> that the user agent <em class="rfc2119" title="MAY">MAY</em> display.
            <div class="note" role="note" id="issue-container-generatedID-16"><div role="heading" class="note-title marker" id="h-note-16" aria-level="3"><span>Note</span></div><p class="">
              It is the developer's responsibility to verify that the
              <a href="#dom-paymentdetailsmodifier-total" class="internalDFN" data-link-type="dfn"><code>total</code></a> amount is the sum of the <a data-lt="PaymentDetailsBase.displayItems" href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a> and the
              <a href="#dom-paymentdetailsmodifier-additionaldisplayitems" class="internalDFN" data-link-type="dfn"><code>additionalDisplayItems</code></a>.
            </p></div>
          </dd>
          <dt>
            <dfn data-dfn-for="paymentdetailsmodifier" data-dfn-type="dfn" id="dom-paymentdetailsmodifier-data" data-idl="field" data-title="data" data-type="object"><code>data</code></dfn> member
          </dt>
          <dd>
            An object that provides optional information that might be needed by
            the supported payment methods. If supplied, it will be
            <a href="#dfn-json-serialized" class="internalDFN" data-link-type="dfn">JSON-serialized</a>.
          </dd>
        </dl>
      </section>
      <section data-dfn-for="PaymentShippingType" id="paymentshippingtype-enum">
        <!--OddPage--><h2 id="x8-paymentshippingtype-enum"><span class="secno">8. </span>
          <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentshippingtype" data-idl="enum" data-title="PaymentShippingType"><code>PaymentShippingType</code></dfn> enum
        <a class="self-link" aria-label="§" href="#paymentshippingtype-enum"></a></h2>
        <div><pre class="def idl"><span data-idl="" class="idlEnum" id="idl-def-paymentshippingtype" data-title="PaymentShippingType">enum <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentshippingtype" class="internalDFN" data-link-type="dfn"><code>PaymentShippingType</code></a></span> {
    <span class="idlEnumItem">"<a data-link-for="paymentshippingtype" data-lt="" href="#dom-paymentshippingtype-shipping" class="internalDFN" data-link-type="dfn"><code>shipping</code></a>"</span>,
    <span class="idlEnumItem">"<a data-link-for="paymentshippingtype" data-lt="" href="#dom-paymentshippingtype-delivery" class="internalDFN" data-link-type="dfn"><code>delivery</code></a>"</span>,
    <span class="idlEnumItem">"<a data-link-for="paymentshippingtype" data-lt="" href="#dom-paymentshippingtype-pickup" class="internalDFN" data-link-type="dfn"><code>pickup</code></a>"</span>
  };</span></pre></div>
        <dl>
          <dt>
            "<dfn data-dfn-for="paymentshippingtype" data-dfn-type="dfn" id="dom-paymentshippingtype-shipping" data-idl="enum-value" data-title="shipping"><code>shipping</code></dfn>"
          </dt>
          <dd>
            This is the default and refers to the address being collected as the
            destination for shipping.
          </dd>
          <dt>
            "<dfn data-dfn-for="paymentshippingtype" data-dfn-type="dfn" id="dom-paymentshippingtype-delivery" data-idl="enum-value" data-title="delivery"><code>delivery</code></dfn>"
          </dt>
          <dd>
            This refers to the address being collected as the destination for
            delivery. This is commonly faster than shipping. For example, it
            might be used for food delivery.
          </dd>
          <dt>
            "<dfn data-dfn-for="paymentshippingtype" data-dfn-type="dfn" id="dom-paymentshippingtype-pickup" data-idl="enum-value" data-title="pickup"><code>pickup</code></dfn>"
          </dt>
          <dd>
            This refers to the address being collected as part of a service
            pickup. For example, this could be the address for laundry pickup.
          </dd>
        </dl>
      </section>
      <section data-dfn-for="PaymentOptions" data-link-for="PaymentOptions" id="paymentoptions-dictionary">
        <!--OddPage--><h2 id="x9-paymentoptions-dictionary"><span class="secno">9. </span>
          <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentoptions" data-idl="dictionary" data-title="PaymentOptions"><code>PaymentOptions</code></dfn> dictionary
        <a class="self-link" aria-label="§" href="#paymentoptions-dictionary"></a></h2>
        <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentoptions" data-title="PaymentOptions">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentoptions-requestpayername" data-title="requestPayerName" data-dfn-for="paymentoptions"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-requestpayername" class="internalDFN" data-link-type="dfn"><code>requestPayerName</code></a></span> = false;</span><span data-idl="" class="idlMember" id="idl-def-paymentoptions-requestbillingaddress" data-title="requestBillingAddress" data-dfn-for="paymentoptions"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-requestbillingaddress" class="internalDFN" data-link-type="dfn"><code>requestBillingAddress</code></a></span> = false;</span><span data-idl="" class="idlMember" id="idl-def-paymentoptions-requestpayeremail" data-title="requestPayerEmail" data-dfn-for="paymentoptions"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-requestpayeremail" class="internalDFN" data-link-type="dfn"><code>requestPayerEmail</code></a></span> = false;</span><span data-idl="" class="idlMember" id="idl-def-paymentoptions-requestpayerphone" data-title="requestPayerPhone" data-dfn-for="paymentoptions"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-requestpayerphone" class="internalDFN" data-link-type="dfn"><code>requestPayerPhone</code></a></span> = false;</span><span data-idl="" class="idlMember" id="idl-def-paymentoptions-requestshipping" data-title="requestShipping" data-dfn-for="paymentoptions"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a></span> = false;</span><span data-idl="" class="idlMember" id="idl-def-paymentoptions-shippingtype" data-title="shippingType" data-dfn-for="paymentoptions"><span class="idlType">
    <a data-link-for="" href="#dom-paymentshippingtype" class="internalDFN" data-link-type="dfn"><code>PaymentShippingType</code></a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a></span> = "shipping";</span>
  };</span></pre></div>
        <div class="note" role="note" id="issue-container-generatedID-17"><div role="heading" class="note-title marker" id="h-note-17" aria-level="3"><span>Note</span></div><p class="">
          The <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a> dictionary is passed to the
          <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> constructor and provides information about the
          options desired for the payment request.
        </p></div>
        <dl>
          <dt>
            <dfn data-dfn-for="paymentoptions" data-dfn-type="dfn" id="dom-paymentoptions-requestbillingaddress" data-idl="field" data-title="requestBillingAddress" data-type="boolean"><code>requestBillingAddress</code></dfn> member
          </dt>
          <dd data-link-for="PaymentMethodChangeEvent">
            A boolean that instructs the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> to get the billing
            address associated with a <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a> (e.g., the billing
            address associated with a credit card). Typically, the user agent
            will return the billing address as part of the
            <a href="#dom-paymentmethodchangeevent" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEvent</code></a>'s <a href="#dom-paymentmethodchangeevent-methoddetails" class="internalDFN" data-link-type="dfn"><code>methodDetails</code></a>, albeit
            possibly with parts of the address redacted for privacy reasons. A
            merchant can use this information to, for example, calculate tax in
            certain jurisdictions.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentoptions" data-dfn-type="dfn" id="dom-paymentoptions-requestpayername" data-idl="field" data-title="requestPayerName" data-type="boolean"><code>requestPayerName</code></dfn> member
          </dt>
          <dd>
            A boolean that indicates whether the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="SHOULD">SHOULD</em> collect
            and return the payer's name as part of the payment request. For
            example, this would be set to true to allow a merchant to make a
            booking in the payer's name.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentoptions" data-dfn-type="dfn" id="dom-paymentoptions-requestpayeremail" data-idl="field" data-title="requestPayerEmail" data-type="boolean"><code>requestPayerEmail</code></dfn> member
          </dt>
          <dd>
            A boolean that indicates whether the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="SHOULD">SHOULD</em> collect
            and return the payer's email address as part of the payment request.
            For example, this would be set to true to allow a merchant to email a
            receipt.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentoptions" data-dfn-type="dfn" id="dom-paymentoptions-requestpayerphone" data-idl="field" data-title="requestPayerPhone" data-type="boolean"><code>requestPayerPhone</code></dfn> member
          </dt>
          <dd>
            A boolean that indicates whether the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="SHOULD">SHOULD</em> collect
            and return the payer's phone number as part of the payment request.
            For example, this would be set to true to allow a merchant to phone a
            customer with a billing enquiry.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentoptions" data-dfn-type="dfn" id="dom-paymentoptions-requestshipping" data-idl="field" data-title="requestShipping" data-type="boolean"><code>requestShipping</code></dfn> member
          </dt>
          <dd>
            A boolean that indicates whether the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="SHOULD">SHOULD</em> collect
            and return a shipping address as part of the payment request. For
            example, this would be set to true when physical goods need to be
            shipped by the merchant to the user. This would be set to false for
            the purchase of digital goods.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentoptions" data-dfn-type="dfn" id="dom-paymentoptions-shippingtype" data-idl="field" data-title="shippingType" data-type="PaymentShippingType"><code>shippingType</code></dfn> member
          </dt>
          <dd>
            A <a href="#dom-paymentshippingtype" class="internalDFN" data-link-type="dfn"><code>PaymentShippingType</code></a> enum value. Some transactions require an
            address for delivery but the term "shipping" isn't appropriate. For
            example, "pizza delivery" not "pizza shipping" and "laundry pickup"
            not "laundry shipping". If <a href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> is set to true,
            then the <a href="#dom-paymentoptions-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a> member can influence the way the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user
            agent</a> presents the user interface for gathering the shipping
            address.
            <p>
              The <a href="#dom-paymentoptions-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a> member only affects the user interface for
              the payment request.
            </p>
          </dd>
        </dl>
      </section>
      <section data-dfn-for="PaymentItem" data-link-for="PaymentItem" id="paymentitem-dictionary">
        <!--OddPage--><h2 id="x10-paymentitem-dictionary"><span class="secno">10. </span>
          <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentitem" data-idl="dictionary" data-title="PaymentItem"><code>PaymentItem</code></dfn> dictionary
        <a class="self-link" aria-label="§" href="#paymentitem-dictionary"></a></h2>
        <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentitem" data-title="PaymentItem">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentitem-label" data-title="label" data-dfn-for="paymentitem">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentitem" data-lt="" href="#dom-paymentitem-label" class="internalDFN" data-link-type="dfn"><code>label</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentitem-amount" data-title="amount" data-dfn-for="paymentitem">
    required<span class="idlType"> <a data-link-for="" href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a></span> <span class="idlName"><a data-link-for="paymentitem" data-lt="" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentitem-pending" data-title="pending" data-dfn-for="paymentitem"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentitem" data-lt="" href="#dom-paymentitem-pending" class="internalDFN" data-link-type="dfn"><code>pending</code></a></span> = false;</span>
  };</span></pre></div>
        <p>
          A sequence of one or more <a href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a> dictionaries is included
          in the <a href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a> dictionary to indicate what the
          payment request is for and the value asked for.
        </p>
        <dl>
          <dt>
            <dfn data-dfn-for="paymentitem" data-dfn-type="dfn" id="dom-paymentitem-label" data-idl="field" data-title="label" data-type="DOMString"><code>label</code></dfn> member
          </dt>
          <dd>
            A human-readable description of the item. The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> may
            display this to the user.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentitem" data-dfn-type="dfn" id="dom-paymentitem-amount" data-idl="field" data-title="amount" data-type="PaymentCurrencyAmount"><code>amount</code></dfn> member
          </dt>
          <dd>
            A <a href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a> containing the monetary amount for the
            item.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentitem" data-dfn-type="dfn" id="dom-paymentitem-pending" data-idl="field" data-title="pending" data-type="boolean"><code>pending</code></dfn> member
          </dt>
          <dd>
            A boolean. When set to true it means that the <a href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a> member is
            not final. This is commonly used to show items such as shipping or
            tax amounts that depend upon selection of shipping address or
            shipping option. <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">User agents</a> <em class="rfc2119" title="MAY">MAY</em> indicate pending fields in
            the user interface for the payment request.
          </dd>
        </dl>
      </section>
      <section id="physical-addresses">
        <!--OddPage--><h2 id="x11-physical-addresses"><span class="secno">11. </span>
          Physical addresses
        <a class="self-link" aria-label="§" href="#physical-addresses"></a></h2>
        <p>
          A <dfn data-dfn-type="dfn" data-plurals="physical addresses" id="dfn-physical-address">physical address</dfn> is composed of the following parts.
        </p>
        <dl data-sort=""><dt>
            <dfn data-dfn-type="dfn" id="dfn-address-line">Address line</dfn>
          </dt>
          <dd>
            The most specific part of the address. It can include, for example, a
            street name, a house number, apartment number, a rural delivery
            route, descriptive instructions, or a post office box number.
          </dd>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-city">City</dfn>
          </dt>
          <dd>
            The city/town portion of the address.
          </dd>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-country">Country</dfn>
          </dt>
          <dd>
            The country corresponding to the address.
          </dd>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-dependent-locality">Dependent locality</dfn>
          </dt>
          <dd>
            The dependent locality or sublocality within a city. For example,
            neighborhoods, boroughs, districts, or UK dependent localities.
          </dd>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-organization">Organization</dfn>
          </dt>
          <dd>
            The organization, firm, company, or institution at the address.
          </dd>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-phone-number">Phone number</dfn>
          </dt>
          <dd>
            The phone number of the recipient or contact person at the address.
          </dd><dt>
            <dfn data-dfn-type="dfn" data-plurals="postal codes" id="dfn-postal-code">Postal code</dfn>
          </dt>
          <dd>
            The postal code or ZIP code, also known as PIN code in India.
          </dd>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-recipient">Recipient</dfn>
          </dt>
          <dd>
            The name of the recipient or contact person at the address.
          </dd>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-region">Region</dfn>
          </dt>
          <dd>
            The top level administrative subdivision of the country. For example,
            this can be a state, a province, an oblast, or a prefecture.
          </dd>
          <dt>
            <dfn data-dfn-type="dfn" id="dfn-sorting-code">Sorting code</dfn>
          </dt>
          <dd>
            The sorting code as used in, for example, France.
          </dd>
          </dl>
        <section data-dfn-for="PaymentAddress" data-link-for="PaymentAddress" id="paymentaddress-interface">
          <h3 id="x11-1-paymentaddress-interface"><span class="secno">11.1 </span>
            <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentaddress" data-idl="interface" data-title="PaymentAddress"><code>PaymentAddress</code></dfn> interface
          <a class="self-link" aria-label="§" href="#paymentaddress-interface"></a></h3>
          <div><pre class="def idl"><span data-idl="" class="idlInterface" id="idl-def-paymentaddress" data-title="PaymentAddress">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(Window)</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a></span> {<span data-idl="" class="idlMethod" id="idl-def-paymentaddress-tojson" data-title="toJSON" data-dfn-for="paymentaddress">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#Default">Default</a></span>]<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.tojson()|paymentaddress.tojson|tojson()|tojson" href="#dom-paymentaddress-tojson" class="internalDFN" data-link-type="dfn"><code>toJSON</code></a></span>();</span><span data-idl="" class="idlAttribute" id="idl-def-paymentaddress-city" data-title="city" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.city|city" href="#dom-paymentaddress-city" class="internalDFN" data-link-type="dfn"><code>city</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentaddress-country" data-title="country" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.country|country" href="#dom-paymentaddress-country" class="internalDFN" data-link-type="dfn"><code>country</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentaddress-dependentlocality" data-title="dependentLocality" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.dependentlocality|dependentlocality" href="#dom-paymentaddress-dependentlocality" class="internalDFN" data-link-type="dfn"><code>dependentLocality</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentaddress-organization" data-title="organization" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.organization|organization" href="#dom-paymentaddress-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentaddress-phone" data-title="phone" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.phone|phone" href="#dom-paymentaddress-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentaddress-postalcode" data-title="postalCode" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.postalcode|postalcode" href="#dom-paymentaddress-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentaddress-recipient" data-title="recipient" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.recipient|recipient" href="#dom-paymentaddress-recipient" class="internalDFN" data-link-type="dfn"><code>recipient</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentaddress-region" data-title="region" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.region|region" href="#dom-paymentaddress-region" class="internalDFN" data-link-type="dfn"><code>region</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentaddress-sortingcode" data-title="sortingCode" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.sortingcode|sortingcode" href="#dom-paymentaddress-sortingcode" class="internalDFN" data-link-type="dfn"><code>sortingCode</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentaddress-addressline" data-title="addressLine" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-frozen-array">FrozenArray</a>&lt;<a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>&gt;</span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.addressline|addressline" href="#dom-paymentaddress-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a></span>;</span>
  };</span></pre></div>
          <p>
            The <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a> interface represents a <a href="#dfn-physical-address" class="internalDFN" data-link-type="dfn">physical
            address</a>.
          </p>
          <div class="note" role="note" id="issue-container-generatedID-18"><div role="heading" class="note-title marker" id="h-note-18" aria-level="4"><span>Note</span><span class="issue-label">: What happened to regionCode?</span></div><aside class="">
            <p>
              This specification once included a <code>regionCode</code>
              attribute that provided developers with a [<cite><a class="bibref" href="#bib-iso3166-2">ISO3166-2</a></cite>] country
              subdivision code element representation of an address' region
              (e.g., "CA" for California). Unfortunately, the attribute was
              removed due to lack of implementations. The Web Payments Working
              Group fully recognizes the importance of the
              <code>regionCode</code> attribute and is <a href="https://github.com/w3c/payment-request/issues/663">committed to
              bringing the attribute back</a> in a future revision of this
              specification.
            </p>
          </aside></div>
          <section id="internal-constructor">
            <h4 id="x11-1-1-internal-constructor"><span class="secno">11.1.1 </span>
              Internal constructor
            <a class="self-link" aria-label="§" href="#internal-constructor"></a></h4>
            <p>
              The steps to <dfn data-lt="paymentaddress.paymentaddress()|internally construct a paymentaddress" data-dfn-type="dfn" id="dfn-paymentaddress-paymentaddress">internally construct a
              <code>PaymentAddress</code></dfn> with an optional
              <a href="#dom-addressinit" class="internalDFN" data-link-type="dfn"><code>AddressInit</code></a> <var>details</var> are given by the following
              algorithm:
            </p>
            <ol data-link-for="AddressInit">
              <li>Let <var>address</var> be a new instance of
              <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>.
              </li>
              <li>Set <var>address</var>.<a href="#dfn-addressline" class="internalDFN" data-link-type="dfn">[[addressLine]]</a> to the empty
              frozen array, and all other <a data-lt="PaymentAddress slots" href="#dfn-paymentaddress-slots" class="internalDFN" data-link-type="dfn">internal slots</a> to the empty string.
              </li>
              <li>If <var>details</var> was not passed, return
              <var>address</var>.
              </li>
              <li>If <var>details</var>["<a href="#dom-addressinit-country" class="internalDFN" data-link-type="dfn"><code>country</code></a>"] is present and not the
              empty string:
                <ol>
                  <li>Set <var>country</var> the result of <a data-cite-path="" href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">strip leading and
                  trailing ASCII whitespace</a> from
                  <var>details</var>["<a href="#dom-addressinit-country" class="internalDFN" data-link-type="dfn"><code>country</code></a>"] and performing <a data-cite-path="" href="https://infra.spec.whatwg.org/#ascii-uppercase">ASCII
                  uppercase</a>.
                  </li>
                  <li>If <var>country</var> is not a valid [<cite><a class="bibref" href="#bib-iso3166-1">ISO3166-1</a></cite>] alpha-2
                  code, throw a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror"><code>RangeError</code></a> exception.
                  </li>
                  <li>Set <var>address</var>.<a href="#dfn-country-0" class="internalDFN" data-link-type="dfn">[[country]]</a> to
                  <var>country</var>.
                  </li>
                </ol>
              </li>
              <li>Let <var>cleanAddressLines</var> be an empty list.
              </li>
              <li>If <var>details</var>["<a href="#dom-addressinit-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a>"] is present, then
              for each <var>item</var> in
              <var>details</var>["<a href="#dom-addressinit-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a>"]:
                <ol>
                  <li>
                    <a data-cite-path="" href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">Strip leading and trailing ASCII whitespace</a> from
                    <var>item</var> and append the result into
                    <var>cleanAddressLines</var>.
                  </li>
                </ol>
              </li>
              <li>
                <var>Set address</var>.<a href="#dfn-addressline" class="internalDFN" data-link-type="dfn">[[addressLine]]</a> to a new frozen
                array created from <var>cleanAddressLines</var>.
              </li>
              <li>If <var>details</var>["<a href="#dom-addressinit-region" class="internalDFN" data-link-type="dfn"><code>region</code></a>"] is present, <a data-cite-path="" href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">strip
              leading and trailing ASCII whitespace</a> from
              <var>details</var>["<a href="#dom-addressinit-region" class="internalDFN" data-link-type="dfn"><code>region</code></a>"] and set
              <var>address</var>.<a href="#dfn-region-0" class="internalDFN" data-link-type="dfn">[[region]]</a> to the result.
              </li>
              <li>If <var>details</var>["<a href="#dom-addressinit-city" class="internalDFN" data-link-type="dfn"><code>city</code></a>"] is present, <a data-cite-path="" href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">strip
              leading and trailing ASCII whitespace</a> from
              <var>details</var>["<a href="#dom-addressinit-city" class="internalDFN" data-link-type="dfn"><code>city</code></a>"] and set
              <var>address</var>.<a href="#dfn-city-0" class="internalDFN" data-link-type="dfn">[[city]]</a> to the result.
              </li>
              <li>If <var>details</var>["<a href="#dom-addressinit-dependentlocality" class="internalDFN" data-link-type="dfn"><code>dependentLocality</code></a>"] is present,
              <a data-cite-path="" href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">strip leading and trailing ASCII whitespace</a> from
              <var>details</var>["<a href="#dom-addressinit-dependentlocality" class="internalDFN" data-link-type="dfn"><code>dependentLocality</code></a>"] and set
              <var>address</var>.<a href="#dfn-dependentlocality" class="internalDFN" data-link-type="dfn">[[dependentLocality]]</a> to the result.
              </li>
              <li>If <var>details</var>["<a href="#dom-addressinit-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a>"] is present, <a data-cite-path="" href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">strip
              leading and trailing ASCII whitespace</a> from
              <var>details</var>["<a href="#dom-addressinit-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a>"] and set
              <var>address</var>.<a href="#dfn-postalcode" class="internalDFN" data-link-type="dfn">[[postalCode]]</a> to the result.
              </li>
              <li>If <var>details</var>["<a href="#dom-addressinit-sortingcode" class="internalDFN" data-link-type="dfn"><code>sortingCode</code></a>"] is present,
              <a data-cite-path="" href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">strip leading and trailing ASCII whitespace</a> from
              <var>details</var>["<a href="#dom-addressinit-sortingcode" class="internalDFN" data-link-type="dfn"><code>sortingCode</code></a>"] and set
              <var>address</var>.<a href="#dfn-sortingcode" class="internalDFN" data-link-type="dfn">[[sortingCode]]</a> to the result.
              </li>
              <li>If <var>details</var>["<a href="#dom-addressinit-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a>"] is present,
              <a data-cite-path="" href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">strip leading and trailing ASCII whitespace</a> from
              <var>details</var>["<a href="#dom-addressinit-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a>"] and set
              <var>address</var>.<a href="#dfn-organization-0" class="internalDFN" data-link-type="dfn">[[organization]]</a> to the result.
              </li>
              <li>If <var>details</var>["<a href="#dom-addressinit-recipient" class="internalDFN" data-link-type="dfn"><code>recipient</code></a>"] is present, <a data-cite-path="" href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">strip
              leading and trailing ASCII whitespace</a> from
              <var>details</var>["<a href="#dom-addressinit-recipient" class="internalDFN" data-link-type="dfn"><code>recipient</code></a>"] and set
              <var>address</var>.<a href="#dfn-recipient-0" class="internalDFN" data-link-type="dfn">[[recipient]]</a> to the result.
              </li>
              <li>If <var>details</var>["<a href="#dom-addressinit-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a>"] is present, <a data-cite-path="" href="https://infra.spec.whatwg.org/#strip-leading-and-trailing-ascii-whitespace">strip
              leading and trailing ASCII whitespace</a> from
              <var>details</var>["<a href="#dom-addressinit-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a>"] and set
              <var>address</var>.<a href="#dfn-phone" class="internalDFN" data-link-type="dfn">[[phone]]</a> to the result.
              </li>
              <li>Return <var>address</var>.
              </li>
            </ol>
          </section>
          <section id="tojson-method">
            <h4 id="x11-1-2-tojson-method"><span class="secno">11.1.2 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-tojson" data-idl="operation" data-title="toJSON()" data-type="object" data-lt="paymentaddress.tojson()|paymentaddress.tojson|tojson()|tojson"><code>toJSON()</code></dfn> method
            <a class="self-link" aria-label="§" href="#tojson-method"></a></h4>
            <p>
              When called, runs [<cite><a class="bibref" href="#bib-webidl">WEBIDL</a></cite>]'s <a data-cite-path="" href="https://heycam.github.io/webidl/#default-tojson-operation">default toJSON operation</a>.
            </p>
          </section>
          <section id="country-attribute">
            <h4 id="x11-1-3-country-attribute"><span class="secno">11.1.3 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-country" data-idl="attribute" data-title="country" data-type="DOMString" data-lt="paymentaddress.country|country"><code>country</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#country-attribute"></a></h4>
            <p data-link-for="">
              Represents the <a href="#dfn-country" class="internalDFN" data-link-type="dfn">country</a> of the address. When getting, returns
              the value of the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a href="#dfn-country-0" class="internalDFN" data-link-type="dfn">[[country]]</a>
              internal slot.
            </p>
          </section>
          <section id="addressline-attribute">
            <h4 id="x11-1-4-addressline-attribute"><span class="secno">11.1.4 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-addressline" data-idl="attribute" data-title="addressLine" data-type="FrozenArray" data-lt="paymentaddress.addressline|addressline"><code>addressLine</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#addressline-attribute"></a></h4>
            <p data-link-for="">
              Represents the <a href="#dfn-address-line" class="internalDFN" data-link-type="dfn">address line</a> of the address. When getting,
              returns the value of the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s
              <a href="#dfn-addressline" class="internalDFN" data-link-type="dfn">[[addressLine]]</a> internal slot.
            </p>
          </section>
          <section id="region-attribute">
            <h4 id="x11-1-5-region-attribute"><span class="secno">11.1.5 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-region" data-idl="attribute" data-title="region" data-type="DOMString" data-lt="paymentaddress.region|region"><code>region</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#region-attribute"></a></h4>
            <p data-link-for="">
              Represents the <a href="#dfn-region" class="internalDFN" data-link-type="dfn">region</a> of the address. When getting, returns
              the value of the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a href="#dfn-region-0" class="internalDFN" data-link-type="dfn">[[region]]</a>
              internal slot.
            </p>
          </section>
          <section id="city-attribute">
            <h4 id="x11-1-6-city-attribute"><span class="secno">11.1.6 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-city" data-idl="attribute" data-title="city" data-type="DOMString" data-lt="paymentaddress.city|city"><code>city</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#city-attribute"></a></h4>
            <p data-link-for="">
              Represents the <a href="#dfn-city" class="internalDFN" data-link-type="dfn">city</a> of the address. When getting, returns
              the value of the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a href="#dfn-city-0" class="internalDFN" data-link-type="dfn">[[city]]</a> internal
              slot.
            </p>
          </section>
          <section id="dependentlocality-attribute">
            <h4 id="x11-1-7-dependentlocality-attribute"><span class="secno">11.1.7 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-dependentlocality" data-idl="attribute" data-title="dependentLocality" data-type="DOMString" data-lt="paymentaddress.dependentlocality|dependentlocality"><code>dependentLocality</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#dependentlocality-attribute"></a></h4>
            <p>
              Represents the <a href="#dfn-dependent-locality" class="internalDFN" data-link-type="dfn">dependent locality</a> of the address. When
              getting, returns the value of the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s
              <a href="#dfn-dependentlocality" class="internalDFN" data-link-type="dfn">[[dependentLocality]]</a> internal slot.
            </p>
          </section>
          <section id="postalcode-attribute">
            <h4 id="x11-1-8-postalcode-attribute"><span class="secno">11.1.8 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-postalcode" data-idl="attribute" data-title="postalCode" data-type="DOMString" data-lt="paymentaddress.postalcode|postalcode"><code>postalCode</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#postalcode-attribute"></a></h4>
            <p>
              Represents the <a href="#dfn-postal-code" class="internalDFN" data-link-type="dfn">postal code</a> of the address. When getting,
              returns the value of the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s
              <a href="#dfn-postalcode" class="internalDFN" data-link-type="dfn">[[postalCode]]</a> internal slot.
            </p>
          </section>
          <section id="sortingcode-attribute">
            <h4 id="x11-1-9-sortingcode-attribute"><span class="secno">11.1.9 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-sortingcode" data-idl="attribute" data-title="sortingCode" data-type="DOMString" data-lt="paymentaddress.sortingcode|sortingcode"><code>sortingCode</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#sortingcode-attribute"></a></h4>
            <p>
              Represents the <a href="#dfn-sorting-code" class="internalDFN" data-link-type="dfn">sorting code</a> of the address. When getting,
              returns the value of the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s
              <a href="#dfn-sortingcode" class="internalDFN" data-link-type="dfn">[[sortingCode]]</a> internal slot.
            </p>
          </section>
          <section id="organization-attribute">
            <h4 id="x11-1-10-organization-attribute"><span class="secno">11.1.10 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-organization" data-idl="attribute" data-title="organization" data-type="DOMString" data-lt="paymentaddress.organization|organization"><code>organization</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#organization-attribute"></a></h4>
            <p data-link-for="">
              Represents the <a href="#dfn-organization" class="internalDFN" data-link-type="dfn">organization</a> of the address. When getting,
              returns the value of the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s
              <a href="#dfn-organization-0" class="internalDFN" data-link-type="dfn">[[organization]]</a> internal slot.
            </p>
          </section>
          <section id="recipient-attribute">
            <h4 id="x11-1-11-recipient-attribute"><span class="secno">11.1.11 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-recipient" data-idl="attribute" data-title="recipient" data-type="DOMString" data-lt="paymentaddress.recipient|recipient"><code>recipient</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#recipient-attribute"></a></h4>
            <p data-link-for="">
              Represents the <a href="#dfn-recipient" class="internalDFN" data-link-type="dfn">recipient</a> of the address. When getting,
              returns the value of the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s
              <a href="#dfn-recipient-0" class="internalDFN" data-link-type="dfn">[[recipient]]</a> internal slot.
            </p>
          </section>
          <section id="phone-attribute">
            <h4 id="x11-1-12-phone-attribute"><span class="secno">11.1.12 </span>
              <dfn data-dfn-for="paymentaddress" data-dfn-type="dfn" id="dom-paymentaddress-phone" data-idl="attribute" data-title="phone" data-type="DOMString" data-lt="paymentaddress.phone|phone"><code>phone</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#phone-attribute"></a></h4>
            <p>
              Represents the <a href="#dfn-phone-number" class="internalDFN" data-link-type="dfn">phone number</a> of the address. When getting,
              returns the value of the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a href="#dfn-phone" class="internalDFN" data-link-type="dfn">[[phone]]</a>
              internal slot.
            </p>
          </section>
          <section data-link-for="" id="internal-slots-0">
            <h4 id="x11-1-13-internal-slots"><span class="secno">11.1.13 </span>
              <dfn data-lt="paymentaddress slots|internal slots" data-no-default="" data-dfn-type="dfn" id="dfn-paymentaddress-slots">Internal
              slots</dfn>
            <a class="self-link" aria-label="§" href="#internal-slots-0"></a></h4>
            <table>
              <tbody><tr>
                <th>
                  Internal slot
                </th>
                <th>
                  Description (<em>non-normative</em>)
                </th>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-country-0">[[country]]</dfn>
                </td>
                <td>
                  A <a href="#dfn-country" class="internalDFN" data-link-type="dfn">country</a> as an [<cite><a class="bibref" href="#bib-iso3166-1">ISO3166-1</a></cite>] alpha-2 code stored in its
                  canonical uppercase form or the empty string. For example,
                  "JP".
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-addressline">[[addressLine]]</dfn>
                </td>
                <td>
                  A frozen array, possibly of zero length, representing an
                  <a href="#dfn-address-line" class="internalDFN" data-link-type="dfn">address line</a>.
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-region-0">[[region]]</dfn>
                </td>
                <td>
                  A <a href="#dfn-region" class="internalDFN" data-link-type="dfn">region</a> as a <a href="#dfn-country-subdivision-names" class="internalDFN" data-link-type="dfn">country subdivision name</a> or the
                  empty string, such as "Victoria", representing the state of
                  Victoria in Australia.
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-city-0">[[city]]</dfn>
                </td>
                <td>
                  A <a href="#dfn-city" class="internalDFN" data-link-type="dfn">city</a> or the empty string.
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-dependentlocality">[[dependentLocality]]</dfn>
                </td>
                <td>
                  A <a href="#dfn-dependent-locality" class="internalDFN" data-link-type="dfn">dependent locality</a> or the empty string.
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-postalcode">[[postalCode]]</dfn>
                </td>
                <td>
                  A <a href="#dfn-postal-code" class="internalDFN" data-link-type="dfn">postal code</a> or the empty string.
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-sortingcode">[[sortingCode]]</dfn>
                </td>
                <td>
                  A <a href="#dfn-sorting-code" class="internalDFN" data-link-type="dfn">sorting code</a> or the empty string.
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-organization-0">[[organization]]</dfn>
                </td>
                <td>
                  An <a href="#dfn-organization" class="internalDFN" data-link-type="dfn">organization</a> or the empty string.
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-recipient-0">[[recipient]]</dfn>
                </td>
                <td>
                  A <a href="#dfn-recipient" class="internalDFN" data-link-type="dfn">recipient</a> or the empty string.
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-phone">[[phone]]</dfn>
                </td>
                <td>
                  A <a href="#dfn-phone-number" class="internalDFN" data-link-type="dfn">phone number</a> or the empty string.
                </td>
              </tr>
            </tbody></table>
          </section>
        </section>
        <section data-dfn-for="AddressInit" data-link-for="AddressInit" id="addressinit-dictionary">
          <h3 id="x11-2-addressinit-dictionary"><span class="secno">11.2 </span>
            <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-addressinit" data-idl="dictionary" data-title="AddressInit"><code>AddressInit</code></dfn> dictionary
          <a class="self-link" aria-label="§" href="#addressinit-dictionary"></a></h3>
          <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-addressinit" data-title="AddressInit">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-addressinit" class="internalDFN" data-link-type="dfn"><code>AddressInit</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-addressinit-country" data-title="country" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-country" class="internalDFN" data-link-type="dfn"><code>country</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addressinit-addressline" data-title="addressLine" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>&gt;</span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addressinit-region" data-title="region" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-region" class="internalDFN" data-link-type="dfn"><code>region</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addressinit-city" data-title="city" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-city" class="internalDFN" data-link-type="dfn"><code>city</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addressinit-dependentlocality" data-title="dependentLocality" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-dependentlocality" class="internalDFN" data-link-type="dfn"><code>dependentLocality</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addressinit-postalcode" data-title="postalCode" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addressinit-sortingcode" data-title="sortingCode" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-sortingcode" class="internalDFN" data-link-type="dfn"><code>sortingCode</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addressinit-organization" data-title="organization" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addressinit-recipient" data-title="recipient" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-recipient" class="internalDFN" data-link-type="dfn"><code>recipient</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addressinit-phone" data-title="phone" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a></span>;</span>
  };</span></pre></div>
          <p>
            An <a href="#dom-addressinit" class="internalDFN" data-link-type="dfn"><code>AddressInit</code></a> is passed when <a data-lt="PaymentAddress.PaymentAddress()" href="#dfn-paymentaddress-paymentaddress" class="internalDFN" data-link-type="dfn">constructing</a> a
            <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>. Its members are as follows.
          </p>
          <dl data-dfn-for="AddressInit" data-link-for="" data-sort="ascending"><dt>
              <dfn data-dfn-for="addressinit" data-dfn-type="dfn" id="dom-addressinit-addressline" data-idl="field" data-title="addressLine" data-type="sequence"><code>addressLine</code></dfn> member
            </dt>
            <dd>
              An <a href="#dfn-address-line" class="internalDFN" data-link-type="dfn">address line</a>, represented as a sequence.
            </dd>
            <dt>
              <dfn data-dfn-for="addressinit" data-dfn-type="dfn" id="dom-addressinit-city" data-idl="field" data-title="city" data-type="DOMString"><code>city</code></dfn> member
            </dt>
            <dd>
              A <a href="#dfn-city" class="internalDFN" data-link-type="dfn">city</a>.
            </dd>
            <dt>
              <dfn data-dfn-for="addressinit" data-dfn-type="dfn" id="dom-addressinit-country" data-idl="field" data-title="country" data-type="DOMString"><code>country</code></dfn> member
            </dt>
            <dd>
              An <a href="#dfn-country" class="internalDFN" data-link-type="dfn">country</a>, represented as a [<cite><a class="bibref" href="#bib-iso3166-1">ISO3166-1</a></cite>] country code.
            </dd>
            <dt>
              <dfn data-dfn-for="addressinit" data-dfn-type="dfn" id="dom-addressinit-dependentlocality" data-idl="field" data-title="dependentLocality" data-type="DOMString"><code>dependentLocality</code></dfn> member
            </dt>
            <dd>
              A <a href="#dfn-dependent-locality" class="internalDFN" data-link-type="dfn">dependent locality</a>.
            </dd>
            <dt>
              <dfn data-dfn-for="addressinit" data-dfn-type="dfn" id="dom-addressinit-organization" data-idl="field" data-title="organization" data-type="DOMString"><code>organization</code></dfn> member
            </dt>
            <dd>
              An <a href="#dfn-organization" class="internalDFN" data-link-type="dfn">organization</a>.
            </dd>
            <dt>
              <dfn data-dfn-for="addressinit" data-dfn-type="dfn" id="dom-addressinit-phone" data-idl="field" data-title="phone" data-type="DOMString"><code>phone</code></dfn> member
            </dt>
            <dd>
              A <a href="#dfn-phone-number" class="internalDFN" data-link-type="dfn">phone number</a>, optionally structured to adhere to
              [<cite><a class="bibref" href="#bib-e.164">E.164</a></cite>].
            </dd><dt>
              <dfn data-dfn-for="addressinit" data-dfn-type="dfn" id="dom-addressinit-postalcode" data-idl="field" data-title="postalCode" data-type="DOMString"><code>postalCode</code></dfn> member
            </dt>
            <dd>
              A <a href="#dfn-postal-code" class="internalDFN" data-link-type="dfn">postal code</a>.
            </dd>
            <dt>
              <dfn data-dfn-for="addressinit" data-dfn-type="dfn" id="dom-addressinit-recipient" data-idl="field" data-title="recipient" data-type="DOMString"><code>recipient</code></dfn> member
            </dt>
            <dd>
              A <a href="#dfn-recipient" class="internalDFN" data-link-type="dfn">recipient</a>. Under certain circumstances, this member may
              contain multiline information. For example, it might contain "care
              of" information.
            </dd>
            <dt>
              <dfn data-dfn-for="addressinit" data-dfn-type="dfn" id="dom-addressinit-region" data-idl="field" data-title="region" data-type="DOMString"><code>region</code></dfn> member
            </dt>
            <dd>
              A <a href="#dfn-region" class="internalDFN" data-link-type="dfn">region</a>.
            </dd>
            <dt>
              <dfn data-dfn-for="addressinit" data-dfn-type="dfn" id="dom-addressinit-sortingcode" data-idl="field" data-title="sortingCode" data-type="DOMString"><code>sortingCode</code></dfn> member
            </dt>
            <dd>
              A <a href="#dfn-sorting-code" class="internalDFN" data-link-type="dfn">sorting code</a>.
            </dd>
            </dl>
        </section>
        <section data-dfn-for="AddressErrors" data-link-for="AddressErrors" id="addresserrors-dictionary">
          <h3 id="x11-3-addresserrors-dictionary"><span class="secno">11.3 </span>
            <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-addresserrors" data-idl="dictionary" data-title="AddressErrors"><code>AddressErrors</code></dfn> dictionary
          <a class="self-link" aria-label="§" href="#addresserrors-dictionary"></a></h3>
          <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-addresserrors" data-title="AddressErrors">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-addresserrors" class="internalDFN" data-link-type="dfn"><code>AddressErrors</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-addresserrors-addressline" data-title="addressLine" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addresserrors-city" data-title="city" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-city" class="internalDFN" data-link-type="dfn"><code>city</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addresserrors-country" data-title="country" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-country" class="internalDFN" data-link-type="dfn"><code>country</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addresserrors-dependentlocality" data-title="dependentLocality" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-dependentlocality" class="internalDFN" data-link-type="dfn"><code>dependentLocality</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addresserrors-organization" data-title="organization" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addresserrors-phone" data-title="phone" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addresserrors-postalcode" data-title="postalCode" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addresserrors-recipient" data-title="recipient" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-recipient" class="internalDFN" data-link-type="dfn"><code>recipient</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addresserrors-region" data-title="region" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-region" class="internalDFN" data-link-type="dfn"><code>region</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-addresserrors-sortingcode" data-title="sortingCode" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-sortingcode" class="internalDFN" data-link-type="dfn"><code>sortingCode</code></a></span>;</span>
  };</span></pre></div>
          <p>
            The members of the <a href="#dom-addresserrors" class="internalDFN" data-link-type="dfn"><code>AddressErrors</code></a> dictionary represent
            validation errors with specific parts of a <a href="#dfn-physical-address" class="internalDFN" data-link-type="dfn">physical address</a>.
            Each dictionary member has a dual function: firstly, its presence
            denotes that a particular part of an address is suffering from a
            validation error. Secondly, the string value allows the developer to
            describe the validation error (and possibly how the end user can fix
            the error).
          </p>
          <div class="note" role="note" id="issue-container-generatedID-19"><div role="heading" class="note-title marker" id="h-note-19" aria-level="4"><span>Note</span></div><p class="">
            Developers need to be aware that users might not have the ability to
            fix certain parts of an address. As such, they need to be mindful not
            to ask the user to fix things they might not have control over.
          </p></div>
          <dl>
            <dt>
              <dfn data-dfn-for="addresserrors" data-dfn-type="dfn" id="dom-addresserrors-addressline" data-idl="field" data-title="addressLine" data-type="DOMString"><code>addressLine</code></dfn> member
            </dt>
            <dd>
              Denotes that the <a href="#dfn-address-line" class="internalDFN" data-link-type="dfn">address line</a> has a validation error. In the
              user agent's UI, this member corresponds to the input field that
              provided the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a data-link-for="PaymentAddress" href="#dom-paymentaddress-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a> attribute's value.
            </dd>
            <dt>
              <dfn data-dfn-for="addresserrors" data-dfn-type="dfn" id="dom-addresserrors-city" data-idl="field" data-title="city" data-type="DOMString"><code>city</code></dfn> member
            </dt>
            <dd>
              Denotes that the <a href="#dom-addresserrors-city" class="internalDFN" data-link-type="dfn"><code>city</code></a> has a validation error. In the user
              agent's UI, this member corresponds to the input field that
              provided the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a data-link-for="PaymentAddress" href="#dom-paymentaddress-city" class="internalDFN" data-link-type="dfn"><code>city</code></a> attribute's value.
            </dd>
            <dt>
              <dfn data-dfn-for="addresserrors" data-dfn-type="dfn" id="dom-addresserrors-country" data-idl="field" data-title="country" data-type="DOMString"><code>country</code></dfn> member
            </dt>
            <dd>
              Denotes that the <a href="#dom-addresserrors-country" class="internalDFN" data-link-type="dfn"><code>country</code></a> has a validation error. In the user
              agent's UI, this member corresponds to the input field that
              provided the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a data-link-for="PaymentAddress" href="#dom-paymentaddress-country" class="internalDFN" data-link-type="dfn"><code>country</code></a> attribute's value.
            </dd>
            <dt>
              <dfn data-dfn-for="addresserrors" data-dfn-type="dfn" id="dom-addresserrors-dependentlocality" data-idl="field" data-title="dependentLocality" data-type="DOMString"><code>dependentLocality</code></dfn> member
            </dt>
            <dd>
              Denotes that the <a href="#dfn-dependent-locality" class="internalDFN" data-link-type="dfn">dependent locality</a> has a validation error.
              In the user agent's UI, this member corresponds to the input field
              that provided the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a data-link-for="PaymentAddress" href="#dom-paymentaddress-dependentlocality" class="internalDFN" data-link-type="dfn"><code>dependentLocality</code></a> attribute's value.
            </dd>
            <dt>
              <dfn data-dfn-for="addresserrors" data-dfn-type="dfn" id="dom-addresserrors-organization" data-idl="field" data-title="organization" data-type="DOMString"><code>organization</code></dfn> member
            </dt>
            <dd>
              Denotes that the <a href="#dom-addresserrors-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a> has a validation error. In the
              user agent's UI, this member corresponds to the input field that
              provided the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a data-link-for="PaymentAddress" href="#dom-paymentaddress-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a> attribute's value.
            </dd>
            <dt>
              <dfn data-dfn-for="addresserrors" data-dfn-type="dfn" id="dom-addresserrors-phone" data-idl="field" data-title="phone" data-type="DOMString"><code>phone</code></dfn> member
            </dt>
            <dd>
              Denotes that the <a href="#dfn-phone-number" class="internalDFN" data-link-type="dfn">phone number</a> has a validation error. In the
              user agent's UI, this member corresponds to the input field that
              provided the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a data-link-for="PaymentAddress" href="#dom-paymentaddress-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a> attribute's value.
            </dd>
            <dt>
              <dfn data-dfn-for="addresserrors" data-dfn-type="dfn" id="dom-addresserrors-postalcode" data-idl="field" data-title="postalCode" data-type="DOMString"><code>postalCode</code></dfn> member
            </dt>
            <dd>
              Denotes that the <a href="#dfn-postal-code" class="internalDFN" data-link-type="dfn">postal code</a> has a validation error. In the
              user agent's UI, this member corresponds to the input field that
              provided the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a data-link-for="PaymentAddress" href="#dom-paymentaddress-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a> attribute's value.
            </dd>
            <dt>
              <dfn data-dfn-for="addresserrors" data-dfn-type="dfn" id="dom-addresserrors-recipient" data-idl="field" data-title="recipient" data-type="DOMString"><code>recipient</code></dfn> member
            </dt>
            <dd>
              Denotes that the <a href="#dom-addresserrors-recipient" class="internalDFN" data-link-type="dfn"><code>recipient</code></a> has a validation error. In the
              user agent's UI, this member corresponds to the input field that
              provided the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a data-link-for="PaymentAddress" href="#dom-paymentaddress-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a> attribute's value.
            </dd>
            <dt>
              <dfn data-dfn-for="addresserrors" data-dfn-type="dfn" id="dom-addresserrors-region" data-idl="field" data-title="region" data-type="DOMString"><code>region</code></dfn> member
            </dt>
            <dd>
              Denotes that the <a href="#dom-addresserrors-region" class="internalDFN" data-link-type="dfn"><code>region</code></a> has a validation error. In the user
              agent's UI, this member corresponds to the input field that
              provided the <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a data-link-for="PaymentAddress" href="#dom-paymentaddress-region" class="internalDFN" data-link-type="dfn"><code>region</code></a> attribute's value.
            </dd>
            <dt>
              <dfn data-dfn-for="addresserrors" data-dfn-type="dfn" id="dom-addresserrors-sortingcode" data-idl="field" data-title="sortingCode" data-type="DOMString"><code>sortingCode</code></dfn> member
            </dt>
            <dd>
              The <a href="#dfn-sorting-code" class="internalDFN" data-link-type="dfn">sorting code</a> has a validation error. In the user agent's
              UI, this member corresponds to the input field that provided the
              <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s <a data-link-for="PaymentAddress" href="#dom-paymentaddress-sortingcode" class="internalDFN" data-link-type="dfn"><code>sortingCode</code></a> attribute's value.
            </dd>
          </dl>
        </section>
        <section id="creating-a-paymentaddress-from-user-provided-input">
          <h3 id="x11-4-creating-a-paymentaddress-from-user-provided-input"><span class="secno">11.4 </span>
            Creating a <code>PaymentAddress</code> from user-provided input
          <a class="self-link" aria-label="§" href="#creating-a-paymentaddress-from-user-provided-input"></a></h3>
          <p>
            The steps to <dfn data-dfn-type="dfn" id="dfn-create-a-paymentaddress-from-user-provided-input">create a <code>PaymentAddress</code> from
            user-provided input</dfn> are given by the following algorithm. The
            algorithm takes a <a data-cite-path="" href="https://infra.spec.whatwg.org/#list">list</a> <var>redactList</var>.
          </p>
          <div class="note" role="note" id="issue-container-generatedID-20"><div role="heading" class="note-title marker" id="h-note-20" aria-level="4"><span>Note</span><span class="issue-label">: Privacy of recipient information (the redactList)</span></div><div class="">
            <p>
              The <var>redactList</var> optionally gives user agents the
              possibility to limit the amount of personal information about the
              recipient that the API shares with the merchant.
            </p>
            <p>
              For merchants, the resulting <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a> object provides
              enough information to, for example, calculate shipping costs, but,
              in most cases, not enough information to physically locate and
              uniquely identify the recipient.
            </p>
            <p>
              Unfortunately, even with the <var>redactList</var>, recipient
              anonymity cannot be assured. This is because in some countries
              postal codes are so fine-grained that they can uniquely identify a
              recipient.
            </p>
          </div></div>
          <ol data-link-for="AddressInit">
            <li>Let <var>details</var> be an <a href="#dom-addressinit" class="internalDFN" data-link-type="dfn"><code>AddressInit</code></a> dictionary with
            no members present.
            </li>
            <li>If "addressLine" is not in <var>redactList</var>, set
            <var>details</var>["<a href="#dom-addressinit-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a>"] to the result of splitting
            the user-provided address line into a <a data-cite-path="" href="https://infra.spec.whatwg.org/#list">list</a>. If none was
            provided, set it to the empty <a data-cite-path="" href="https://infra.spec.whatwg.org/#list">list</a>.
              <div class="note" role="note" id="issue-container-generatedID-21"><div role="heading" class="note-title marker" id="h-note-21" aria-level="4"><span>Note</span></div><aside class="">
                How to split an address line is locale dependent and beyond the
                scope of this specification.
              </aside></div>
            </li>
            <li>If "country" is not in <var>redactList</var>, set
            <var>details</var>["<a href="#dom-addressinit-country" class="internalDFN" data-link-type="dfn"><code>country</code></a>"] to the user-provided country as
            an upper case [<cite><a class="bibref" href="#bib-iso3166-1">ISO3166-1</a></cite>] alpha-2 code, or to the empty string if
            none was provided.
            </li>
            <li>If "phone" is not in <var>redactList</var>, set
            <var>details</var>["<a href="#dom-addressinit-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a>"] to the user-provided phone number,
            or to the empty string if none was provided.
              <div class="note" role="note" id="issue-container-generatedID-22"><div role="heading" class="note-title marker" id="h-note-22" aria-level="4"><span>Note</span><span class="issue-label">: Privacy of phone number</span></div><aside class="">
                <p>
                  To maintain users' privacy, implementers need to be mindful
                  that a shipping address's associated phone number might be
                  different or the same from that of the end user's. As such,
                  implementers need to take care to not provide the end user's
                  phone number to the merchant without the end user's consent.
                </p>
              </aside></div>
            </li>
            <li>If "city" is not in <var>redactList</var>, set
            <var>details</var>["<a href="#dom-addressinit-city" class="internalDFN" data-link-type="dfn"><code>city</code></a>"] to the user-provided city, or to
            the empty string if none was provided.
            </li>
            <li>If "dependentLocality" is not in <var>redactList</var>, set <var>
              details</var>["<a href="#dom-addressinit-dependentlocality" class="internalDFN" data-link-type="dfn"><code>dependentLocality</code></a>"] to the user-provided
              dependent locality, or to the empty string if none was provided.
            </li>
            <li>If "organization" is not in <var>redactList</var>, set
            <var>details</var>["<a href="#dom-addressinit-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a>"] to the user-provided
            recipient organization, or to the empty string if none was provided.
            </li>
            <li>If "postalCode" is not in <var>redactList</var>, set
            <var>details</var>["<a href="#dom-addressinit-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a>"] to the user-provided postal
            code, or to the empty string if none was provided. Optionally, redact
            part of <var>details</var>["<a href="#dom-addressinit-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a>"].
              <div class="note" role="note" id="issue-container-generatedID-23"><div role="heading" class="note-title marker" id="h-note-23" aria-level="4"><span>Note</span><span class="issue-label">: Privacy of Postal Codes</span></div><div class="">
                <p>
                  <a href="#dfn-postal-code" class="internalDFN" data-link-type="dfn">Postal codes</a> in certain countries can be so specific as
                  to uniquely identify an individual. This being a privacy
                  concern, some user agents only return the part of a postal code
                  that they deem sufficient for a merchant to calculate shipping
                  costs. This varies across countries and regions, and so the
                  choice to redact part, or all, of the postal code is left to
                  the discretion of implementers in the interest of protecting
                  users' privacy.
                </p>
              </div></div>
            </li>
            <li>If "recipient" is not in <var>redactList</var>, set
            <var>details</var>["<a href="#dom-addressinit-recipient" class="internalDFN" data-link-type="dfn"><code>recipient</code></a>"] to the user-provided recipient
            of the transaction, or to the empty string if none was provided.
            </li>
            <li>
              <p>
                If "region" is not in <var>redactList</var>:
              </p>
              <div class="note" role="note" id="issue-container-generatedID-24"><div role="heading" class="note-title marker" id="h-note-24" aria-level="4"><span>Note</span><span class="issue-label">: Countries where regions are not commonly used</span></div><p data-link-for="" class="">
                In some countries (e.g., Belgium) it is uncommon for users to
                include a <a href="#dfn-region" class="internalDFN" data-link-type="dfn">region</a> as part of a <a href="#dfn-physical-address" class="internalDFN" data-link-type="dfn">physical address</a>
                (even if all the regions of a country are part of [<cite><a class="bibref" href="#bib-iso3166-2">ISO3166-2</a></cite>]).
                As such, when the user agent knows that the user is inputting the
                address for a particular country, it might not provide a field
                for the user to input a <a href="#dfn-region" class="internalDFN" data-link-type="dfn">region</a>. In such cases, the user
                agent returns an empty string for both <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>'s
                <a data-link-for="PaymentAddress" href="#dom-paymentaddress-region" class="internalDFN" data-link-type="dfn"><code>region</code></a> attribute - but the
                address can still serve its intended purpose (e.g., be valid for
                shipping or billing purposes).
              </p></div>
              <ol>
                <li>Set <var>details</var>["<a href="#dom-addressinit-region" class="internalDFN" data-link-type="dfn"><code>region</code></a>"] to the user-provided
                region, or to the empty string if none was provided.
                </li>
              </ol>
            </li>
            <li>If "sortingCode" is not in <var>redactList</var>, set
            <var>details</var>["<a href="#dom-addressinit-sortingcode" class="internalDFN" data-link-type="dfn"><code>sortingCode</code></a>"] to the user-provided sorting
            code, or to the empty string if none was provided.
            </li>
            <li>
              <a data-lt="PaymentAddress.PaymentAddress()" href="#dfn-paymentaddress-paymentaddress" class="internalDFN" data-link-type="dfn">Internally construct a
              new <code>PaymentAddress</code></a> with <var>details</var> and
              return the result.
            </li>
          </ol>
        </section>
      </section>
      <section data-dfn-for="PaymentShippingOption" id="paymentshippingoption-dictionary">
        <!--OddPage--><h2 id="x12-paymentshippingoption-dictionary"><span class="secno">12. </span>
          <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentshippingoption" data-idl="dictionary" data-title="PaymentShippingOption"><code>PaymentShippingOption</code></dfn> dictionary
        <a class="self-link" aria-label="§" href="#paymentshippingoption-dictionary"></a></h2>
        <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentshippingoption" data-title="PaymentShippingOption">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentshippingoption" class="internalDFN" data-link-type="dfn"><code>PaymentShippingOption</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentshippingoption-id" data-title="id" data-dfn-for="paymentshippingoption">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentshippingoption" data-lt="" href="#dom-paymentshippingoption-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentshippingoption-label" data-title="label" data-dfn-for="paymentshippingoption">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentshippingoption" data-lt="" href="#dom-paymentshippingoption-label" class="internalDFN" data-link-type="dfn"><code>label</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentshippingoption-amount" data-title="amount" data-dfn-for="paymentshippingoption">
    required<span class="idlType"> <a data-link-for="" href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a></span> <span class="idlName"><a data-link-for="paymentshippingoption" data-lt="" href="#dom-paymentshippingoption-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentshippingoption-selected" data-title="selected" data-dfn-for="paymentshippingoption"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentshippingoption" data-lt="" href="#dom-paymentshippingoption-selected" class="internalDFN" data-link-type="dfn"><code>selected</code></a></span> = false;</span>
  };</span></pre></div>
        <p>
          The <a href="#dom-paymentshippingoption" class="internalDFN" data-link-type="dfn"><code>PaymentShippingOption</code></a> dictionary has members describing a
          shipping option. Developers can provide the user with one or more
          shipping options by calling the <a data-lt="PaymentRequestUpdateEvent.updateWith" href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code>updateWith()</code></a> method in
          response to a change event.
        </p>
        <dl>
          <dt>
            <dfn data-dfn-for="paymentshippingoption" data-dfn-type="dfn" id="dom-paymentshippingoption-id" data-idl="field" data-title="id" data-type="DOMString"><code>id</code></dfn> member
          </dt>
          <dd>
            A string identifier used to reference this
            <a href="#dom-paymentshippingoption" class="internalDFN" data-link-type="dfn"><code>PaymentShippingOption</code></a>. It <em class="rfc2119" title="MUST">MUST</em> be unique for a given
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentshippingoption" data-dfn-type="dfn" id="dom-paymentshippingoption-label" data-idl="field" data-title="label" data-type="DOMString"><code>label</code></dfn> member
          </dt>
          <dd>
            A human-readable string description of the item. The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user
            agent</a> <em class="rfc2119" title="SHOULD">SHOULD</em> use this string to display the shipping option to
            the user.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentshippingoption" data-dfn-type="dfn" id="dom-paymentshippingoption-amount" data-idl="field" data-title="amount" data-type="PaymentCurrencyAmount"><code>amount</code></dfn> member
          </dt>
          <dd>
            A <a href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a> containing the monetary amount for the
            item.
          </dd>
          <dt>
            <dfn data-dfn-for="paymentshippingoption" data-dfn-type="dfn" id="dom-paymentshippingoption-selected" data-idl="field" data-title="selected" data-type="boolean"><code>selected</code></dfn> member
          </dt>
          <dd>
            A boolean. When true, it indicates that this is the default selected
            <a href="#dom-paymentshippingoption" class="internalDFN" data-link-type="dfn"><code>PaymentShippingOption</code></a> in a sequence. <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">User agents</a> <em class="rfc2119" title="SHOULD">SHOULD</em>
            display this option by default in the user interface.
          </dd>
        </dl>
      </section>
      <section data-dfn-for="PaymentComplete" data-link-for="PaymentComplete" id="paymentcomplete-enum">
        <!--OddPage--><h2 id="x13-paymentcomplete-enum"><span class="secno">13. </span>
          <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentcomplete" data-idl="enum" data-title="PaymentComplete"><code>PaymentComplete</code></dfn> enum
        <a class="self-link" aria-label="§" href="#paymentcomplete-enum"></a></h2>
        <div><pre class="def idl"><span data-idl="" class="idlEnum" id="idl-def-paymentcomplete" data-title="PaymentComplete">enum <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentcomplete" class="internalDFN" data-link-type="dfn"><code>PaymentComplete</code></a></span> {
    <span class="idlEnumItem">"<a data-link-for="paymentcomplete" data-lt="" href="#dom-paymentcomplete-fail" class="internalDFN" data-link-type="dfn"><code>fail</code></a>"</span>,
    <span class="idlEnumItem">"<a data-link-for="paymentcomplete" data-lt="" href="#dom-paymentcomplete-success" class="internalDFN" data-link-type="dfn"><code>success</code></a>"</span>,
    <span class="idlEnumItem">"<a data-link-for="paymentcomplete" data-lt="" href="#dom-paymentcomplete-unknown" class="internalDFN" data-link-type="dfn"><code>unknown</code></a>"</span>
  };</span></pre></div>
        <dl>
          <dt>
            "<dfn data-dfn-for="paymentcomplete" data-dfn-type="dfn" id="dom-paymentcomplete-fail" data-idl="enum-value" data-title="fail"><code>fail</code></dfn>"
          </dt>
          <dd>
            Indicates that processing of the payment failed. The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user
            agent</a> <em class="rfc2119" title="MAY">MAY</em> display UI indicating failure.
          </dd>
          <dt>
            "<dfn data-dfn-for="paymentcomplete" data-dfn-type="dfn" id="dom-paymentcomplete-success" data-idl="enum-value" data-title="success"><code>success</code></dfn>"
          </dt>
          <dd>
            Indicates the payment was successfully processed. The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user
            agent</a> <em class="rfc2119" title="MAY">MAY</em> display UI indicating success.
          </dd>
          <dt>
            "<dfn data-dfn-for="paymentcomplete" data-dfn-type="dfn" id="dom-paymentcomplete-unknown" data-idl="enum-value" data-title="unknown"><code>unknown</code></dfn>"
          </dt>
          <dd>
            The developer did not indicate success or failure and the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user
            agent</a> <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> display UI indicating success or failure.
          </dd>
        </dl>
      </section>
      <section data-dfn-for="PaymentResponse" data-link-for="PaymentResponse" id="paymentresponse-interface">
        <!--OddPage--><h2 id="x14-paymentresponse-interface"><span class="secno">14. </span>
          <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentresponse" data-idl="interface" data-title="PaymentResponse"><code>PaymentResponse</code></dfn> interface
        <a class="self-link" aria-label="§" href="#paymentresponse-interface"></a></h2>
        <div><pre class="def idl"><span data-idl="" class="idlInterface" id="idl-def-paymentresponse" data-title="PaymentResponse">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=Window</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#interface-eventtarget"><code>EventTarget</code></a></span>  {<span data-idl="" class="idlMethod" id="idl-def-paymentresponse-tojson" data-title="toJSON" data-dfn-for="paymentresponse">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#Default">Default</a></span>]<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.tojson()|paymentresponse.tojson|tojson()|tojson" href="#dom-paymentresponse-tojson" class="internalDFN" data-link-type="dfn"><code>toJSON</code></a></span>();</span><span data-idl="" class="idlAttribute" id="idl-def-paymentresponse-requestid" data-title="requestId" data-dfn-for="paymentresponse">

    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.requestid|requestid" href="#dom-paymentresponse-requestid" class="internalDFN" data-link-type="dfn"><code>requestId</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentresponse-methodname" data-title="methodName" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.methodname|methodname" href="#dom-paymentresponse-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentresponse-details" data-title="details" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.details|details" href="#dom-paymentresponse-details" class="internalDFN" data-link-type="dfn"><code>details</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentresponse-shippingaddress" data-title="shippingAddress" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a data-link-for="" href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>?</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.shippingaddress|shippingaddress" href="#dom-paymentresponse-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentresponse-shippingoption" data-title="shippingOption" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.shippingoption|shippingoption" href="#dom-paymentresponse-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentresponse-payername" data-title="payerName" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.payername|payername" href="#dom-paymentresponse-payername" class="internalDFN" data-link-type="dfn"><code>payerName</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentresponse-payeremail" data-title="payerEmail" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.payeremail|payeremail" href="#dom-paymentresponse-payeremail" class="internalDFN" data-link-type="dfn"><code>payerEmail</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentresponse-payerphone" data-title="payerPhone" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.payerphone|payerphone" href="#dom-paymentresponse-payerphone" class="internalDFN" data-link-type="dfn"><code>payerPhone</code></a></span>;</span><span data-idl="" class="idlMethod" id="idl-def-paymentresponse-complete-result" data-title="complete" data-dfn-for="paymentresponse">

    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#NewObject">NewObject</a></span>]<span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="complete(result)|complete()|paymentresponse.complete()|paymentresponse.complete|complete" href="#dom-paymentresponse-complete" class="internalDFN" data-link-type="dfn"><code>complete</code></a></span>(optional<span class="idlType"> <a data-link-for="" href="#dom-paymentcomplete" class="internalDFN" data-link-type="dfn"><code>PaymentComplete</code></a></span> <span class="idlParamName">result</span> = "unknown");</span><span data-idl="" class="idlMethod" id="idl-def-paymentresponse-retry-errorfields" data-title="retry" data-dfn-for="paymentresponse">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#NewObject">NewObject</a></span>]<span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.retry()|paymentresponse.retry|retry()|retry" href="#dom-paymentresponse-retry" class="internalDFN" data-link-type="dfn"><code>retry</code></a></span>(optional<span class="idlType"> <a data-link-for="" href="#dom-paymentvalidationerrors" class="internalDFN" data-link-type="dfn"><code>PaymentValidationErrors</code></a></span> <span class="idlParamName">errorFields</span>);</span><span data-idl="" class="idlAttribute" id="idl-def-paymentresponse-onpayerdetailchange" data-title="onpayerdetailchange" data-dfn-for="paymentresponse">

    attribute<span class="idlType"> <a href="https://html.spec.whatwg.org/multipage/#eventhandler">EventHandler</a></span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.onpayerdetailchange|onpayerdetailchange" href="#dom-paymentresponse-onpayerdetailchange" class="internalDFN" data-link-type="dfn"><code>onpayerdetailchange</code></a></span>;</span>
  };</span></pre></div>
        <div class="note" role="note" id="issue-container-generatedID-25"><div role="heading" class="note-title marker" id="h-note-25" aria-level="3"><span>Note</span></div><p class="">
          A <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a> is returned when a user has selected a payment
          method and approved a payment request.
        </p></div>
        <section id="retry-method">
          <h3 id="x14-1-retry-method"><span class="secno">14.1 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-retry" data-idl="operation" data-title="retry()" data-type="Promise" data-lt="paymentresponse.retry()|paymentresponse.retry|retry()|retry"><code>retry()</code></dfn> method
          <a class="self-link" aria-label="§" href="#retry-method"></a></h3>
          <p>
            The <code>retry(<var>errorFields</var>)</code> method <em class="rfc2119" title="MUST">MUST</em> act as
            follows:
          </p>
          <ol class="algorithm">
            <li>Let <var>response</var> be the <a data-cite-path="" href="https://dom.spec.whatwg.org/#context-object">context object</a>.
            </li>
            <li>Let <var>request</var> be
            <var>response</var>.<a href="#dfn-request" class="internalDFN" data-link-type="dfn">[[request]]</a>.
            </li>
            <li>Let <var>document</var> be <var>request</var>'s <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant
            global object</a>'s <a data-cite-path="window-object.html" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window">associated Document</a>.
            </li>
            <li>If
            <var>document</var> is not <a data-cite-path="browsers.html" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active">fully active</a>, then return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a
            promise rejected with</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>If <var>response</var>.<a href="#dfn-complete" class="internalDFN" data-link-type="dfn">[[complete]]</a> is true, return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a
            promise rejected with</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>"
            <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>If <var>response</var>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> is not null,
            return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a promise rejected with</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>"
            <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>".
            </li>
            <li>Let <var>retryPromise</var> be <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-new-promise">a new promise</a>.
            </li>
            <li>Set <var>response</var>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> to
            <var>retryPromise</var>.
            </li>
            <li>If <var>errorFields</var> was passed:
              <ol>
                <li>Optionally, show a warning in the developer console if any of
                the following are true:
                  <ol>
                    <li>
                      <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a>["<a data-link-for="PaymentOptions" href="#dom-paymentoptions-requestpayername" class="internalDFN" data-link-type="dfn"><code>requestPayerName</code></a>"] is false, and
                      <var>errorFields</var>["<a data-link-for="PaymentValidationErrors" href="#dom-paymentvalidationerrors-payer" class="internalDFN" data-link-type="dfn"><code>payer</code></a>"]["<a data-link-for="PayerErrors" href="#dom-payererrors-name" class="internalDFN" data-link-type="dfn"><code>name</code></a>"] is present.
                    </li>
                    <li>
                      <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a>["<a data-link-for="PaymentOptions" href="#dom-paymentoptions-requestpayeremail" class="internalDFN" data-link-type="dfn"><code>requestPayerEmail</code></a>"] is false, and
                      <var>errorFields</var>["<a data-link-for="PaymentValidationErrors" href="#dom-paymentvalidationerrors-payer" class="internalDFN" data-link-type="dfn"><code>payer</code></a>"]["<a data-link-for="PayerErrors" href="#dom-payererrors-email" class="internalDFN" data-link-type="dfn"><code>email</code></a>"] is present.
                    </li>
                    <li>
                      <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a>["<a data-link-for="PaymentOptions" href="#dom-paymentoptions-requestpayerphone" class="internalDFN" data-link-type="dfn"><code>requestPayerPhone</code></a>"] is false, and
                      <var>errorFields</var>["<a data-link-for="PaymentValidationErrors" href="#dom-paymentvalidationerrors-payer" class="internalDFN" data-link-type="dfn"><code>payer</code></a>"]["<a data-link-for="PayerErrors" href="#dom-payererrors-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a>"] is present.
                    </li>
                    <li>
                      <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a>["<a data-link-for="PaymentOptions" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a>"] is false, and
                      <var>errorFields</var>["<a data-link-for="PaymentValidationErrors" href="#dom-paymentvalidationerrors-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a>"] is present.
                    </li>
                  </ol>
                </li>
                <li data-link-for="PaymentValidationErrors">
                If <var>errorFields</var>["<a href="#dom-paymentvalidationerrors-paymentmethod" class="internalDFN" data-link-type="dfn"><code>paymentMethod</code></a>] member was
                passed, and if required by the specification that defines
                <var>response</var>'s <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a>, then <a data-cite-path="" href="https://infra.spec.whatwg.org/#javascript-string-convert">convert</a>
                <var>errorFields</var>'s <a href="#dom-paymentvalidationerrors-paymentmethod" class="internalDFN" data-link-type="dfn"><code>paymentMethod</code></a> member to an IDL
                value of the type specified there. Otherwise, <a data-cite-path="" href="https://infra.spec.whatwg.org/#javascript-string-convert">convert</a> to
                <a href="https://heycam.github.io/webidl/#idl-object">object</a>.
                </li>
                <li>Set <var>request</var>'s <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant browsing
                context</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean to false.
                </li>
                <li>If conversion results in a <a data-cite-path="" href="https://heycam.github.io/webidl/#dfn-exception">exception</a> <var>error</var>:
                  <ol>
                    <li>Reject <var>retryPromise</var> with <var>error</var>.
                    </li>
                    <li>Set <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a>
                    boolean to false.
                    </li>
                    <li>Return.
                    </li>
                  </ol>
                </li>
                <li data-link-for="PaymentValidationErrors">By matching the
                members of <var>errorFields</var> to input fields in the user
                agent's UI, indicate to the end user that something is wrong with
                the data of the payment response. For example, a user agent might
                draw the user's attention to the erroneous <var>errorFields</var>
                in the browser's UI and display the value of each field in a
                manner that helps the user fix each error. Similarly, if the <a href="#dom-paymentvalidationerrors-error" class="internalDFN" data-link-type="dfn"><code>
                  error</code></a> member is passed, present the error in the user
                  agent's UI. In the case where the value of a member is the
                  empty string, the user agent <em class="rfc2119" title="MAY">MAY</em> substitute a value with a
                  suitable error message.
                </li>
              </ol>
            </li>
            <li>Otherwise, if <var>errorFields</var> was not passed, signal to
            the end user to attempt to retry the payment. Re-enable any UI
            element that affords the end user the ability to retry accepting the
            payment request.
            </li>
            <li>If
            <var>document</var> stops being <a data-cite-path="browsers.html" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active">fully active</a> while the user
            interface is being shown, or no longer is by the time this step is
            reached, then:
              <ol>
                <li>Close down the user interface.
                </li>
                <li>Set <var>request</var>'s <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant browsing
                context</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean to false.
                </li>
                <li>Reject <var>retryPromise</var> with an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>"
                <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
                </li>
              </ol>
            </li>
            <li>Finally, when <var>retryPromise</var> settles, set
            <var>response</var>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> to null.
            </li>
            <li>Return <var>retryPromise</var>.
              <div class="note" role="note" id="issue-container-generatedID-26"><div role="heading" class="note-title marker" id="h-note-26" aria-level="4"><span>Note</span></div><p class="">
                The <var>retryPromise</var> will later be resolved by the <a href="#dfn-user-accepts-the-payment-request" class="internalDFN" data-link-type="dfn">user
                accepts the payment request algorithm</a>, or rejected by either
                the <a href="#dfn-user-aborts-the-payment-request" class="internalDFN" data-link-type="dfn">user aborts the payment request algorithm</a> or <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort
                the update</a>.
              </p></div>
            </li>
          </ol>
          <section data-dfn-for="PaymentValidationErrors" data-link-for="PaymentValidationErrors" id="paymentvalidationerrors-dictionary">
            <h4 id="x14-1-1-paymentvalidationerrors-dictionary"><span class="secno">14.1.1 </span>
              <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentvalidationerrors" data-idl="dictionary" data-title="PaymentValidationErrors"><code>PaymentValidationErrors</code></dfn> dictionary
            <a class="self-link" aria-label="§" href="#paymentvalidationerrors-dictionary"></a></h4>
            <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentvalidationerrors" data-title="PaymentValidationErrors">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentvalidationerrors" class="internalDFN" data-link-type="dfn"><code>PaymentValidationErrors</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentvalidationerrors-payer" data-title="payer" data-dfn-for="paymentvalidationerrors"><span class="idlType">
    <a data-link-for="" href="#dom-payererrors" class="internalDFN" data-link-type="dfn"><code>PayerErrors</code></a></span> <span class="idlName"><a data-link-for="paymentvalidationerrors" data-lt="" href="#dom-paymentvalidationerrors-payer" class="internalDFN" data-link-type="dfn"><code>payer</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentvalidationerrors-shippingaddress" data-title="shippingAddress" data-dfn-for="paymentvalidationerrors"><span class="idlType">
    <a data-link-for="" href="#dom-addresserrors" class="internalDFN" data-link-type="dfn"><code>AddressErrors</code></a></span> <span class="idlName"><a data-link-for="paymentvalidationerrors" data-lt="" href="#dom-paymentvalidationerrors-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentvalidationerrors-error" data-title="error" data-dfn-for="paymentvalidationerrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentvalidationerrors" data-lt="" href="#dom-paymentvalidationerrors-error" class="internalDFN" data-link-type="dfn"><code>error</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-paymentvalidationerrors-paymentmethod" data-title="paymentMethod" data-dfn-for="paymentvalidationerrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentvalidationerrors" data-lt="" href="#dom-paymentvalidationerrors-paymentmethod" class="internalDFN" data-link-type="dfn"><code>paymentMethod</code></a></span>;</span>
  };</span></pre></div>
            <dl>
              <dt>
                <dfn data-dfn-for="paymentvalidationerrors" data-dfn-type="dfn" id="dom-paymentvalidationerrors-payer" data-idl="field" data-title="payer" data-type="PayerErrors"><code>payer</code></dfn> member
              </dt>
              <dd>
                Validation errors related to the <a href="#dfn-payer-details" class="internalDFN" data-link-type="dfn">payer details</a>.
              </dd>
              <dt>
                <dfn data-dfn-for="paymentvalidationerrors" data-dfn-type="dfn" id="dom-paymentvalidationerrors-shippingaddress" data-idl="field" data-title="shippingAddress" data-type="AddressErrors"><code>shippingAddress</code></dfn> member
              </dt>
              <dd data-link-for="PaymentResponse">
                Represents validation errors with the <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a>'s
                <a href="#dom-paymentresponse-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a>.
              </dd>
              <dt>
                <dfn data-dfn-for="paymentvalidationerrors" data-dfn-type="dfn" id="dom-paymentvalidationerrors-error" data-idl="field" data-title="error" data-type="DOMString"><code>error</code></dfn> member
              </dt>
              <dd>
                A general description of an error with the payment from which the
                user can attempt to recover. For example, the user may recover by
                retrying the payment. A developer can optionally pass the
                <a href="#dom-paymentvalidationerrors-error" class="internalDFN" data-link-type="dfn"><code>error</code></a> member on its own to give a general overview of
                validation issues, or it can be passed in combination with other
                members of the <a href="#dom-paymentvalidationerrors" class="internalDFN" data-link-type="dfn"><code>PaymentValidationErrors</code></a> dictionary.
              </dd>
              <dt>
                <dfn data-dfn-for="paymentvalidationerrors" data-dfn-type="dfn" id="dom-paymentvalidationerrors-paymentmethod" data-idl="field" data-title="paymentMethod" data-type="object"><code>paymentMethod</code></dfn> member
              </dt>
              <dd>
                A payment method specific errors. See, for example,
                [<cite><a class="bibref" href="#bib-payment-method-basic-card">payment-method-basic-card</a></cite>]'s <a href="https://www.w3.org/TR/payment-method-basic-card/#basiccarderrors-dictionary"><code>BasicCardErrors</code></a>.
              </dd>
            </dl>
          </section>
          <section data-dfn-for="PayerErrors" data-link-for="PayerErrors" id="payererrors-dictionary">
            <h4 id="x14-1-2-payererrors-dictionary"><span class="secno">14.1.2 </span>
              <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-payererrors" data-idl="dictionary" data-title="PayerErrors"><code>PayerErrors</code></dfn> dictionary
            <a class="self-link" aria-label="§" href="#payererrors-dictionary"></a></h4>
            <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-payererrors" data-title="PayerErrors">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-payererrors" class="internalDFN" data-link-type="dfn"><code>PayerErrors</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-payererrors-email" data-title="email" data-dfn-for="payererrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="payererrors" data-lt="" href="#dom-payererrors-email" class="internalDFN" data-link-type="dfn"><code>email</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-payererrors-name" data-title="name" data-dfn-for="payererrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="payererrors" data-lt="" href="#dom-payererrors-name" class="internalDFN" data-link-type="dfn"><code>name</code></a></span>;</span><span data-idl="" class="idlMember" id="idl-def-payererrors-phone" data-title="phone" data-dfn-for="payererrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="payererrors" data-lt="" href="#dom-payererrors-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a></span>;</span>
  };</span></pre></div>
            <p>
              The <a href="#dom-payererrors" class="internalDFN" data-link-type="dfn"><code>PayerErrors</code></a> is used to represent validation errors with
              one or more <a href="#dfn-payer-details" class="internalDFN" data-link-type="dfn">payer details</a>.
            </p>
            <p>
              <dfn data-dfn-type="dfn" id="dfn-payer-details">Payer details</dfn> are any of the payer's name, payer's phone
              number, and payer's email.
            </p>
            <dl data-link-for="PaymentResponse">
              <dt>
                <dfn data-dfn-for="payererrors" data-dfn-type="dfn" id="dom-payererrors-email" data-idl="field" data-title="email" data-type="DOMString"><code>email</code></dfn> member
              </dt>
              <dd>
                Denotes that the payer's email suffers from a validation error.
                In the user agent's UI, this member corresponds to the input
                field that provided the <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a>'s
                <a href="#dom-paymentresponse-payeremail" class="internalDFN" data-link-type="dfn"><code>payerEmail</code></a> attribute's value.
              </dd>
              <dt>
                <dfn data-dfn-for="payererrors" data-dfn-type="dfn" id="dom-payererrors-name" data-idl="field" data-title="name" data-type="DOMString"><code>name</code></dfn> member
              </dt>
              <dd>
                Denotes that the payer's name suffers from a validation error. In
                the user agent's UI, this member corresponds to the input field
                that provided the <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a>'s <a href="#dom-paymentresponse-payername" class="internalDFN" data-link-type="dfn"><code>payerName</code></a>
                attribute's value.
              </dd>
              <dt>
                <dfn data-dfn-for="payererrors" data-dfn-type="dfn" id="dom-payererrors-phone" data-idl="field" data-title="phone" data-type="DOMString"><code>phone</code></dfn> member
              </dt>
              <dd>
                Denotes that the payer's phone number suffers from a validation
                error. In the user agent's UI, this member corresponds to the
                input field that provided the <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a>'s
                <a href="#dom-paymentresponse-payerphone" class="internalDFN" data-link-type="dfn"><code>payerPhone</code></a> attribute's value.
              </dd>
            </dl>
            <div class="example" id="example-12-payer-related-validation-errors">
            <div class="marker">
        <a class="self-link" href="#example-12-payer-related-validation-errors">Example 12</a><span class="example-title">: Payer-related validation errors</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> payer = {
    <span class="hljs-attr">email</span>: <span class="hljs-string">"The domain is invalid."</span>,
    <span class="hljs-attr">phone</span>: <span class="hljs-string">"Unknown country code."</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Not in database."</span>,
  };
  <span class="hljs-keyword">await</span> response.retry({ payer });</code></pre>
          </div>
          </section>
        </section>
        <section id="tojson-method-0">
          <h3 id="x14-2-tojson-method"><span class="secno">14.2 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-tojson" data-idl="operation" data-title="toJSON()" data-type="object" data-lt="paymentresponse.tojson()|paymentresponse.tojson|tojson()|tojson"><code>toJSON()</code></dfn> method
          <a class="self-link" aria-label="§" href="#tojson-method-0"></a></h3>
          <p>
            When called, runs [<cite><a class="bibref" href="#bib-webidl">WEBIDL</a></cite>]'s <a data-cite-path="" href="https://heycam.github.io/webidl/#default-tojson-operation">default toJSON operation</a>.
          </p>
        </section>
        <section id="methodname-attribute">
          <h3 id="x14-3-methodname-attribute"><span class="secno">14.3 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-methodname" data-idl="attribute" data-title="methodName" data-type="DOMString" data-lt="paymentresponse.methodname|methodname"><code>methodName</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#methodname-attribute"></a></h3>
          <p>
            The <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method identifier</a> for the <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a>
            that the user selected to fulfill the transaction.
          </p>
        </section>
        <section id="details-attribute">
          <h3 id="x14-4-details-attribute"><span class="secno">14.4 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-details" data-idl="attribute" data-title="details" data-type="object" data-lt="paymentresponse.details|details"><code>details</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#details-attribute"></a></h3>
          <p>
            An <a href="https://heycam.github.io/webidl/#idl-object">object</a> or <a data-cite-path="" href="https://heycam.github.io/webidl/#dfn-dictionary">dictionary</a>
            generated by a <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a> that a merchant can use to
            process or validate a transaction (depending on the <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment
            method</a>).
          </p>
          <div class="note" role="note" id="issue-container-generatedID-27"><div role="heading" class="note-title marker" id="h-note-27" aria-level="4"><span>Note</span></div><aside class="">
            <p>
              Each <a href="https://www.w3.org/TR/payment-method-id/#standardized-payment-method-identifiers">standardized
              payment method identifier</a>, such as <a href="https://www.w3.org/TR/payment-method-basic-card/">Payment Method: Basic Card</a> ("basic-card"), defines its own
              unique IDL <a data-cite-path="" href="https://heycam.github.io/webidl/#dfn-dictionary">dictionary</a> for use with the <a href="#dom-paymentresponse-details" class="internalDFN" data-link-type="dfn"><code>details</code></a>
              attribute. The shape of this data (i.e., its members and their
              corresponding types and formats) differs depending on which
              standardized payment method identifier is selected by the end user.
            </p>
            <p>
              Similarly, a <a href="https://www.w3.org/TR/payment-method-id/#dfn-url-based-payment-method-identifier">URL-based
              payment method identifier</a> defines the shape of <a href="#dom-paymentresponse-details" class="internalDFN" data-link-type="dfn"><code>details</code></a>.
              However, as URL-based payment method identifiers are not
              standardized by the <abbr title="World Wide Web Consortium">W3C</abbr>, developers need to consult whoever
              controls the URL for the expected shape of the <a href="#dom-paymentresponse-details" class="internalDFN" data-link-type="dfn"><code>details</code></a>
              object.
            </p>
          </aside></div>
        </section>
        <section id="shippingaddress-attribute-0">
          <h3 id="x14-5-shippingaddress-attribute"><span class="secno">14.5 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-shippingaddress" data-idl="attribute" data-title="shippingAddress" data-type="PaymentAddress" data-lt="paymentresponse.shippingaddress|shippingaddress"><code>shippingAddress</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#shippingaddress-attribute-0"></a></h3>
          <p>
            If the <a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> member was set
            to true in the <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a> passed to the
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> constructor, then <a data-lt="PaymentRequest.shippingAddress" href="#dom-paymentrequest-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a> will be the full
            and final shipping address chosen by the user.
          </p>
        </section>
        <section id="shippingoption-attribute-0">
          <h3 id="x14-6-shippingoption-attribute"><span class="secno">14.6 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-shippingoption" data-idl="attribute" data-title="shippingOption" data-type="DOMString" data-lt="paymentresponse.shippingoption|shippingoption"><code>shippingOption</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#shippingoption-attribute-0"></a></h3>
          <p>
            If the <a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> member was set
            to true in the <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a> passed to the
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> constructor, then <a data-lt="PaymentRequest.shippingOption" href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a> will be the
            <a data-lt="PaymentShippingOption.id" href="#dom-paymentshippingoption-id" class="internalDFN" data-link-type="dfn"><code>id</code></a> attribute of the
            selected shipping option.
          </p>
        </section>
        <section id="payername-attribute">
          <h3 id="x14-7-payername-attribute"><span class="secno">14.7 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-payername" data-idl="attribute" data-title="payerName" data-type="DOMString" data-lt="paymentresponse.payername|payername"><code>payerName</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#payername-attribute"></a></h3>
          <p>
            If the <a data-lt="PaymentOptions.requestPayerName" href="#dom-paymentoptions-requestpayername" class="internalDFN" data-link-type="dfn"><code>requestPayerName</code></a> member was set
            to true in the <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a> passed to the
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> constructor, then <a data-lt="PaymentResponse.payerName" href="#dom-paymentresponse-payername" class="internalDFN" data-link-type="dfn"><code>payerName</code></a> will be the name provided
            by the user.
          </p>
        </section>
        <section id="payeremail-attribute">
          <h3 id="x14-8-payeremail-attribute"><span class="secno">14.8 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-payeremail" data-idl="attribute" data-title="payerEmail" data-type="DOMString" data-lt="paymentresponse.payeremail|payeremail"><code>payerEmail</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#payeremail-attribute"></a></h3>
          <p>
            If the <a data-lt="PaymentOptions.requestPayerEmail" href="#dom-paymentoptions-requestpayeremail" class="internalDFN" data-link-type="dfn"><code>requestPayerEmail</code></a> member was
            set to true in the <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a> passed to the
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> constructor, then <a data-lt="PaymentResponse.payerEmail" href="#dom-paymentresponse-payeremail" class="internalDFN" data-link-type="dfn"><code>payerEmail</code></a> will be the email address
            chosen by the user.
          </p>
        </section>
        <section id="payerphone-attribute">
          <h3 id="x14-9-payerphone-attribute"><span class="secno">14.9 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-payerphone" data-idl="attribute" data-title="payerPhone" data-type="DOMString" data-lt="paymentresponse.payerphone|payerphone"><code>payerPhone</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#payerphone-attribute"></a></h3>
          <p>
            If the <a data-lt="PaymentOptions.requestPayerPhone" href="#dom-paymentoptions-requestpayerphone" class="internalDFN" data-link-type="dfn"><code>requestPayerPhone</code></a> member was
            set to true in the <a href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a> passed to the
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> constructor, then <a data-lt="PaymentResponse.payerPhone" href="#dom-paymentresponse-payerphone" class="internalDFN" data-link-type="dfn"><code>payerPhone</code></a> will be the phone number
            chosen by the user.
          </p>
        </section>
        <section id="requestid-attribute">
          <h3 id="x14-10-requestid-attribute"><span class="secno">14.10 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-requestid" data-idl="attribute" data-title="requestId" data-type="DOMString" data-lt="paymentresponse.requestid|requestid"><code>requestId</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#requestid-attribute"></a></h3>
          <p>
            The corresponding payment request <a data-lt="PaymentRequest.id" href="#dom-paymentrequest-id" class="internalDFN" data-link-type="dfn"><code>id</code></a> that spawned this payment response.
          </p>
        </section>
        <section data-dfn-for="PaymentResponse" data-link-for="PaymentResponse" id="complete-method">
          <h3 id="x14-11-complete-method"><span class="secno">14.11 </span>
            <dfn data-lt="complete(result)|complete()|paymentresponse.complete()|paymentresponse.complete|complete" data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-complete" data-idl="operation" data-title="complete()" data-type="Promise"><code>complete()</code></dfn> method
          <a class="self-link" aria-label="§" href="#complete-method"></a></h3>
          <div class="note" role="note" id="issue-container-generatedID-28"><div role="heading" class="note-title marker" id="h-note-28" aria-level="4"><span>Note</span></div><p class="">
            The <a href="#dom-paymentresponse-complete" class="internalDFN" data-link-type="dfn"><code>complete()</code></a> method is called after the user has accepted
            the payment request and the <a href="#dfn-acceptpromise" class="internalDFN" data-link-type="dfn">[[acceptPromise]]</a> has been
            resolved. Calling the <a href="#dom-paymentresponse-complete" class="internalDFN" data-link-type="dfn"><code>complete()</code></a> method tells the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user
            agent</a> that the payment interaction is over (and <em class="rfc2119" title="SHOULD">SHOULD</em> cause any
            remaining user interface to be closed).
          </p></div>
          <p>
            After the payment request has been accepted and the
            <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a> returned to the caller, but before the caller
            calls <a href="#dom-paymentresponse-complete" class="internalDFN" data-link-type="dfn"><code>complete()</code></a>, the payment request user interface remains
            in a pending state. At this point the user interface <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> offer
            a cancel command because acceptance of the payment request has been
            returned. However, if something goes wrong and the developer never
            calls <a href="#dom-paymentresponse-complete" class="internalDFN" data-link-type="dfn"><code>complete()</code></a> then the user interface is blocked.
          </p>
          <p>
            For this reason, implementations <em class="rfc2119" title="MAY">MAY</em> impose a timeout for developers
            to call <a href="#dom-paymentresponse-complete" class="internalDFN" data-link-type="dfn"><code>complete()</code></a>. If the timeout expires then the
            implementation will behave as if <a href="#dom-paymentresponse-complete" class="internalDFN" data-link-type="dfn"><code>complete()</code></a> was called with no
            arguments.
          </p>
          <p>
            The <a href="#dom-paymentresponse-complete" class="internalDFN" data-link-type="dfn"><code><code>complete(<var>result</var>)</code></code></a> method <em class="rfc2119" title="MUST">MUST</em> act
            as follows:
          </p>
          <ol class="algorithm">
            <li>Let <var>response</var> be the <a data-cite-path="" href="https://dom.spec.whatwg.org/#context-object">context object</a>.
            </li>
            <li>If <var>response</var>.<a href="#dfn-complete" class="internalDFN" data-link-type="dfn">[[complete]]</a> is true, return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a
            promise rejected with</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>"
            <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>If
            <var>response</var>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> is not null, return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">
              a promise rejected with</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>"
              <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>Let <var>promise</var> be <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-new-promise">a new promise</a>.
            </li>
            <li>Set <var>response</var>.<a href="#dfn-complete" class="internalDFN" data-link-type="dfn">[[complete]]</a> to true.
            </li>
            <li>Return <var>promise</var> and perform the remaining steps <a data-cite-path="infrastructure.html" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in
            parallel</a>.
            </li>
            <li>If <var>document</var> stops being <a data-cite-path="browsers.html" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active">fully active</a> while the
            user interface is being shown, or no longer is by the time this step
            is reached, then:
              <ol>
                <li>Close down the user interface.
                </li>
                <li>Set <var>request</var>'s <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant browsing
                context</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean to false.
                </li>
                <li>Reject <var>promise</var> with an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>"
                <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
                </li>
              </ol>
            </li>
            <li>Otherwise:
              <ol>
                <li>Close down any remaining user interface. The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user
                agent</a> <em class="rfc2119" title="MAY">MAY</em> use the value <var>result</var> to influence the
                user experience.
                </li>
                <li>Set <var>request</var>'s <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant browsing
                context</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean to false.
                </li>
                <li>Resolve <var>promise</var> with undefined.
                </li>
              </ol>
            </li>
          </ol>
        </section>
        <section data-dfn-for="PaymentResponse" data-link-for="PaymentResponse" id="onpayerdetailchange-attribute">
          <h3 id="x14-12-onpayerdetailchange-attribute"><span class="secno">14.12 </span>
            <dfn data-dfn-for="paymentresponse" data-dfn-type="dfn" id="dom-paymentresponse-onpayerdetailchange" data-idl="attribute" data-title="onpayerdetailchange" data-type="EventHandler" data-lt="paymentresponse.onpayerdetailchange|onpayerdetailchange"><code>onpayerdetailchange</code></dfn> attribute
          <a class="self-link" aria-label="§" href="#onpayerdetailchange-attribute"></a></h3>
          <p>
            Allows a developer to handle "<a href="#dfn-payerdetailchange" class="internalDFN" data-link-type="dfn"><code>payerdetailchange</code></a>" events.
          </p>
        </section>
        <section id="internal-slots-1">
          <h3 id="x14-13-internal-slots"><span class="secno">14.13 </span>
            Internal Slots
          <a class="self-link" aria-label="§" href="#internal-slots-1"></a></h3>
          <p>
            Instances of <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a> are created with the internal
            slots in the following table:
          </p>
          <table>
            <tbody><tr>
              <th>
                Internal Slot
              </th>
              <th>
                Description (<em>non-normative</em>)
              </th>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-complete">[[complete]]</dfn>
              </td>
              <td data-link-for="PaymentResponse">
                Is true if the request for payment has completed (i.e.,
                <a href="#dom-paymentresponse-complete" class="internalDFN" data-link-type="dfn"><code>complete()</code></a> was called, or there was a fatal error that
                made the response not longer usable), or false otherwise.
              </td>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-request">[[request]]</dfn>
              </td>
              <td>
                The <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> instance that instantiated this
                <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a>.
              </td>
            </tr>
            <tr>
              <td>
                <dfn data-dfn-type="dfn" id="dfn-retrypromise">[[retryPromise]]</dfn>
              </td>
              <td>
                Null, or a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a> that resolves when a <a href="#dfn-user-accepts-the-payment-request" class="internalDFN" data-link-type="dfn">user accepts
                the payment request</a> or rejects if the <a href="#dfn-user-aborts-the-payment-request" class="internalDFN" data-link-type="dfn">user aborts the
                payment request</a>.
              </td>
            </tr>
          </tbody></table>
        </section>
      </section>
      <section class="informative" id="paymentrequest-and-iframe-elements">
        <!--OddPage--><h2 id="x15-paymentrequest-and-iframe-elements"><span class="secno">15. </span>
          <code>PaymentRequest</code> and <code>iframe</code> elements
        <a class="self-link" aria-label="§" href="#paymentrequest-and-iframe-elements"></a></h2><p><em>This section is non-normative.</em></p>
        <p>
          To indicate that a cross-origin <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"><code>iframe</code></a> is allowed to invoke the
          payment request API, the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowpaymentrequest"><code>allowpaymentrequest</code></a> attribute can be
          specified on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"><code>iframe</code></a> element. See <a href="#feature-policy" class="sec-ref"><span class="secno">§&nbsp;16.</span> <span class="sec-title">Feature Policy integration</span></a> for details of how <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowpaymentrequest"><code>allowpaymentrequest</code></a>
          and <a href="https://wicg.github.io/feature-policy/">Feature Policy</a> interact.
        </p>
      </section>
      <section id="feature-policy" data-cite="feature-policy">
        <!--OddPage--><h2 id="x16-feature-policy-integration"><span class="secno">16. </span>
          Feature Policy integration
        <a class="self-link" aria-label="§" href="#feature-policy"></a></h2>
        <p>
          This specification defines a policy-controlled feature identified by
          the string "<code><dfn data-lt="payment-feature|payment" data-nodefault="" data-dfn-type="dfn" id="dfn-payment-feature">payment</dfn></code>". Its <a data-cite-path="" href="https://wicg.github.io/feature-policy/#default-allowlist">default allowlist</a> is
          '<code>self</code>'.
        </p>
        <div class="note" role="note" id="issue-container-generatedID-29"><div role="heading" class="note-title marker" id="h-note-29" aria-level="3"><span>Note</span></div><div class="">
          <p>
            A <a data-cite-path="" href="https://dom.spec.whatwg.org/#concept-document">document</a>’s <a data-cite-path="dom.html" href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-feature-policy">feature
            policy</a> determines whether any content in that document is allowed
            to construct <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> instances. If disabled in any
            document, no content in the document will be <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use">allowed to use</a>
            the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> constructor (trying to create an instance
            will throw).
          </p>
          <p>
            The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowpaymentrequest"><code>allowpaymentrequest</code></a> attribute of the HTML <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"><code>iframe</code></a>
            element affects the <a data-cite-path="" href="https://wicg.github.io/feature-policy/#container-policy">container policy</a> for any document nested
            in that iframe. Unless overridden by the <code><a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow">allow</a></code>
            attribute, setting <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowpaymentrequest"><code>allowpaymentrequest</code></a> on an iframe is
            equivalent to <code>&lt;iframe allow="fullscreen *"&gt;</code>, as
            described in <a href="https://wicg.github.io/feature-policy/#iframe-allowpaymentrequest-attribute">Feature Policy
            §allowpaymentrequest</a>.
          </p>
        </div></div>
      </section>
      <section id="events">
        <!--OddPage--><h2 id="x17-events"><span class="secno">17. </span>
          Events
        <a class="self-link" aria-label="§" href="#events"></a></h2>
        <section class="informative" id="summary">
          <h3 id="x17-1-summary"><span class="secno">17.1 </span>
            Summary
          <a class="self-link" aria-label="§" href="#summary"></a></h3><p><em>This section is non-normative.</em></p>
          <table>
            <tbody><tr>
              <th>
                Event name
              </th>
              <th>
                Interface
              </th>
              <th>
                Dispatched when…
              </th>
              <th>
                Target
              </th>
            </tr>
            <tr>
              <td>
                <code><dfn data-dfn-type="dfn" id="dfn-merchantvalidation">merchantvalidation</dfn></code>
              </td>
              <td>
                <a href="#dom-merchantvalidationevent" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEvent</code></a>
              </td>
              <td>
                The user agent requires the merchant to perform merchant
                validation.
              </td>
              <td>
                <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>
              </td>
            </tr>
            <tr>
              <td>
                <code><dfn data-dfn-type="dfn" id="dfn-shippingaddresschange">shippingaddresschange</dfn></code>
              </td>
              <td>
                <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a>
              </td>
              <td>
                The user provides a new shipping address.
              </td>
              <td>
                <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>
              </td>
            </tr>
            <tr>
              <td>
                <code><dfn data-dfn-type="dfn" id="dfn-shippingoptionchange">shippingoptionchange</dfn></code>
              </td>
              <td>
                <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a>
              </td>
              <td>
                The user chooses a new shipping option.
              </td>
              <td>
                <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>
              </td>
            </tr>
            <tr>
              <td>
                <code><dfn data-dfn-type="dfn" id="dfn-payerdetailchange">payerdetailchange</dfn></code>
              </td>
              <td>
                <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a>
              </td>
              <td>
                The user changes the payer name, the payer email, or the payer
                phone (see <a href="#dfn-payer-detail-changed-algorithm" class="internalDFN" data-link-type="dfn">payer detail changed algorithm</a>).
              </td>
              <td>
                <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a>
              </td>
            </tr>
            <tr>
              <td>
                <code><dfn data-dfn-type="dfn" id="dfn-paymentmethodchange">paymentmethodchange</dfn></code>
              </td>
              <td>
                <a href="#dom-paymentmethodchangeevent" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEvent</code></a>
              </td>
              <td>
                The user chooses a different <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a> within a
                <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a>.
              </td>
              <td>
                <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>
              </td>
            </tr>
          </tbody></table>
        </section>
        <section data-dfn-for="MerchantValidationEvent" data-link-for="MerchantValidationEvent" id="merchantvalidationevent-interface">
          <h3 id="x17-2-merchantvalidationevent-interface"><span class="secno">17.2 </span>
            <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-merchantvalidationevent" data-idl="interface" data-title="MerchantValidationEvent"><code>MerchantValidationEvent</code></dfn> interface
          <a class="self-link" aria-label="§" href="#merchantvalidationevent-interface"></a></h3>
          <div><pre class="def idl"><span data-idl="" class="idlInterface" id="idl-def-merchantvalidationevent" data-title="MerchantValidationEvent">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-for="" href="#dom-merchantvalidationeventinit" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEventInit</code></a></span> <span class="idlParamName">eventInitDict</span>)</span>,
  <span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=Window</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-merchantvalidationevent" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEvent</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#event"><code>Event</code></a></span> {<span data-idl="" class="idlAttribute" id="idl-def-merchantvalidationevent-methodname" data-title="methodName" data-dfn-for="merchantvalidationevent">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="merchantvalidationevent" data-lt="merchantvalidationevent.methodname|methodname" href="#dom-merchantvalidationevent-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-merchantvalidationevent-validationurl" data-title="validationURL" data-dfn-for="merchantvalidationevent">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlName"><a data-link-for="merchantvalidationevent" data-lt="merchantvalidationevent.validationurl|validationurl" href="#dom-merchantvalidationevent-validationurl" class="internalDFN" data-link-type="dfn"><code>validationURL</code></a></span>;</span><span data-idl="" class="idlMethod" id="idl-def-merchantvalidationevent-complete-merchantsessionpromise" data-title="complete" data-dfn-for="merchantvalidationevent"><span class="idlType">
    void</span> <span class="idlName"><a data-link-for="merchantvalidationevent" data-lt="merchantvalidationevent.complete()|merchantvalidationevent.complete|complete()|complete" href="#dom-merchantvalidationevent-complete" class="internalDFN" data-link-type="dfn"><code>complete</code></a></span>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-any">any</a>&gt;</span> <span class="idlParamName">merchantSessionPromise</span>);</span>
  };</span></pre></div>
          <section id="methodname-attribute-0">
            <h4 id="x17-2-1-methodname-attribute"><span class="secno">17.2.1 </span>
              <dfn data-dfn-for="merchantvalidationevent" data-dfn-type="dfn" id="dom-merchantvalidationevent-methodname" data-idl="attribute" data-title="methodName" data-type="DOMString" data-lt="merchantvalidationevent.methodname|methodname"><code>methodName</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#methodname-attribute-0"></a></h4>
            <p data-link-for="MerchantValidationEventInit">
              When getting, returns the value it was initialized with. See
              <a href="#dom-merchantvalidationeventinit-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a> member of <a href="#dom-merchantvalidationeventinit" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEventInit</code></a> for
              more information.
            </p>
          </section>
          <section id="merchantvalidationevent-constructor">
            <h4 id="x17-2-2-merchantvalidationevent-constructor"><span class="secno">17.2.2 </span>
              <dfn data-lt="merchantvalidationevent.merchantvalidationevent()|merchantvalidationevent constructor" data-dfn-type="dfn" id="dfn-merchantvalidationevent-merchantvalidationevent"><code>MerchantValidationEvent</code>
              constructor</dfn>
            <a class="self-link" aria-label="§" href="#merchantvalidationevent-constructor"></a></h4>
            <p>
              The <a data-cite-path="" href="https://dom.spec.whatwg.org/#concept-event-constructor-ext">event constructing steps</a>, which take a
              <a href="#dom-merchantvalidationevent" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEvent</code></a> <var>event</var>, are as follows:
            </p>
            <ol class="algorithm">
              <li>Let <var>base</var> be the <a data-lt="context object" data-link-type="dfn" href="https://dom.spec.whatwg.org/#event"><code>event</code></a>’s <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant settings object</a>’s <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url">
                API base URL</a>.
              </li>
              <li data-link-for="MerchantValidationEventInit">Let
              <var>validationURL</var> be the result of <a data-lt="URL parser" data-cite-path="" href="https://url.spec.whatwg.org/#concept-url-parser">
                URL parsing</a> <var>eventInitDict</var>["<a href="#dom-merchantvalidationeventinit-validationurl" class="internalDFN" data-link-type="dfn"><code>validationURL</code></a>"]
                and <var>base</var>.
              </li>
              <li>If <var>validationURL</var> is failure, throw a
              <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"><code>TypeError</code></a>.
              </li>
              <li>Initialize <var>event</var>.<a href="#dom-merchantvalidationevent-validationurl" class="internalDFN" data-link-type="dfn"><code>validationURL</code></a> attribute to
              <var>validationURL</var>.
              </li>
              <li>If <var>eventInitDict</var>["<a href="#dom-merchantvalidationevent-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a>"] is not the
              empty string, run the steps to <a href="https://www.w3.org/TR/payment-method-id/#dfn-validate-a-payment-method-identifier">validate
              a payment method identifier</a> with
              <var>eventInitDict</var>["<a href="#dom-merchantvalidationevent-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a>"]. If it returns false,
              then throw a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror"><code>RangeError</code></a> exception. Optionally, inform the
              developer that the payment method identifier is invalid.
              </li>
              <li>Initialize <var>event</var>.<a href="#dom-merchantvalidationevent-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a> attribute to
              <var>eventInitDict</var>["<a href="#dom-merchantvalidationevent-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a>"].
              </li>
              <li>Initialize <var>event</var>.<a data-lt="mechvalidation.waitForUpdate" href="#dfn-mechvalidation-waitforupdate" class="internalDFN" data-link-type="dfn">[[waitForUpdate]]</a> to false.
              </li>
            </ol>
          </section>
          <section id="validationurl-attribute">
            <h4 id="x17-2-3-validationurl-attribute"><span class="secno">17.2.3 </span>
              <dfn data-dfn-for="merchantvalidationevent" data-dfn-type="dfn" id="dom-merchantvalidationevent-validationurl" data-idl="attribute" data-title="validationURL" data-type="USVString" data-lt="merchantvalidationevent.validationurl|validationurl"><code>validationURL</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#validationurl-attribute"></a></h4>
            <p>
              A <a data-cite-path="" href="https://url.spec.whatwg.org/#concept-url">URL</a> from which a developer can fetch
              <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a>-specific verification data. By then passing
              that data (or a promise that resolves with that data) to
              <a href="#dom-merchantvalidationevent-complete" class="internalDFN" data-link-type="dfn"><code>complete()</code></a>, the user agent can verify that the payment
              request is from an authorized merchant.
            </p>
            <p>
              When getting, returns the value it was <a href="https://dom.spec.whatwg.org/#inner-event-creation-steps">initialized</a> with.
            </p>
          </section>
          <section id="complete-method-0">
            <h4 id="x17-2-4-complete-method"><span class="secno">17.2.4 </span>
              <dfn data-dfn-for="merchantvalidationevent" data-dfn-type="dfn" id="dom-merchantvalidationevent-complete" data-idl="operation" data-title="complete()" data-type="void" data-lt="merchantvalidationevent.complete()|merchantvalidationevent.complete|complete()|complete"><code>complete()</code></dfn> method
            <a class="self-link" aria-label="§" href="#complete-method-0"></a></h4>
            <p>
              The <a href="#dom-merchantvalidationevent" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEvent</code></a>'s
              <code>complete(<var>merchantSessionPromise</var>)</code> method
              <em class="rfc2119" title="MUST">MUST</em> act as follows:
            </p>
            <ol class="algorithm">
              <li>Let <var>event</var> be the <a data-cite-path="" href="https://dom.spec.whatwg.org/#context-object">context object</a>.
              </li>
              <li>If <var>event</var>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#dom-event-istrusted"><code>isTrusted</code></a> attribute is false, then
              <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
              </li>
              <li>If <var>event</var>.<a data-lt="mechvalidation.waitForUpdate" href="#dfn-mechvalidation-waitforupdate" class="internalDFN" data-link-type="dfn">[[waitForUpdate]]</a> is true, then
              <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
              </li>
              <li>Let <var>request</var> be <var>event</var>'s <a href="https://dom.spec.whatwg.org/#event-target">target</a>.
              </li>
              <li>If <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is not
              "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>", then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an
              "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
              </li>
              <li>If <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> is true, then
              <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
              </li>
              <li>Set <var>event</var>'s <a data-cite-path="" href="https://dom.spec.whatwg.org/#stop-propagation-flag">stop propagation flag</a> and <a data-cite-path="" href="https://dom.spec.whatwg.org/#stop-immediate-propagation-flag">stop
              immediate propagation flag</a>.
              </li>
              <li>Set <var>event</var>.<a data-lt="mechvalidation.waitForUpdate" href="#dfn-mechvalidation-waitforupdate" class="internalDFN" data-link-type="dfn">[[waitForUpdate]]</a> to true.
              </li>
              <li>Run the <a href="#dfn-validate-merchant-s-details-algorithm" class="internalDFN" data-link-type="dfn">validate merchant's details algorithm</a> with <var>
                merchantSessionPromise</var> and <var>request</var>.
              </li>
            </ol>
          </section>
          <section id="internal-slots-2">
            <h4 id="x17-2-5-internal-slots"><span class="secno">17.2.5 </span>
              Internal Slots
            <a class="self-link" aria-label="§" href="#internal-slots-2"></a></h4>
            <p>
              Instances of <a href="#dom-merchantvalidationevent" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEvent</code></a> are created with the
              internal slots in the following table:
            </p>
            <table>
              <tbody><tr>
                <th>
                  Internal Slot
                </th>
                <th>
                  Description (<em>non-normative</em>)
                </th>
              </tr>
              <tr>
                <td>
                  <dfn data-lt-nodefault="" data-lt="mechvalidation.waitforupdate" data-dfn-type="dfn" id="dfn-mechvalidation-waitforupdate">[[waitForUpdate]]</dfn>
                </td>
                <td>
                  A boolean indicating whether a <a href="#dom-merchantvalidationevent-complete" class="internalDFN" data-link-type="dfn"><code>complete()</code></a>-initiated
                  update is currently in progress.
                </td>
              </tr>
            </tbody></table>
          </section>
          <section data-dfn-for="MerchantValidationEventInit" data-link-for="MerchantValidationEventInit" id="merchantvalidationeventinit-dictionary">
            <h4 id="x17-2-6-merchantvalidationeventinit-dictionary"><span class="secno">17.2.6 </span>
              <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-merchantvalidationeventinit" data-idl="dictionary" data-title="MerchantValidationEventInit"><code>MerchantValidationEventInit</code></dfn> dictionary
            <a class="self-link" aria-label="§" href="#merchantvalidationeventinit-dictionary"></a></h4>
            <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-merchantvalidationeventinit" data-title="MerchantValidationEventInit">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-merchantvalidationeventinit" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEventInit</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#dictdef-eventinit"><code>EventInit</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-merchantvalidationeventinit-methodname" data-title="methodName" data-dfn-for="merchantvalidationeventinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="merchantvalidationeventinit" data-lt="" href="#dom-merchantvalidationeventinit-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a></span> = "";</span><span data-idl="" class="idlMember" id="idl-def-merchantvalidationeventinit-validationurl" data-title="validationURL" data-dfn-for="merchantvalidationeventinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlName"><a data-link-for="merchantvalidationeventinit" data-lt="" href="#dom-merchantvalidationeventinit-validationurl" class="internalDFN" data-link-type="dfn"><code>validationURL</code></a></span> = "";</span>
  };</span></pre></div>
            <dl>
              <dt>
                <dfn data-dfn-for="merchantvalidationeventinit" data-dfn-type="dfn" id="dom-merchantvalidationeventinit-methodname" data-idl="field" data-title="methodName" data-type="DOMString"><code>methodName</code></dfn> member
              </dt>
              <dd>
                A <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method identifier</a> representing the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment
                handler</a> that is requiring <a href="#dfn-validate-the-merchant" class="internalDFN" data-link-type="dfn">merchant validation</a>.
              </dd>
              <dt>
                <dfn data-dfn-for="merchantvalidationeventinit" data-dfn-type="dfn" id="dom-merchantvalidationeventinit-validationurl" data-idl="field" data-title="validationURL" data-type="USVString"><code>validationURL</code></dfn> member
              </dt>
              <dd>
                A URL from which a developer would fetch <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment
                handler</a>-specific verification data.
              </dd>
            </dl>
          </section>
        </section>
        <section data-dfn-for="PaymentMethodChangeEvent" data-link-for="PaymentMethodChangeEvent" id="paymentmethodchangeevent-interface">
          <h3 id="x17-3-paymentmethodchangeevent-interface"><span class="secno">17.3 </span>
            <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentmethodchangeevent" data-idl="interface" data-title="PaymentMethodChangeEvent"><code>PaymentMethodChangeEvent</code></dfn> interface
          <a class="self-link" aria-label="§" href="#paymentmethodchangeevent-interface"></a></h3>
          <div><pre class="def idl"><span data-idl="" class="idlInterface" id="idl-def-paymentmethodchangeevent" data-title="PaymentMethodChangeEvent">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-for="" href="#dom-paymentmethodchangeeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEventInit</code></a></span> <span class="idlParamName">eventInitDict</span>)</span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=Window</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentmethodchangeevent" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEvent</code></a></span> : <span class="idlSuperclass"><a data-link-for="" href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a></span> {<span data-idl="" class="idlAttribute" id="idl-def-paymentmethodchangeevent-methodname" data-title="methodName" data-dfn-for="paymentmethodchangeevent">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentmethodchangeevent" data-lt="paymentmethodchangeevent.methodname|methodname" href="#dom-paymentmethodchangeevent-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a></span>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentmethodchangeevent-methoddetails" data-title="methodDetails" data-dfn-for="paymentmethodchangeevent">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-object">object</a>?</span> <span class="idlName"><a data-link-for="paymentmethodchangeevent" data-lt="paymentmethodchangeevent.methoddetails|methoddetails" href="#dom-paymentmethodchangeevent-methoddetails" class="internalDFN" data-link-type="dfn"><code>methodDetails</code></a></span>;</span>
  };</span></pre></div>
          <section id="methoddetails-attribute">
            <h4 id="x17-3-1-methoddetails-attribute"><span class="secno">17.3.1 </span>
              <dfn data-dfn-for="paymentmethodchangeevent" data-dfn-type="dfn" id="dom-paymentmethodchangeevent-methoddetails" data-idl="attribute" data-title="methodDetails" data-type="object" data-lt="paymentmethodchangeevent.methoddetails|methoddetails"><code>methodDetails</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#methoddetails-attribute"></a></h4>
            <p data-link-for="PaymentMethodChangeEventInit">
              When getting, returns the value it was initialized with. See
              <a href="#dom-paymentmethodchangeeventinit-methoddetails" class="internalDFN" data-link-type="dfn"><code>methodDetails</code></a> member of <a href="#dom-paymentmethodchangeeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEventInit</code></a>
              for more information.
            </p>
          </section>
          <section id="methodname-attribute-1">
            <h4 id="x17-3-2-methodname-attribute"><span class="secno">17.3.2 </span>
              <dfn data-dfn-for="paymentmethodchangeevent" data-dfn-type="dfn" id="dom-paymentmethodchangeevent-methodname" data-idl="attribute" data-title="methodName" data-type="DOMString" data-lt="paymentmethodchangeevent.methodname|methodname"><code>methodName</code></dfn> attribute
            <a class="self-link" aria-label="§" href="#methodname-attribute-1"></a></h4>
            <p data-link-for="PaymentMethodChangeEventInit">
              When getting, returns the value it was initialized with. See
              <a href="#dom-paymentmethodchangeeventinit-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a> member of <a href="#dom-paymentmethodchangeeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEventInit</code></a> for
              more information.
            </p>
          </section>
          <section data-dfn-for="PaymentMethodChangeEventInit" data-link-for="PaymentMethodChangeEventInit" id="paymentmethodchangeeventinit-dictionary">
            <h4 id="x17-3-3-paymentmethodchangeeventinit-dictionary"><span class="secno">17.3.3 </span>
              <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentmethodchangeeventinit" data-idl="dictionary" data-title="PaymentMethodChangeEventInit"><code>PaymentMethodChangeEventInit</code></dfn> dictionary
            <a class="self-link" aria-label="§" href="#paymentmethodchangeeventinit-dictionary"></a></h4>
            <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentmethodchangeeventinit" data-title="PaymentMethodChangeEventInit">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentmethodchangeeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEventInit</code></a></span> : <span class="idlSuperclass"><a data-link-for="" href="#dom-paymentrequestupdateeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEventInit</code></a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentmethodchangeeventinit-methodname" data-title="methodName" data-dfn-for="paymentmethodchangeeventinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentmethodchangeeventinit" data-lt="" href="#dom-paymentmethodchangeeventinit-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a></span> = "";</span><span data-idl="" class="idlMember" id="idl-def-paymentmethodchangeeventinit-methoddetails" data-title="methodDetails" data-dfn-for="paymentmethodchangeeventinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-object">object</a>?</span> <span class="idlName"><a data-link-for="paymentmethodchangeeventinit" data-lt="" href="#dom-paymentmethodchangeeventinit-methoddetails" class="internalDFN" data-link-type="dfn"><code>methodDetails</code></a></span> = null;</span>
  };</span></pre></div>
            <dl>
              <dt>
                <dfn data-dfn-for="paymentmethodchangeeventinit" data-dfn-type="dfn" id="dom-paymentmethodchangeeventinit-methodname" data-idl="field" data-title="methodName" data-type="DOMString"><code>methodName</code></dfn> member
              </dt>
              <dd>
                A string representing the <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method identifier</a>.
              </dd>
              <dt>
                <dfn data-dfn-for="paymentmethodchangeeventinit" data-dfn-type="dfn" id="dom-paymentmethodchangeeventinit-methoddetails" data-idl="field" data-title="methodDetails" data-type="object"><code>methodDetails</code></dfn> member
              </dt>
              <dd>
                An object representing some data from the payment method, or
                null.
              </dd>
            </dl>
          </section>
        </section>
        <section data-dfn-for="PaymentRequestUpdateEvent" data-link-for="PaymentRequestUpdateEvent" id="paymentrequestupdateevent-interface">
          <h3 id="x17-4-paymentrequestupdateevent-interface"><span class="secno">17.4 </span>
            <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentrequestupdateevent" data-idl="interface" data-title="PaymentRequestUpdateEvent"><code>PaymentRequestUpdateEvent</code></dfn> interface
          <a class="self-link" aria-label="§" href="#paymentrequestupdateevent-interface"></a></h3>
          <div><pre class="def idl"><span data-idl="" class="idlInterface" id="idl-def-paymentrequestupdateevent" data-title="PaymentRequestUpdateEvent">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-for="" href="#dom-paymentrequestupdateeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEventInit</code></a></span> <span class="idlParamName">eventInitDict</span>)</span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=Window</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#event"><code>Event</code></a></span> {<span data-idl="" class="idlMethod" id="idl-def-paymentrequestupdateevent-updatewith-detailspromise" data-title="updateWith" data-dfn-for="paymentrequestupdateevent"><span class="idlType">
    void</span> <span class="idlName"><a data-link-for="paymentrequestupdateevent" data-lt="updatewith(detailspromise)|updatewith()|paymentrequestupdateevent.updatewith()|paymentrequestupdateevent.updatewith|updatewith" href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code>updateWith</code></a></span>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a data-link-for="" href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a>&gt;</span> <span class="idlParamName">detailsPromise</span>);</span>
  };</span></pre></div>
          <p>
            The <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a> enables developers to update the
            details of the payment request in response to a user interaction.
          </p>
          <section id="constructor-0">
            <h4 id="x17-4-1-constructor"><span class="secno">17.4.1 </span>
              <dfn data-lt="paymentrequestupdateevent.paymentrequestupdateevent()|constructor" data-dfn-type="dfn" id="dfn-paymentrequestupdateevent-paymentrequestupdateevent">Constructor</dfn>
            <a class="self-link" aria-label="§" href="#constructor-0"></a></h4>
            <p>
              The <a data-lt="PaymentRequestUpdateEvent" href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent(<var>type</var>,
              <var>eventInitDict</var>)</code></a> constructor <em class="rfc2119" title="MUST">MUST</em> act as
              follows:
            </p>
            <ol class="algorithm">
              <li>Let <var>event</var> be the result of <a href="https://dom.spec.whatwg.org/#concept-event-constructor">constructing</a> a
              <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a> instance with <var>type</var> and
              <var>eventInitDict</var>.
              </li>
              <li>Set <var>event</var>.<a href="#dfn-waitforupdate" class="internalDFN" data-link-type="dfn">[[waitForUpdate]]</a> to false.
              </li>
              <li>Return <var>event</var>.
              </li>
            </ol>
          </section>
          <section id="updatewith-method">
            <h4 id="x17-4-2-updatewith-method"><span class="secno">17.4.2 </span>
              <dfn data-lt="updatewith(detailspromise)|updatewith()|paymentrequestupdateevent.updatewith()|paymentrequestupdateevent.updatewith|updatewith" data-dfn-for="paymentrequestupdateevent" data-dfn-type="dfn" id="dom-paymentrequestupdateevent-updatewith" data-idl="operation" data-title="updateWith()" data-type="void"><code>updateWith()</code></dfn> method
            <a class="self-link" aria-label="§" href="#updatewith-method"></a></h4>
            <div class="note" role="note" id="issue-container-generatedID-30"><div role="heading" class="note-title marker" id="h-note-30" aria-level="5"><span>Note</span></div><aside class="">
              <p>
                If a developer wants to update the payment request, then they
                need to call <a href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code>updateWith()</code></a> and provide a
                <a href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a> dictionary, or a promise for one,
                containing changed values that the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> presents to
                the user.
              </p>
              <p>
                To prevent the user interface from blocking (and to reflect
                changes made by the end user through the UI), developers need to
                immediately call <a href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code>updateWith()</code></a>.
              </p>
              <div class="example" id="example-12-how-to-use-updatewith-correctly">
            <div class="marker">
        <a class="self-link" href="#example-12-how-to-use-updatewith-correctly">Example</a><span class="example-title">: how to use `updateWith()` correctly.</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-comment">// ❌ Bad - this won't work!</span>
  request.onshippingaddresschange = <span class="hljs-keyword">async</span> ev =&gt; {
    <span class="hljs-comment">// await goes to next tick, and updateWith()</span>
    <span class="hljs-comment">// was not called.</span>
    <span class="hljs-keyword">const</span> details = <span class="hljs-keyword">await</span> getNewDetails(oldDetails);
    <span class="hljs-comment">// 💥 So it's now too late! updateWith()</span>
    <span class="hljs-comment">// throws "InvalidStateError".</span>
    ev.updateWith(details);
  };

  <span class="hljs-comment">// ✅ Good - UI will wait.</span>
  request.onshippingaddresschange = <span class="hljs-function"><span class="hljs-params">ev</span> =&gt;</span> {
    <span class="hljs-comment">// Calling updateWith() with a promise is ok 👍</span>
    <span class="hljs-keyword">const</span> promiseForNewDetails = getNewDetails(oldDetails);
    ev.updateWith(promiseForNewDetails);
  };</code></pre>
          </div>
              <p>
                Additionally, <a href="#dfn-waitforupdate" class="internalDFN" data-link-type="dfn">[[waitForUpdate]]</a> prevents reuse of
                <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a>.
              </p>
              <div class="example" id="example-12-can-only-call-updatewith-once">
            <div class="marker">
        <a class="self-link" href="#example-12-can-only-call-updatewith-once">Example</a><span class="example-title">: can only call `updateWith()` once</span>
      </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-comment">// ❌ Bad - calling updateWith() twice doesn't work!</span>
  request.addEventListener(<span class="hljs-string">"shippingaddresschange"</span>, ev =&gt; {
    ev.updateWith(details); <span class="hljs-comment">// this is ok.</span>
    <span class="hljs-comment">// 💥 [[waitForUpdate]] is true, throws "InvalidStateError".</span>
    ev.updateWith(otherDetails);
  });

  <span class="hljs-comment">// ❌ Bad - this won't work either!</span>
  request.addEventListener(<span class="hljs-string">"shippingaddresschange"</span>, <span class="hljs-keyword">async</span> ev =&gt; {
    <span class="hljs-keyword">const</span> p = <span class="hljs-built_in">Promise</span>.resolve({ ...details });
    ev.updateWith(p);
    <span class="hljs-keyword">await</span> p;
    <span class="hljs-comment">// 💥 Only one call to updateWith() is allowed,</span>
    <span class="hljs-comment">// so the following throws "InvalidStateError"</span>
    ev.updateWith({ ...newDetails });
  });</code></pre>
          </div>
            </aside></div>
            <p>
              The <a href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code><code>updateWith(<var>detailsPromise</var>)</code></code></a>
              method <em class="rfc2119" title="MUST">MUST</em> act as follows:
            </p>
            <ol class="algorithm">
              <li>Let <var>event</var> be this <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a>
              instance.
              </li>
              <li>If <var>event</var>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#dom-event-istrusted"><code>isTrusted</code></a> attribute is false, then
              <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
              </li>
              <li>If <var>event</var>.<a href="#dfn-waitforupdate" class="internalDFN" data-link-type="dfn">[[waitForUpdate]]</a> is true, then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">
                throw</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
              </li>
              <li>If <var>event</var>'s <a href="https://dom.spec.whatwg.org/#event-target">target</a> is an instance of
              <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a>, let <var>request</var> be
              <var>event</var>'s <a href="https://dom.spec.whatwg.org/#event-target">target</a>.<a href="#dfn-request" class="internalDFN" data-link-type="dfn">[[request]]</a>.
              </li>
              <li>Otherwise, let <var>request</var> be the value of
              <var>event</var>'s <a href="https://dom.spec.whatwg.org/#event-target">target</a>.
              </li>
              <li class="assert">Assert: <var>request</var> is an instance of
              <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>.
              </li>
              <li>If <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is not
              "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>", then <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an
              "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
              </li>
              <li>If <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> is true, then
              <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror"><code>InvalidStateError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
              </li>
              <li>Set <var>event</var>'s <a data-cite-path="" href="https://dom.spec.whatwg.org/#stop-propagation-flag">stop propagation flag</a> and <a data-cite-path="" href="https://dom.spec.whatwg.org/#stop-immediate-propagation-flag">stop
              immediate propagation flag</a>.
              </li>
              <li>Set <var>event</var>.<a href="#dfn-waitforupdate" class="internalDFN" data-link-type="dfn">[[waitForUpdate]]</a> to true.
              </li>
              <li>Let <var>pmi</var> be null.
              </li>
              <li>If <var>event</var> has a <a data-link-for="PaymentMethodChangeEvent" href="#dom-paymentmethodchangeevent-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a> attribute, set
              <var>pmi</var> to the <a data-link-for="PaymentMethodChangeEvent" href="#dom-paymentmethodchangeevent-methodname" class="internalDFN" data-link-type="dfn"><code>
                methodName</code></a> attribute's value.
              </li>
              <li>Run the <a href="#dfn-update-a-paymentrequest-s-details-algorithm" class="internalDFN" data-link-type="dfn">update a <code>PaymentRequest</code>'s details
              algorithm</a> with <var>detailsPromise</var>, <var>request</var>,
              and <var>pmi</var>.
              </li>
            </ol>
          </section>
          <section id="internal-slots-3">
            <h4 id="x17-4-3-internal-slots"><span class="secno">17.4.3 </span>
              Internal Slots
            <a class="self-link" aria-label="§" href="#internal-slots-3"></a></h4>
            <p>
              Instances of <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a> are created with the
              internal slots in the following table:
            </p>
            <table>
              <tbody><tr>
                <th>
                  Internal Slot
                </th>
                <th>
                  Description (<em>non-normative</em>)
                </th>
              </tr>
              <tr>
                <td>
                  <dfn data-dfn-type="dfn" id="dfn-waitforupdate">[[waitForUpdate]]</dfn>
                </td>
                <td>
                  A boolean indicating whether an <a href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code>updateWith()</code></a>-initiated
                  update is currently in progress.
                </td>
              </tr>
            </tbody></table>
          </section>
          <section id="paymentrequestupdateeventinit-dictionary">
            <h4 id="x17-4-4-paymentrequestupdateeventinit-dictionary"><span class="secno">17.4.4 </span>
              <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-paymentrequestupdateeventinit" data-idl="dictionary" data-title="PaymentRequestUpdateEventInit"><code>PaymentRequestUpdateEventInit</code></dfn> dictionary
            <a class="self-link" aria-label="§" href="#paymentrequestupdateeventinit-dictionary"></a></h4>
            <div><pre class="def idl"><span data-idl="" class="idlDictionary" id="idl-def-paymentrequestupdateeventinit" data-title="PaymentRequestUpdateEventInit">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentrequestupdateeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEventInit</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#dictdef-eventinit"><code>EventInit</code></a></span> {};</span></pre></div>
          </section>
        </section>
      </section>
      <section id="algorithms">
        <!--OddPage--><h2 id="x18-algorithms"><span class="secno">18. </span>
          Algorithms
        <a class="self-link" aria-label="§" href="#algorithms"></a></h2>
        <p>
          When the internal slot <a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> of a <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>
          object is set to "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>", the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> will
          trigger the following algorithms based on user interaction.
        </p>
        <section id="merchant-validation">
          <h3 id="x18-1-merchant-validation"><span class="secno">18.1 </span>
            Merchant validation
          <a class="self-link" aria-label="§" href="#merchant-validation"></a></h3>
          <p>
            <dfn data-lt="validate the merchant|merchant validation" data-dfn-type="dfn" id="dfn-validate-the-merchant">Merchant validation</dfn> is the
            process by which a <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> validates the identity of a
            merchant against some <var>value</var> (usually some cryptographic
            challenge response). Validated merchants are allowed to interface
            with a <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a>. Details of how actual validation is
            performed is outside the scope of this specification.
          </p>
          <p>
            It is <em class="rfc2119" title="OPTIONAL">OPTIONAL</em> for a <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> to support <a href="#dfn-validate-the-merchant" class="internalDFN" data-link-type="dfn">merchant
            validation</a>.
          </p>
          <p>
            For <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment methods</a> that support <a href="#dfn-validate-the-merchant" class="internalDFN" data-link-type="dfn">merchant validation</a>,
            the user agent runs the <dfn data-dfn-type="dfn" id="dfn-request-merchant-validation-algorithm">request merchant validation
            algorithm</dfn>. The algorithm takes a <a href="https://heycam.github.io/webidl/#idl-USVString"><code>USVString</code></a>
            <var>merchantSpecificURL</var>, provided by the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment
            handler</a>:
          </p>
          <ol class="algorithm">
            <li>Let <var>request</var> be the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> object that
            the user is interacting with.
            </li>
            <li>Let <var>validationURL</var> be a <a data-cite-path="" href="https://url.spec.whatwg.org/#absolute-url-string">absolute-URL string</a> from
            which a developer can fetch <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a>-specific
            verification data.
            </li>
            <li>Let <var>methodName</var> be the <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method identifier</a>
            for the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> that is requiring <a href="#dfn-validate-the-merchant" class="internalDFN" data-link-type="dfn">merchant
            validation</a>.
            </li>
            <li>
              <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user interaction task source</a> to
              run the following steps:
              <ol data-link-for="MerchantValidationEventInit">
                <li class="assert">Assert: <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> is false.
                </li>
                <li class="assert">Assert: <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is
                "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>".
                </li>
                <li>Let <var>eventInitDict</var> be an new
                <a href="#dom-merchantvalidationeventinit" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEventInit</code></a> dictionary.
                </li>
                <li>Set <var>eventInitDict</var>["<a href="#dom-merchantvalidationeventinit-validationurl" class="internalDFN" data-link-type="dfn"><code>validationURL</code></a>"] to <var>
                  validationURL</var>.
                </li>
                <li>Set <var>eventInitDict</var>["<a href="#dom-merchantvalidationeventinit-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a>"] to
                <var>methodName</var>.
                </li>
                <li>Let <var>event</var> be the result of <a data-lt="constructor" href="#dfn-paymentrequestupdateevent-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn">constructing</a> a <a href="#dom-merchantvalidationevent" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEvent</code></a>
                with "<a href="#dfn-merchantvalidation" class="internalDFN" data-link-type="dfn"><code>merchantvalidation</code></a>" and <var>eventInitDict</var>.
                </li>
                <li>Initialize <var>event</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#dom-event-istrusted"><code><code>isTrusted</code></code></a>
                attribute to true.
                </li>
                <li>
                  <a data-cite-path="" href="https://dom.spec.whatwg.org/#concept-event-dispatch">Dispatch</a> <var>event</var> to <var>request</var>.
                </li>
              </ol>
            </li>
          </ol>
        </section>
        <section id="shipping-address-changed-algorithm">
          <h3 id="x18-2-shipping-address-changed-algorithm"><span class="secno">18.2 </span>
            Shipping address changed algorithm
          <a class="self-link" aria-label="§" href="#shipping-address-changed-algorithm"></a></h3>
          <p>
            The <dfn data-dfn-type="dfn" id="dfn-shipping-address-changed-algorithm">shipping address changed algorithm</dfn> runs when the user
            provides a new shipping address. It <em class="rfc2119" title="MUST">MUST</em> run the following steps:
          </p>
          <ol class="algorithm">
            <li>Let <var>request</var> be the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> object that
            the user is interacting with.
            </li>
            <li>
              <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user interaction task source</a> to
              run the following steps:
              <ol>
                <li>
                  <div class="note" role="note" id="issue-container-generatedID-31"><div role="heading" class="note-title marker" id="h-note-31" aria-level="4"><span>Note</span><span class="issue-label">: Privacy of recipient information</span></div><div class="">
                    <p>
                      The <var>redactList</var> limits the amount of personal
                      information about the recipient that the API shares with
                      the merchant.
                    </p>
                    <p>
                      For merchants, the resulting <a href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a> object
                      provides enough information to, for example, calculate
                      shipping costs, but, in most cases, not enough information
                      to physically locate and uniquely identify the recipient.
                    </p>
                    <p>
                      Unfortunately, even with the <var>redactList</var>,
                      recipient anonymity cannot be assured. This is because in
                      some countries postal codes are so fine-grained that they
                      can uniquely identify a recipient.
                    </p>
                  </div></div>
                </li>
                <li>Let <var>redactList</var> be the empty list. Set
                <var>redactList</var> to « "organization", "phone", "recipient",
                "addressLine" ».
                </li>
                <li>Let <var>address</var> be the result of running the steps to
                <a href="#dfn-create-a-paymentaddress-from-user-provided-input" class="internalDFN" data-link-type="dfn">create a <code>PaymentAddress</code> from user-provided
                input</a> with <var>redactList</var>.
                </li>
                <li>Set the <a data-lt="PaymentRequest.shippingAddress" href="#dom-paymentrequest-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a> attribute on
                <var>request</var> to <var>address</var>.
                </li>
                <li>Run the <a href="#dfn-paymentrequest-updated-algorithm" class="internalDFN" data-link-type="dfn">PaymentRequest updated algorithm</a> with
                <var>request</var> and "<a href="#dfn-shippingaddresschange" class="internalDFN" data-link-type="dfn"><code>shippingaddresschange</code></a>".
                </li>
              </ol>
            </li>
          </ol>
        </section>
        <section id="shipping-option-changed-algorithm">
          <h3 id="x18-3-shipping-option-changed-algorithm"><span class="secno">18.3 </span>
            Shipping option changed algorithm
          <a class="self-link" aria-label="§" href="#shipping-option-changed-algorithm"></a></h3>
          <p>
            The <dfn data-dfn-type="dfn" id="dfn-shipping-option-changed-algorithm">shipping option changed algorithm</dfn> runs when the user
            chooses a new shipping option. It <em class="rfc2119" title="MUST">MUST</em> run the following steps:
          </p>
          <ol class="algorithm">
            <li>Let <var>request</var> be the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> object that
            the user is interacting with.
            </li>
            <li>
              <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user interaction task source</a> to
              run the following steps:
              <ol>
                <li>Set the <a data-lt="PaymentRequest.shippingOption" href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a> attribute on
                <var>request</var> to the <code>id</code> string of the
                <a href="#dom-paymentshippingoption" class="internalDFN" data-link-type="dfn"><code>PaymentShippingOption</code></a> provided by the user.
                </li>
                <li>Run the <a href="#dfn-paymentrequest-updated-algorithm" class="internalDFN" data-link-type="dfn">PaymentRequest updated algorithm</a> with
                <var>request</var> and "<a href="#dfn-shippingoptionchange" class="internalDFN" data-link-type="dfn"><code>shippingoptionchange</code></a>".
                </li>
              </ol>
            </li>
          </ol>
        </section>
        <section id="payment-method-changed-algorithm">
          <h3 id="x18-4-payment-method-changed-algorithm"><span class="secno">18.4 </span>
            Payment method changed algorithm
          <a class="self-link" aria-label="§" href="#payment-method-changed-algorithm"></a></h3>
          <p data-cite="WEBIDL">
            A <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> <em class="rfc2119" title="MAY">MAY</em> run the <dfn data-dfn-type="dfn" id="dfn-payment-method-changed-algorithm">payment method changed
            algorithm</dfn> when the user changes <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a> with
            <var>methodDetails</var>, which is a <a data-cite-path="" href="https://heycam.github.io/webidl/#dfn-dictionary">dictionary</a> or an
            <a href="https://heycam.github.io/webidl/#idl-object">object</a> or null, and a
            <var>methodName</var>, which is a DOMString that represents the
            <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method identifier</a> of the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> the
            user is interacting with.
          </p>
          <div class="note" role="note" id="issue-container-generatedID-32"><div role="heading" class="note-title marker" id="h-note-32" aria-level="4"><span>Note</span><span class="issue-label">: Privacy of information shared by paymentmethodchange event</span></div><p class="">
            When the user selects or changes a payment method (e.g., a credit
            card), the <a href="#dom-paymentmethodchangeevent" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEvent</code></a> includes redacted billing
            address information for the purpose of performing tax calculations.
            Redacted attributes include, but are not limited to, <a href="#dfn-address-line" class="internalDFN" data-link-type="dfn">address
            line</a>, <a href="#dfn-dependent-locality" class="internalDFN" data-link-type="dfn">dependent locality</a>, <a href="#dfn-organization" class="internalDFN" data-link-type="dfn">organization</a>, <a href="#dfn-phone-number" class="internalDFN" data-link-type="dfn">phone
            number</a>, and <a href="#dfn-recipient" class="internalDFN" data-link-type="dfn">recipient</a>.
          </p></div>
          <ol class="algorithm">
            <li>Let <var>request</var> be the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> object that
            the user is interacting with.
            </li>
            <li>
              <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user interaction task source</a> to
              run the following steps:
              <ol>
                <li class="assert">Assert: <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> is false.
                Only one update can take place at a time.
                </li>
                <li class="assert">Assert: <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is
                "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>".
                </li>
                <li data-link-for="PaymentMethodChangeEvent">
                  <a data-cite-path="" href="https://dom.spec.whatwg.org/#concept-event-fire">Fire an event</a> named "<a href="#dfn-paymentmethodchange" class="internalDFN" data-link-type="dfn"><code>paymentmethodchange</code></a>" at
                  <var>request</var> using <a href="#dom-paymentmethodchangeevent" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEvent</code></a>, with
                  its <a href="#dom-paymentmethodchangeevent-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a> attribute initialized to
                  <var>methodName</var>, and its <a href="#dom-paymentmethodchangeevent-methoddetails" class="internalDFN" data-link-type="dfn"><code>methodDetails</code></a> attribute
                  initialized to <var>methodDetails</var>.
                </li>
              </ol>
            </li>
          </ol>
        </section>
        <section id="paymentrequest-updated-algorithm">
          <h3 id="x18-5-paymentrequest-updated-algorithm"><span class="secno">18.5 </span>
            PaymentRequest updated algorithm
          <a class="self-link" aria-label="§" href="#paymentrequest-updated-algorithm"></a></h3>
          <p>
            The <dfn data-dfn-type="dfn" id="dfn-paymentrequest-updated-algorithm">PaymentRequest updated algorithm</dfn> is run by other
            algorithms above to <a data-cite-path="" href="https://dom.spec.whatwg.org/#concept-event-fire">fire an event</a> to indicate that a user has
            made a change to a <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> called <var>request</var>
            with an event name of <var>name</var>:
          </p>
          <ol class="algorithm">
            <li class="assert">Assert: <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> is false. Only
            one update can take place at a time.
            </li>
            <li class="assert">Assert: <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is
            "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>".
            </li>
            <li>Let <var>event</var> be the result of <a data-cite-path="" href="https://dom.spec.whatwg.org/#concept-event-create">creating an event</a>
            using the <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a> interface.
            </li>
            <li>Initialize <var>event</var>'s <code><a href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> attribute to <var>name</var>.
            </li>
            <li>
              <a data-cite-path="" href="https://dom.spec.whatwg.org/#concept-event-dispatch">Dispatch</a> <var>event</var> at <var>request</var>.
            </li>
            <li data-link-for="PaymentRequestUpdateEvent">If
            <var>event</var>.<a href="#dfn-waitforupdate" class="internalDFN" data-link-type="dfn">[[waitForUpdate]]</a> is true, disable any part
            of the user interface that could cause another update event to be
            fired.
            </li>
          </ol>
        </section>
        <section id="payer-detail-changed-algorithm">
          <h3 id="x18-6-payer-detail-changed-algorithm"><span class="secno">18.6 </span>
            Payer detail changed algorithm
          <a class="self-link" aria-label="§" href="#payer-detail-changed-algorithm"></a></h3>
          <p>
            The user agent <em class="rfc2119" title="MUST">MUST</em> run the <dfn data-dfn-type="dfn" id="dfn-payer-detail-changed-algorithm">payer detail changed algorithm</dfn>
            when the user changes the <var>payer name</var>, or the <var>payer
            email</var>, or the <var>payer phone</var> in the user interface:
          </p>
          <ol class="algorithm">
            <li>Let <var>request</var> be the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> object that
            the user is interacting with.
            </li>
            <li>If <var>request</var>.<a href="#dfn-response" class="internalDFN" data-link-type="dfn">[[response]]</a> is null, return.
            </li>
            <li>Let <var>response</var> be
            <var>request</var>.<a href="#dfn-response" class="internalDFN" data-link-type="dfn">[[response]]</a>.
            </li>
            <li>
              <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user interaction task source</a> to
              run the following steps:
              <ol data-link-for="PaymentResponse">
                <li class="assert">Assert: <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> is false.
                </li>
                <li class="assert">Assert: <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is
                "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>".
                </li>
                <li>Let <var>options</var> be
                <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a>.
                </li>
                <li>If <var>payer name</var> changed and
                <var>options</var>.<a data-link-for="PaymentOptions" href="#dom-paymentoptions-requestpayername" class="internalDFN" data-link-type="dfn"><code>requestPayerName</code></a> is true:
                  <ol>
                    <li>Set <var>response</var>'s <a href="#dom-paymentresponse-payername" class="internalDFN" data-link-type="dfn"><code>payerName</code></a> attribute to
                    <var>payer name</var>.
                    </li>
                  </ol>
                </li>
                <li>If <var>payer email</var> changed and
                <var>options</var>.<a data-link-for="PaymentOptions" href="#dom-paymentoptions-requestpayeremail" class="internalDFN" data-link-type="dfn"><code>requestPayerEmail</code></a> is true:
                  <ol>
                    <li>Set <var>response</var>'s <a href="#dom-paymentresponse-payeremail" class="internalDFN" data-link-type="dfn"><code>payerEmail</code></a> attribute to
                    <var>payer email</var>.
                    </li>
                  </ol>
                </li>
                <li>If <var>payer phone</var> changed and
                <var>options</var>.<a data-link-for="PaymentOptions" href="#dom-paymentoptions-requestpayerphone" class="internalDFN" data-link-type="dfn"><code>requestPayerPhone</code></a> is true:
                  <ol>
                    <li>Set <var>response</var>'s <a href="#dom-paymentresponse-payerphone" class="internalDFN" data-link-type="dfn"><code>payerPhone</code></a> attribute to
                    <var>payer phone</var>.
                    </li>
                  </ol>
                </li>
                <li>Let <var>event</var> be the result of <a data-cite-path="" href="https://dom.spec.whatwg.org/#concept-event-create">creating an
                event</a> using <a href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a>.
                </li>
                <li>Initialize <var>event</var>'s <code><a href="https://dom.spec.whatwg.org/#dom-event-type">type</a></code> attribute to
                "<a href="#dfn-payerdetailchange" class="internalDFN" data-link-type="dfn"><code>payerdetailchange</code></a>".
                </li>
                <li>
                  <a data-cite-path="" href="https://dom.spec.whatwg.org/#concept-event-dispatch">Dispatch</a> <var>event</var> at <var>response</var>.
                </li>
                <li data-link-for="PaymentRequestUpdateEvent">If
                <var>event</var>.<a href="#dfn-waitforupdate" class="internalDFN" data-link-type="dfn">[[waitForUpdate]]</a> is true, disable any
                part of the user interface that could cause another change to the
                payer details to be fired.
                </li>
              </ol>
            </li>
          </ol>
        </section>
        <section id="user-accepts-the-payment-request-algorithm">
          <h3 id="x18-7-user-accepts-the-payment-request-algorithm"><span class="secno">18.7 </span>
            User accepts the payment request algorithm
          <a class="self-link" aria-label="§" href="#user-accepts-the-payment-request-algorithm"></a></h3>
          <p>
            The <dfn data-lt="user accepts the payment request|user accepts the payment request algorithm" data-dfn-type="dfn" id="dfn-user-accepts-the-payment-request">user accepts the
            payment request algorithm</dfn> runs when the user accepts the
            payment request and confirms that they want to pay. It <em class="rfc2119" title="MUST">MUST</em> <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue
            a task</a> on the <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user interaction task source</a> to perform the
            following steps:
          </p>
          <ol class="algorithm">
            <li>Let <var>request</var> be the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> object that
            the user is interacting with.
            </li>
            <li>If the <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> is true, then
            terminate this algorithm and take no further action. The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user
            agent</a> user interface <em class="rfc2119" title="SHOULD">SHOULD</em> ensure that this never occurs.
            </li>
            <li>If <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is not
            "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>", then terminate this algorithm and take no
            further action. The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> user interface <em class="rfc2119" title="SHOULD">SHOULD</em> ensure
            that this never occurs.
            </li>
            <li>If the <a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> value of
            <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a> is true, then if the
            <a data-lt="PaymentRequest.shippingAddress" href="#dom-paymentrequest-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a>
            attribute of <var>request</var> is null or if the <a data-lt="PaymentRequest.shippingOption" href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a> attribute of <var>
              request</var> is null, then terminate this algorithm and take no
              further action. The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="SHOULD">SHOULD</em> ensure that this never
              occurs.
            </li>
            <li>Let <var>isRetry</var> be true if
            <var>request</var>.<a href="#dfn-response" class="internalDFN" data-link-type="dfn">[[response]]</a> is not null, false otherwise.
            </li>
            <li>Let <var>response</var> be
            <var>request</var>.<a href="#dfn-response" class="internalDFN" data-link-type="dfn">[[response]]</a> if <var>isRetry</var> is
            true, or a new <a href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a> otherwise.
            </li>
            <li>If <var>isRetry</var> if false, initialize the newly created
            <var>response</var>:
              <ol>
                <li>Set <var>response</var>.<a href="#dfn-request" class="internalDFN" data-link-type="dfn">[[request]]</a> to
                <var>request</var>.
                </li>
                <li>Set <var>response</var>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> to null.
                </li>
                <li>Set <var>response</var>.<a href="#dfn-complete" class="internalDFN" data-link-type="dfn">[[complete]]</a> to false.
                </li>
                <li>Set the <a data-lt="PaymentResponse.requestId" href="#dom-paymentresponse-requestid" class="internalDFN" data-link-type="dfn"><code>requestId</code></a>
                attribute value of <var>response</var> to the value of
                <var>request</var>.<a href="#dfn-details" class="internalDFN" data-link-type="dfn">[[details]]</a>.<a data-lt="PaymentDetailsInit.id" href="#dom-paymentdetailsinit-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>.
                </li>
                <li>Set <var>request</var>.<a href="#dfn-response" class="internalDFN" data-link-type="dfn">[[response]]</a> to
                <var>response</var>.
                </li>
              </ol>
            </li>
            <li>Let <var>handler</var> be the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> selected by
            the user.
            </li>
            <li>Set the <a data-lt="PaymentResponse.methodName" href="#dom-paymentresponse-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a>
            attribute value of <var>response</var> to the <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method
            identifier</a> of <var>handler</var>.
            </li>
            <li>Set the <a data-lt="PaymentResponse.details" href="#dom-paymentresponse-details" class="internalDFN" data-link-type="dfn"><code>details</code></a>
            attribute value of <var>response</var> to an object resulting from
            running the <var>handler</var>'s <a href="#dfn-steps-to-respond-to-a-payment-request" class="internalDFN" data-link-type="dfn">steps to respond to a payment
            request</a>.
            </li>
            <li>If the <a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> value of
            <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a> is false, then set the
            <a data-lt="PaymentResponse.shippingAddress" href="#dom-paymentresponse-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a>
            attribute value of <var>response</var> to null. Otherwise:
              <ol>
                <li>Let <var>redactList</var> be the empty <a data-cite-path="" href="https://infra.spec.whatwg.org/#list">list</a>.
                </li>
                <li>Let <var>shippingAddress</var> be the result of <a href="#dfn-create-a-paymentaddress-from-user-provided-input" class="internalDFN" data-link-type="dfn">create a
                <code>PaymentAddress</code> from user-provided input</a> with
                <var>redactList</var>.
                </li>
                <li>Set the <a data-lt="PaymentResponse.shippingAddress" href="#dom-paymentresponse-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a> attribute
                value of <var>response</var> to <var>shippingAddress</var>.
                </li>
                <li>Set the <a data-lt="PaymentRequest.shippingAddress" href="#dom-paymentrequest-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a> attribute
                value of <var>request</var> to <var>shippingAddress</var>.
                </li>
              </ol>
            </li>
            <li>If the <a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> value of
            <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a> is true, then set the
            <a data-lt="PaymentResponse.shippingOption" href="#dom-paymentresponse-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a>
            attribute of <var>response</var> to the value of the <a data-lt="PaymentRequest.shippingOption" href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a> attribute of <var>
              request</var>. Otherwise, set it to null.
            </li>
            <li>If the <a data-lt="PaymentOptions.requestPayerName" href="#dom-paymentoptions-requestpayername" class="internalDFN" data-link-type="dfn"><code>requestPayerName</code></a> value of <var>
              request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a> is true, then set the <a data-lt="PaymentResponse.payerName" href="#dom-paymentresponse-payername" class="internalDFN" data-link-type="dfn"><code>payerName</code></a> attribute of
              <var>response</var> to the payer's name provided by the user, or to
              null if none was provided. Otherwise, set it to null.
            </li>
            <li>If the <a data-lt="PaymentOptions.requestPayerEmail" href="#dom-paymentoptions-requestpayeremail" class="internalDFN" data-link-type="dfn"><code>requestPayerEmail</code></a> value of
            <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a> is true, then set the
            <a data-lt="PaymentResponse.payerEmail" href="#dom-paymentresponse-payeremail" class="internalDFN" data-link-type="dfn"><code>payerEmail</code></a> attribute of
            <var>response</var> to the payer's email address provided by the
            user, or to null if none was provided. Otherwise, set it to null.
            </li>
            <li>If the <a data-lt="PaymentOptions.requestPayerPhone" href="#dom-paymentoptions-requestpayerphone" class="internalDFN" data-link-type="dfn"><code>requestPayerPhone</code></a> value of
            <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a> is true, then set the
            <a data-lt="PaymentResponse.payerPhone" href="#dom-paymentresponse-payerphone" class="internalDFN" data-link-type="dfn"><code>payerPhone</code></a> attribute of
            <var>response</var> to the payer's phone number provided by the user,
            or to null if none was provided. When setting the <a data-lt="PaymentResponse.payerPhone" href="#dom-paymentresponse-payerphone" class="internalDFN" data-link-type="dfn"><code>payerPhone</code></a> value, the user agent
            <em class="rfc2119" title="SHOULD">SHOULD</em> format the phone number to adhere to [<cite><a class="bibref" href="#bib-e.164">E.164</a></cite>].
            </li>
            <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>".
            </li>
            <li>If <var>isRetry</var> is true, resolve
            <var>response</var>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> with undefined.
            Otherwise, resolve <var>request</var>.<a href="#dfn-acceptpromise" class="internalDFN" data-link-type="dfn">[[acceptPromise]]</a> with
            <var>response</var>.
            </li>
          </ol>
        </section>
        <section id="user-aborts-the-payment-request-algorithm">
          <h3 id="x18-8-user-aborts-the-payment-request-algorithm"><span class="secno">18.8 </span>
            User aborts the payment request algorithm
          <a class="self-link" aria-label="§" href="#user-aborts-the-payment-request-algorithm"></a></h3>
          <p>
            The <dfn data-lt="user aborts the payment request|user aborts the payment request algorithm" data-dfn-type="dfn" id="dfn-user-aborts-the-payment-request">user aborts the
            payment request algorithm</dfn> runs when the user aborts the payment
            request through the currently interactive user interface. It <em class="rfc2119" title="MUST">MUST</em>
            <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> on the <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user interaction task source</a> to
            perform the following steps:
          </p>
          <ol class="algorithm">
            <li>Let <var>request</var> be the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> object that
            the user is interacting with.
            </li>
            <li>If <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> is not
            "<a href="#dfn-interactive" class="internalDFN" data-link-type="dfn">interactive</a>", then terminate this algorithm and take no
            further action. The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> user interface <em class="rfc2119" title="SHOULD">SHOULD</em> ensure
            that this never occurs.
            </li>
            <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>".
            </li>
            <li>Set <var>request</var>'s <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant browsing
            context</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean to false.
            </li>
            <li>Let <var>error</var> be an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>"
            <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
            </li>
            <li>Let <var>response</var> be
            <var>request</var>.<a href="#dfn-response" class="internalDFN" data-link-type="dfn">[[response]]</a>.
            </li>
            <li>If <var>response</var> is not null:
              <ol>
                <li>Set <var>response</var>.<a href="#dfn-complete" class="internalDFN" data-link-type="dfn">[[complete]]</a> to true.
                </li>
                <li class="assert">Assert: <var>response</var>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> is not
                null.
                </li>
                <li>Reject <var>response</var>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> with
                <var>error</var>.
                </li>
              </ol>
            </li>
            <li>Otherwise, reject <var>request</var>.<a href="#dfn-acceptpromise" class="internalDFN" data-link-type="dfn">[[acceptPromise]]</a>
            with <var>error</var>.
            </li>
            <li>Abort the current user interaction and close down any remaining
            user interface.
            </li>
          </ol>
        </section>
        <section id="update-a-paymentrequest-s-details-algorithm">
          <h3 id="x18-9-update-a-paymentrequest-s-details-algorithm"><span class="secno">18.9 </span>
            Update a <code>PaymentRequest</code>'s details algorithm
          <a class="self-link" aria-label="§" href="#update-a-paymentrequest-s-details-algorithm"></a></h3>
          <p>
            The <dfn data-dfn-type="dfn" id="dfn-update-a-paymentrequest-s-details-algorithm">update a <code>PaymentRequest</code>'s details
            algorithm</dfn> takes a <a href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a>
            <var>detailsPromise</var>, a <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>
            <var>request</var>, and <var>pmi</var> that is either a DOMString or
            null (a <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method identifier</a>). The steps are conditional
            on the <var>detailsPromise</var> settling. If
            <var>detailsPromise</var> never settles then the payment request is
            blocked. The user agent <em class="rfc2119" title="SHOULD">SHOULD</em> provide the user with a means to abort
            a payment request. Implementations <em class="rfc2119" title="MAY">MAY</em> choose to implement a timeout
            for pending updates if <var>detailsPromise</var> doesn't settle in a
            reasonable amount of time.
          </p>
          <p>
            In the case where a timeout occurs, or the user manually aborts, or
            the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> decides to abort this particular payment,
            the user agent <em class="rfc2119" title="MUST">MUST</em> run the <a href="#dfn-user-aborts-the-payment-request" class="internalDFN" data-link-type="dfn">user aborts the payment request
            algorithm</a>.
          </p>
          <ol class="algorithm">
            <li>Set <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> to true.
            </li>
            <li>
              <a data-cite-path="infrastructure.html" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">In parallel</a>, disable the user interface that allows the user
              to accept the payment request. This is to ensure that the payment
              is not accepted until the user interface is updated with any new
              details.
            </li>
            <li>
              <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#upon-rejection">Upon rejection</a> of <var>detailsPromise</var>:
              <ol>
                <li>
                  <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">Abort the update</a> with <var>request</var> and an
                  "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
                </li>
              </ol>
            </li>
            <li>
              <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#upon-fulfillment">Upon fulfillment</a> of <var>detailsPromise</var> with value
              <var>value</var>:
              <ol data-link-for="PaymentDetailsBase">
                <li>Let <var>details</var> be the result of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value">converting</a>
                <var>value</var> to a <a href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a> dictionary. If
                this <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throws</a> an exception, <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the update</a> with
                <var>request</var> and with the thrown exception.
                </li>
                <li>Let <var>serializedModifierData</var> be an empty list.
                </li>
                <li>Let <var>selectedShippingOption</var> be null.
                </li>
                <li>Let <var>shippingOptions</var> be an empty
                <code><a data-cite-path="" href="https://heycam.github.io/webidl/#idl-sequence">sequence</a></code>&lt;<a href="#dom-paymentshippingoption" class="internalDFN" data-link-type="dfn"><code>PaymentShippingOption</code></a>&gt;.
                </li>
                <li>Validate and canonicalize the details:
                  <ol>
                    <li data-link-for="PaymentDetailsUpdate">If the <a href="#dom-paymentdetailsupdate-total" class="internalDFN" data-link-type="dfn"><code>total</code></a>
                    member of <var>details</var> is present, then:
                      <ol>
                        <li>
                          <a href="#dfn-check-and-canonicalize-total-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize total amount</a>
                          <var>details</var>.<a href="#dom-paymentdetailsupdate-total" class="internalDFN" data-link-type="dfn"><code>total</code></a>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>. If an exception is
                          thrown, then <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the update</a> with
                          <var>request</var> and that exception.
                        </li>
                      </ol>
                    </li>
                    <li>If the <a href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a> member of <var>details</var>
                    is present, then for each <var>item</var> in
                    <var>details</var>.<a href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a>:
                      <ol>
                        <li>
                          <a href="#dfn-check-and-canonicalize-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize amount</a>
                          <var>item</var>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>. If an exception is
                          thrown, then <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the update</a> with
                          <var>request</var> and that exception.
                        </li>
                      </ol>
                    </li>
                    <li>If the <a href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a> member of
                    <var>details</var> is present, and
                    <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a>.<a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> is true,
                    then:
                      <ol>
                        <li>Let <var>seenIDs</var> be an empty set.
                        </li>
                        <li>For each <var>option</var> in
                        <var>details</var>.<a href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a>:
                          <ol>
                            <li>
                              <a href="#dfn-check-and-canonicalize-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize amount</a>
                              <var>option</var>.<a data-lt="PaymentShippingOption.amount" href="#dom-paymentshippingoption-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>. If an
                              exception is thrown, then <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the update</a>
                              with <var>request</var> and that exception.
                            </li>
                            <li>
                            If <var>seenIDs</var>[<var>option</var>.<a data-lt="PaymentShippingOption.id" href="#dom-paymentshippingoption-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>] exists, then
                            <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the update</a> with <var>request</var> and a
                            <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"><code>TypeError</code></a>.
                            </li>
                            <li>Append <var>option</var>.<a data-lt="PaymentShippingOption.id" href="#dom-paymentshippingoption-id" class="internalDFN" data-link-type="dfn"><code>id</code></a> to
                            <var>seenIDs</var>.
                            </li>
                            <li>Append <var>option</var> to
                            <var>shippingOptions</var>.
                            </li>
                            <li>If <var>option</var>.<a data-lt="PaymentShippingOption.selected" href="#dom-paymentshippingoption-selected" class="internalDFN" data-link-type="dfn"><code>selected</code></a> is
                            true, then set <var>selectedShippingOption</var> to
                            <var>option</var>.<a data-lt="PaymentShippingOption.id" href="#dom-paymentshippingoption-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>.
                            </li>
                          </ol>
                        </li>
                      </ol>
                    </li>
                    <li>If the <a href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a> member of <var>details</var> is
                    present, then:
                      <ol>
                        <li>Let <var>modifiers</var> be the sequence
                        <var>details</var>.<a href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a>.
                        </li>
                        <li>Let <var>serializedModifierData</var> be an empty
                        list.
                        </li>
                        <li>For each <a href="#dom-paymentdetailsmodifier" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsModifier</code></a>
                        <var>modifier</var> in <var>modifiers</var>:
                          <ol data-link-for="PaymentDetailsModifier">
                            <li>
                            Run the steps to <a href="https://www.w3.org/TR/payment-method-id/#dfn-validate-a-payment-method-identifier">
                              validate a payment method identifier</a> with
                              <var>modifier</var>.<a data-lt="PaymentDetailsModifier.supportedMethods" href="#dom-paymentdetailsmodifier-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a>.
                              If it returns false, then <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the update</a>
                              with <var>request</var> and a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror"><code>RangeError</code></a>
                              exception. Optionally, inform the developer that
                              the payment method identifier is invalid.
                            </li>
                            <li>If the <a href="#dom-paymentdetailsmodifier-total" class="internalDFN" data-link-type="dfn"><code>total</code></a> member of <var>modifier</var>
                            is present, then:
                              <ol>
                                <li>
                                  <a href="#dfn-check-and-canonicalize-total-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize total amount</a>
                                  <var>modifier</var>.<a href="#dom-paymentdetailsmodifier-total" class="internalDFN" data-link-type="dfn"><code>total</code></a>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>. If an
                                  exception is thrown, then <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the
                                  update</a> with <var>request</var> and that
                                  exception.
                                </li>
                              </ol>
                            </li>
                            <li>If the <a href="#dom-paymentdetailsmodifier-additionaldisplayitems" class="internalDFN" data-link-type="dfn"><code>additionalDisplayItems</code></a> member of
                            <var>modifier</var> is present, then for each
                            <a href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a> <var>item</var> in
                            <var>modifier</var>.<a href="#dom-paymentdetailsmodifier-additionaldisplayitems" class="internalDFN" data-link-type="dfn"><code>additionalDisplayItems</code></a>:
                              <ol>
                                <li>
                                  <a href="#dfn-check-and-canonicalize-amount" class="internalDFN" data-link-type="dfn">Check and canonicalize amount</a>
                                  <var>item</var>.<a data-lt="PaymentItem.amount" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a>. If an
                                  exception is thrown, then <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the
                                  update</a> with <var>request</var> and that
                                  exception.
                                </li>
                              </ol>
                            </li>
                            <li>If the <a data-lt="PaymentDetailsModifier.data" href="#dom-paymentdetailsmodifier-data" class="internalDFN" data-link-type="dfn"><code>
                              data</code></a> member of <var>modifier</var> is missing,
                              let <var>serializedData</var> be null. Otherwise,
                              let <var>serializedData</var> be the result of
                              <a href="#dfn-json-serialized" class="internalDFN" data-link-type="dfn">JSON-serializing</a>
                              <var>modifier</var>.<a data-lt="PaymentDetailsModifier.data" href="#dom-paymentdetailsmodifier-data" class="internalDFN" data-link-type="dfn"><code>data</code></a> into a
                              string. If <a href="#dfn-json-serialized" class="internalDFN" data-link-type="dfn">JSON-serializing</a> throws an
                              exception, then <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the update</a> with
                              <var>request</var> and that exception.
                            </li>
                            <li>Add <var>serializedData</var> to
                            <var>serializedModifierData</var>.
                            </li>
                            <li>Remove the <a data-lt="PaymentDetailsModifier.data" href="#dom-paymentdetailsmodifier-data" class="internalDFN" data-link-type="dfn"><code>data</code></a> member of
                            <var>modifier</var>, if it is present.
                            </li>
                          </ol>
                        </li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li data-link-for="PaymentDetailsUpdate">If the
                <a href="#dom-paymentdetailsupdate-paymentmethoderrors" class="internalDFN" data-link-type="dfn"><code>paymentMethodErrors</code></a> member is present and
                <var>identifier</var> is not null:
                  <ol>
                    <li>If required by the specification that defines the
                    <var>pmi</var>, then <a href="https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value">convert</a> <a href="#dom-paymentdetailsupdate-paymentmethoderrors" class="internalDFN" data-link-type="dfn"><code>
                      paymentMethodErrors</code></a> to an IDL value.
                    </li>
                    <li>If conversion results in a <a data-cite-path="" href="https://heycam.github.io/webidl/#dfn-exception">exception</a>
                    <var>error</var>, <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the update</a> with
                    <var>error</var>.
                    </li>
                    <li>The <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> <em class="rfc2119" title="SHOULD">SHOULD</em> display an error for
                    each relevant erroneous field of <a href="#dom-paymentdetailsupdate-paymentmethoderrors" class="internalDFN" data-link-type="dfn"><code>paymentMethodErrors</code></a>.
                    </li>
                  </ol>
                </li>
                <li>Update the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> using the new details:
                  <ol>
                    <li data-link-for="PaymentDetailsUpdate">If the <a href="#dom-paymentdetailsupdate-total" class="internalDFN" data-link-type="dfn"><code>total</code></a>
                    member of <var>details</var> is present, then:
                      <ol>
                        <li>Set
                        <var>request</var>.<a href="#dfn-details" class="internalDFN" data-link-type="dfn">[[details]]</a>.<a data-link-for="PaymentDetailsInit" href="#dom-paymentdetailsinit-total" class="internalDFN" data-link-type="dfn"><code>total</code></a>
                          to <var>details</var>.<a href="#dom-paymentdetailsupdate-total" class="internalDFN" data-link-type="dfn"><code>total</code></a>.
                        </li>
                      </ol>
                    </li>
                    <li>If the <a href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a> member of <var>details</var>
                    is present, then:
                      <ol>
                        <li>Set
                        <var>request</var>.<a href="#dfn-details" class="internalDFN" data-link-type="dfn">[[details]]</a>.<a href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a>
                        to <var>details</var>.<a href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a>.
                        </li>
                      </ol>
                    </li>
                    <li>If the <a href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a> member of
                    <var>details</var> is present, and
                    <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a>.<a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> is true,
                    then:
                      <ol>
                        <li>Set
                        <var>request</var>.<a href="#dfn-details" class="internalDFN" data-link-type="dfn">[[details]]</a>.<a href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a>
                        to <var>shippingOptions</var>.
                        </li>
                        <li>Set the value of <var>request</var>'s <a data-lt="PaymentRequest.shippingOption" href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a>
                        attribute to <var>selectedShippingOption</var>.
                        </li>
                      </ol>
                    </li>
                    <li>If the <a href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a> member of <var>details</var> is
                    present, then:
                      <ol>
                        <li>Set
                        <var>request</var>.<a href="#dfn-details" class="internalDFN" data-link-type="dfn">[[details]]</a>.<a href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a>
                        to <var>details</var>.<a href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a>.
                        </li>
                        <li>Set
                        <var>request</var>.<a href="#dfn-serializedmodifierdata" class="internalDFN" data-link-type="dfn">[[serializedModifierData]]</a> to
                        <var>serializedModifierData</var>.
                        </li>
                      </ol>
                    </li>
                    <li>
                      <p>
                        If <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a>.<a data-lt="PaymentOptions.requestShipping" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a> is
                        true, and
                        <var>request</var>.<a href="#dfn-details" class="internalDFN" data-link-type="dfn">[[details]]</a>.<a href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a>
                        is empty, then the developer has signified that there are
                        no valid shipping options for the currently-chosen
                        shipping address (given by <var>request</var>'s
                        <a data-lt="PaymentRequest.shippingAddress" href="#dom-paymentrequest-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a>).
                      </p>
                      <p>
                        In this case, the user agent <em class="rfc2119" title="SHOULD">SHOULD</em> display an error
                        indicating this, and <em class="rfc2119" title="MAY">MAY</em> indicate that the
                        currently-chosen shipping address is invalid in some way.
                        The user agent <em class="rfc2119" title="SHOULD">SHOULD</em> use the <a data-lt="PaymentDetailsUpdate.error" href="#dom-paymentdetailsupdate-error" class="internalDFN" data-link-type="dfn"><code>error</code></a> member of
                        <var>details</var>, if it is present, to give more
                        information about why there are no valid shipping options
                        for that address.
                      </p>
                      <p>
                        Further, if <var>details</var>["<a data-lt="PaymentDetailsUpdate.shippingAddressErrors" href="#dom-paymentdetailsupdate-shippingaddresserrors" class="internalDFN" data-link-type="dfn"><code>shippingAddressErrors</code></a>"]
                        member is present, the user agent <em class="rfc2119" title="SHOULD">SHOULD</em> display an error
                        specifically for each erroneous field of the shipping
                        address. This is done by matching each present member of
                        the <a href="#dom-addresserrors" class="internalDFN" data-link-type="dfn"><code>AddressErrors</code></a> to a corresponding input field
                        in the shown user interface.
                      </p>
                      <p data-link-for="PaymentDetailsUpdate">
                        Similarly, if <var>details</var>["<a href="#dom-paymentdetailsupdate-payererrors" class="internalDFN" data-link-type="dfn"><code>payerErrors</code></a>"]
                        member is present and
                        <var>request</var>.<a href="#dfn-options" class="internalDFN" data-link-type="dfn">[[options]]</a>'s <a data-lt="PaymentOptions.requestPayerName" href="#dom-paymentoptions-requestpayername" class="internalDFN" data-link-type="dfn"><code>requestPayerName</code></a>,
                        <a data-lt="PaymentOptions.requestPayerEmail" href="#dom-paymentoptions-requestpayeremail" class="internalDFN" data-link-type="dfn"><code>requestPayerEmail</code></a>,
                        or <a data-lt="PaymentOptions.requestPayerPhone" href="#dom-paymentoptions-requestpayerphone" class="internalDFN" data-link-type="dfn"><code>requestPayerPhone</code></a>
                        is true, then display an error specifically for each
                        erroneous field.
                      </p>
                      <p data-link-for="PaymentDetailsUpdate">
                        Likewise, if
                        <var>details</var>["<a href="#dom-paymentdetailsupdate-paymentmethoderrors" class="internalDFN" data-link-type="dfn"><code>paymentMethodErrors</code></a>"] is
                        present, then display errors specifically for each
                        erroneous input field for the particular payment method.
                      </p>
                    </li>
                  </ol>
                </li>
              </ol>
            </li>
            <li>Set <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> to false.
            </li>
            <li>Update the user interface based on any changed values in
            <var>request</var>. Re-enable user interface elements disabled prior
            to running this algorithm.
            </li>
          </ol>
          <section id="abort-the-update">
            <h4 id="x18-9-1-abort-the-update"><span class="secno">18.9.1 </span>
              Abort the update
            <a class="self-link" aria-label="§" href="#abort-the-update"></a></h4>
            <p>
              To <dfn data-dfn-type="dfn" id="dfn-abort-the-update">abort the update</dfn> with a <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>
              <var>request</var> and <a data-cite-path="" href="https://heycam.github.io/webidl/#dfn-exception">exception</a> <var>exception</var>:
            </p>
            <ol class="algorithm">
              <li>Optionally, show an error message to the user when letting them
              know an error has occurred.
              </li>
              <li>Abort the current user interaction and close down any remaining
              user interface.
              </li>
              <li>
                <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the <a data-cite-path="webappapis.html" href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user interaction task source</a> to
                perform the following steps:
                <ol>
                  <li>Set <var>request</var>'s <a href="#dfn-payment-relevant-browsing-context" class="internalDFN" data-link-type="dfn">payment-relevant browsing
                  context</a>'s <a href="#dfn-payment-request-is-showing" class="internalDFN" data-link-type="dfn">payment request is showing</a> boolean to
                  false.
                  </li>
                  <li>Set <var>request</var>.<a href="#dfn-state" class="internalDFN" data-link-type="dfn">[[state]]</a> to
                  "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>".
                  </li>
                  <li>Let <var>response</var> be
                  <var>request</var>.<a href="#dfn-response" class="internalDFN" data-link-type="dfn">[[response]]</a>.
                  </li>
                  <li>If <var>response</var> is not null, then:
                    <ol>
                      <li>Set <var>response</var>.<a href="#dfn-complete" class="internalDFN" data-link-type="dfn">[[complete]]</a> to true.
                      </li>
                      <li class="assert">Assert: <var>response</var>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> is
                      not null.
                      </li>
                      <li>Reject <var>response</var>.<a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a>
                      with <var>exception</var>.
                      </li>
                    </ol>
                  </li>
                  <li>Otherwise, reject
                  <var>request</var>.<a href="#dfn-acceptpromise" class="internalDFN" data-link-type="dfn">[[acceptPromise]]</a> with
                  <var>exception</var>.
                  </li>
                  <li>Set <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> to false.
                  </li>
                </ol>
              </li>
              <li>Abort the algorithm.
              </li>
            </ol>
          </section>
          <div class="note" role="note" id="issue-container-generatedID-33"><div role="heading" class="note-title marker" id="h-note-33" aria-level="4"><span>Note</span></div><div class="">
            <p>
              <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">Abort the update</a> runs when there is a fatal error updating
              the payment request, such as the supplied <var>detailsPromise</var>
              rejecting, or its fulfillment value containing invalid data. This
              would potentially leave the payment request in an inconsistent
              state since the developer hasn't successfully handled the change
              event.
            </p>
            <p>
              Consequently, the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> moves to a "<a href="#dfn-closed" class="internalDFN" data-link-type="dfn">closed</a>"
              state. The error is signaled to the developer through the rejection
              of the <a href="#dfn-acceptpromise" class="internalDFN" data-link-type="dfn">[[acceptPromise]]</a>, i.e., the promise returned by
              <a data-lt="PaymentRequest.show" href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a>.
            </p>
            <p data-link-for="PaymentResponse">
              Similarly, <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the update</a> occurring during <a href="#dom-paymentresponse-retry" class="internalDFN" data-link-type="dfn"><code>retry()</code></a>
              causes the <a href="#dfn-retrypromise" class="internalDFN" data-link-type="dfn">[[retryPromise]]</a> to reject, and the
              corresponding <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>'s <a href="#dfn-complete" class="internalDFN" data-link-type="dfn">[[complete]]</a> internal
              slot will be set to true (i.e., it can no longer be used).
            </p>
          </div></div>
        </section>
        <section id="validate-merchant-s-details-algorithm">
          <h3 id="x18-10-validate-merchant-s-details-algorithm"><span class="secno">18.10 </span>
            Validate merchant's details algorithm
          <a class="self-link" aria-label="§" href="#validate-merchant-s-details-algorithm"></a></h3>
          <p>
            The <dfn data-dfn-type="dfn" id="dfn-validate-merchant-s-details-algorithm">validate merchant's details algorithm</dfn> takes a
            <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a> <var>opaqueDataPromise</var> and a
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> <var>request</var>. The steps are conditional
            on the <var>opaqueDataPromise</var> settling. If
            <var>opaqueDataPromise</var> never settles then the payment request
            is blocked. The user agent <em class="rfc2119" title="SHOULD">SHOULD</em> provide the user with a means to
            abort a payment request. Implementations <em class="rfc2119" title="MAY">MAY</em> choose to implement a
            timeout for pending updates if <var>opaqueDataPromise</var> doesn't
            settle in a reasonable amount of time. If an implementation chooses
            to implement a timeout, they <em class="rfc2119" title="MUST">MUST</em> execute the steps listed below in
            the "upon rejection" path. Such a timeout is a fatal error for the
            payment request.
          </p>
          <ol class="algorithm">
            <li>Set <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> to true.
            </li>
            <li>
              <a data-cite-path="infrastructure.html" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">In parallel</a>, disable the user interface that allows the user
              to accept the payment request. This is to ensure that the payment
              is not accepted until the user interface is updated with any new
              details.
            </li>
            <li>
              <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#upon-rejection">Upon rejection</a> of <var>opaqueDataPromise</var>:
              <ol>
                <li>
                  <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">Abort the update</a> with <var>request</var> and an
                  "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#aborterror"><code>AbortError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
                </li>
              </ol>
            </li>
            <li>
              <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#upon-fulfillment">Upon fulfillment</a> of <var>opaqueDataPromise</var> with value
              <var>opaqueData</var>:
              <ol>
                <li>
                  <a href="#dfn-validate-the-merchant" class="internalDFN" data-link-type="dfn">Validate the merchant</a> using <var>opaqueData</var>.
                </li>
                <li>If <var>opaqueData</var> is invalid, as per the validation
                rules of the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a>, <a href="#dfn-abort-the-update" class="internalDFN" data-link-type="dfn">abort the update</a> with
                <var>request</var> and an appropriate <a data-cite-path="" href="https://heycam.github.io/webidl/#dfn-exception">exception</a> and
                return.
                </li>
                <li>Otherwise, set <var>request</var>.<a href="#dfn-updating" class="internalDFN" data-link-type="dfn">[[updating]]</a> to
                false.
                </li>
                <li>Enable the user interface, allowing the request for payment
                to proceed.
                </li>
              </ol>
            </li>
          </ol>
        </section>
      </section>
      <section id="privacy">
        <!--OddPage--><h2 id="x19-privacy-and-security-considerations"><span class="secno">19. </span>
          Privacy and Security Considerations
        <a class="self-link" aria-label="§" href="#privacy"></a></h2>
        <section class="informative" data-link-for="PaymentRequest" id="user-protections-with-show-method">
          <h3 id="x19-1-user-protections-with-show-method"><span class="secno">19.1 </span>
            User protections with <code>show()</code> method
          <a class="self-link" aria-label="§" href="#user-protections-with-show-method"></a></h3><p><em>This section is non-normative.</em></p>
          <p>
            To help ensure that users do not inadvertently share sensitive
            credentials with an origin, this API requires that PaymentRequest's
            <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> method be <a data-cite-path="interaction.html" href="https://html.spec.whatwg.org/multipage/interaction.html#triggered-by-user-activation">triggered by user activation</a> (e.g.,
            via a click or press).
          </p>
          <p>
            To avoid a confusing user experience, this specification limits the
            user agent to displaying one at a time via the <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> method.
            In addition, the user agent can limit the rate at which a page can
            call <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a>.
          </p>
        </section>
        <section class="informative" id="secure-contexts">
          <h3 id="x19-2-secure-contexts"><span class="secno">19.2 </span>
            Secure contexts
          <a class="self-link" aria-label="§" href="#secure-contexts"></a></h3><p><em>This section is non-normative.</em></p>
          <p>
            The API defined in this specification is only exposed in
            <a href="https://www.w3.org/TR/secure-contexts/#secure-contexts">secure contexts</a>.
            In practice, this means that this API is only available over HTTPS.
            This is to limit the possibility of payment method data (e.g., credit
            card numbers) being sent in the clear.
          </p>
        </section>
        <section class="informative" id="cross-origin-payment-requests">
          <h3 id="x19-3-cross-origin-payment-requests"><span class="secno">19.3 </span>
            Cross-origin payment requests
          <a class="self-link" aria-label="§" href="#cross-origin-payment-requests"></a></h3><p><em>This section is non-normative.</em></p>
          <p>
            It is common for merchants and other payees to delegate checkout and
            other e-commerce activities to payment service providers through an
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"><code>iframe</code></a>. This API supports payee-authorized cross-origin
            iframes through [<cite><a class="bibref" href="#bib-html">HTML</a></cite>]'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowpaymentrequest"><code>allowpaymentrequest</code></a> attribute.
          </p>
          <p class="Note">
            <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">Payment handlers</a> have access to both the origin that hosts the
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"><code>iframe</code></a> and the origin of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"><code>iframe</code></a> content (where the
            <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> initiates).
          </p>
        </section>
        <section class="informative" id="encryption-of-data-fields">
          <h3 id="x19-4-encryption-of-data-fields"><span class="secno">19.4 </span>
            Encryption of data fields
          <a class="self-link" aria-label="§" href="#encryption-of-data-fields"></a></h3><p><em>This section is non-normative.</em></p>
          <p>
            The <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a> API does not directly support encryption of
            data fields. Individual <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment methods</a> may choose to include
            support for encrypted data but it is not mandatory that all
            <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment methods</a> support this.
          </p>
        </section>
        <section class="informative" id="how-user-agents-match-payment-handlers">
          <h3 id="x19-5-how-user-agents-match-payment-handlers"><span class="secno">19.5 </span>
            How user agents match payment handlers
          <a class="self-link" aria-label="§" href="#how-user-agents-match-payment-handlers"></a></h3><p><em>This section is non-normative.</em></p>
          <p data-link-for="PaymentRequest">
            As part of <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a>, the user agent typically displays a list of
            matching <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handlers</a> that satisfy the <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment
            methods</a> accepted by the merchant and other conditions. Matching
            can take into account <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a> information provided as
            input to the API, information provided by the <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a>
            owner, the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handlers</a> registered by the user, user
            preferences, and other considerations.
          </p>
          <p data-link-for="PaymentRequest">
            For security reasons, a user agent can limit matching (in
            <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> and <a href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment()</code></a>) to <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handlers</a>
            from the same <a href="https://tools.ietf.org/html/rfc6454#section-3.2">origin</a> as a URL
            <a href="#dfn-pmi" class="internalDFN" data-link-type="dfn">payment method identifier</a>.
          </p>
        </section>
        <section id="exposing-user-information">
          <h3 id="x19-6-exposing-user-information"><span class="secno">19.6 </span>
            Exposing user information
          <a class="self-link" aria-label="§" href="#exposing-user-information"></a></h3>
          <p>
            The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MUST NOT">MUST NOT</em> share information about the user with
            a developer (e.g., the shipping address) without user consent.
          </p>
          <p>
            One way that the API supports limited information sharing is through
            the "<var>redactList</var>" associated with the creation of
            <a href="#dfn-physical-address" class="internalDFN" data-link-type="dfn">physical addresses</a> throughout the API. This feature enables
            user agents to provide the payee with enough information to compute
            shipping costs or tax information, while limiting the payee's ability
            to identify the payer via the address.
          </p>
          <p>
            The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MUST NOT">MUST NOT</em> share the values of the <a data-lt="PaymentDetailsBase.displayItems" href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a> member or
            <a data-lt="PaymentDetailsModifier.additionalDisplayItems" href="#dom-paymentdetailsmodifier-additionaldisplayitems" class="internalDFN" data-link-type="dfn"><code>additionalDisplayItems</code></a>
            member with a third-party <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handler</a> without user
            consent.
          </p>
          <p>
            Where sharing of privacy-sensitive information might not be obvious
            to users (e.g., when <a data-lt="payment method changed algorithm" href="#dfn-payment-method-changed-algorithm" class="internalDFN" data-link-type="dfn">changing payment methods</a>), it
            is <em class="rfc2119" title="RECOMMENDED">RECOMMENDED</em> that user agents inform the user of exactly what
            information is being shared with a merchant.
          </p>
        </section>
        <section class="informative" id="merchant-validation-0">
          <h3 id="x19-7-merchant-validation"><span class="secno">19.7 </span>
            Merchant Validation
          <a class="self-link" aria-label="§" href="#merchant-validation-0"></a></h3><p><em>This section is non-normative.</em></p>
          <p data-link-for="MerchantValidationEvent">
            It is important that the <a href="#dom-merchantvalidationevent-validationurl" class="internalDFN" data-link-type="dfn"><code>validationURL</code></a> in a
            <a href="#dom-merchantvalidationevent" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEvent</code></a> does not expose personally identifying
            information to unauthorized parties.
          </p>
        </section>
        <h2 id="canmakepayment-protections">
          <code>canMakePayment()</code> protections
        <a class="self-link" aria-label="§" href="#privacy"></a></h2>
        <p data-link-for="PaymentRequest">
          The <a href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment()</code></a> method enables the payee to determine —
          before calling <a href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show()</code></a> — whether the user agent knows of any
          <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handlers</a> available to the user that support the
          <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment methods</a> provided to the <a href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a>
          <a data-lt="PaymentRequest.PaymentRequest()" href="#dfn-paymentrequest-paymentrequest" class="internalDFN" data-link-type="dfn"><code>constructor</code></a>. If no
          <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn">payment handlers</a> support the <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment methods</a>, this
          enables the payee to fall back to a legacy checkout experience. Because
          this method shares some potentially unique information with the payee,
          user agents are expected to protect the user from abuse of the method.
          For example, user agents can reduce user fingerprinting by:
        </p>
        <ul data-link-for="PaymentRequest">
          <li>Allowing the user to configure the user agent to turn off
          <a href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment()</code></a>, which would return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a promise rejected
          with</a> a "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#notallowederror"><code>NotAllowedError</code></a>" <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a>.
          </li>
          <li>Rate-limiting the frequency of calls to <a href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment()</code></a>
          with different parameters.
          </li>
        </ul>
        <p>
          For rate-limiting the user agent might look at repeated calls from:
        </p>
        <ul>
          <li>the same effective top-level domain plus one (eTLD+1).
          </li>
          <li>the top-level browsing context. Alternatively, the user agent may
          block access to the API entirely for origins know to be bad actors.
          </li>
          <li>the origin of an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"><code>iframe</code></a> or popup window.
          </li>
        </ul>
        <p>
          These rate-limiting techniques intend to increase the cost associated
          with repeated calls, whether it is the cost of managing multiple eTLDs
          or the user experience friction of opening multiple windows (tabs or
          pop-ups).
        </p>
      </section>
      <section class="informative" id="accessibility-considerations">
        <!--OddPage--><h2 id="x20-accessibility-considerations"><span class="secno">20. </span>
          Accessibility Considerations
        <a class="self-link" aria-label="§" href="#accessibility-considerations"></a></h2><p><em>This section is non-normative.</em></p>
        <p>
          For the user-facing aspects of Payment Request API, implementations
          integrate with platform accessibility APIs via form controls and other
          input modalities. Furthermore, to increase the intelligibility of
          total, shipping addresses, and contact information, implementations
          format data according to system conventions.
        </p>
      </section>
      <section id="dependencies">
        <!--OddPage--><h2 id="x21-dependencies"><span class="secno">21. </span>
          Dependencies
        <a class="self-link" aria-label="§" href="#dependencies"></a></h2>
        <p>
          This specification relies on several other underlying specifications.
        </p>
        <dl data-sort=""><dt>
            DOM
          </dt>
          <dd>
            The <code><dfn data-dfn-type="dfn" id="dfn-event"><a href="https://dom.spec.whatwg.org/#event">Event</a></dfn></code> interface,
            the <code><dfn data-dfn-type="dfn" id="dfn-eventtarget"><a href="https://dom.spec.whatwg.org/#interface-eventtarget">EventTarget</a></dfn></code> interface, the
            <code><dfn data-dfn-type="dfn" id="dfn-eventinit"><a href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></dfn></code>
            dictionary, <code><dfn data-dfn-type="dfn" id="dfn-istrusted"><a href="https://dom.spec.whatwg.org/#dom-event-istrusted">isTrusted</a></dfn></code> attribute, are
            defined by [<cite><a class="bibref" href="#bib-dom">DOM</a></cite>].
          </dd>
          <dt>
            ECMAScript
          </dt>
          <dd>
            The terms <dfn data-dfn-type="dfn" id="dfn-promise"><a href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-internal-slot"><a href="https://tc39.github.io/ecma262/#sec-object-internal-methods-and-internal-slots">internal
            slot</a></dfn>, <code><dfn data-dfn-type="dfn" id="dfn-rangeerror"><a href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-rangeerror">RangeError</a></dfn></code>,
            <code><dfn data-dfn-type="dfn" id="dfn-typeerror"><a href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></dfn></code>,
            and <code><dfn data-dfn-type="dfn" id="dfn-json-stringify"><a href="https://tc39.github.io/ecma262/#sec-json.stringify">JSON.stringify</a></dfn></code> are
            defined by [<cite><a class="bibref" href="#bib-ecmascript">ECMASCRIPT</a></cite>].
            <p>
              The term <dfn data-lt="json-serialized|json-serializing|json-serialize" data-dfn-type="dfn" id="dfn-json-serialized">JSON-serialize</dfn> applied to
              a given object means to run the algorithm specified by the original
              value of the <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-json.stringify"><code>JSON.stringify</code></a> function on the supplied object,
              passing the supplied object as the sole argument, and return the
              resulting string. This can throw an exception.
            </p>
          </dd>
          <dt>
            HTML
          </dt>
          <dd>
            The following are defined by [<cite><a class="bibref" href="#bib-html">HTML</a></cite>]: <code><dfn data-dfn-type="dfn" id="dfn-eventhandler"><a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></dfn></code>,
            <dfn data-dfn-type="dfn" id="dfn-allowed-to-use"><a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use">allowed
            to use</a></dfn>, the <code><dfn data-dfn-type="dfn" id="dfn-iframe"><a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element">iframe</a></dfn></code>
            element, and the <code><dfn data-dfn-type="dfn" id="dfn-allowpaymentrequest"><a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowpaymentrequest">allowpaymentrequest</a></dfn></code>
            attribute.
          </dd>
          <dt>
            Infra
          </dt>
          <dd></dd>
          <dt>
            ISO 3366-2
          </dt>
          <dd>
            <dfn data-lt="country subdivision names|country subdivision name" data-dfn-type="dfn" id="dfn-country-subdivision-names">Country subdivision
            name</dfn> and <dfn data-dfn-type="dfn" id="dfn-country-subdivision-code-element">country subdivision code element</dfn> are
            defined in [<cite><a class="bibref" href="#bib-iso3166-2">ISO3166-2</a></cite>].
          </dd>
          <dt>
            Payment Method Identifiers
          </dt>
          <dd>
            The term <dfn data-lt="pmi|payment method identifier" data-dfn-type="dfn" data-plurals="payment method identifiers" id="dfn-pmi">payment method identifier</dfn>, or PMI
            for short, is defined by [<cite><a class="bibref" href="#bib-payment-method-id">payment-method-id</a></cite>]. It's an unique
            identifier for a <a href="#dfn-payment-method" class="internalDFN" data-link-type="dfn">payment method</a>.
          </dd>
          <dt>
            Web IDL
          </dt>
          <dd>
            <p>
              When this specification says to <dfn data-dfn-type="dfn" data-plurals="throws" id="dfn-throw"><a href="https://heycam.github.io/webidl/#dfn-throw">throw</a></dfn> an error, the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> must
              throw an error as described in [<cite><a class="bibref" href="#bib-webidl">WEBIDL</a></cite>]. When this occurs in a
              sub-algorithm, this results in termination of execution of the
              sub-algorithm and all ancestor algorithms until one is reached that
              explicitly describes procedures for catching exceptions.
            </p>
            <p>
              The algorithm for <dfn data-lt="converting|converting an ecmascript value to a dictionary" data-dfn-type="dfn" id="dfn-converting"><a href="https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value">converting an ECMAScript value to a dictionary</a></dfn>
              is defined by [<cite><a class="bibref" href="#bib-webidl">WEBIDL</a></cite>].
            </p>
            <p>
              <code><dfn data-dfn-type="dfn" id="dfn-domexception"><a href="https://heycam.github.io/webidl/#dfn-DOMException">DOMException</a></dfn></code> and the
              following <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-DOMException"><code>DOMException</code></a> types from [<cite><a class="bibref" href="#bib-webidl">WEBIDL</a></cite>] are used:
              "<code><dfn data-dfn-type="dfn" id="dfn-aborterror"><a href="https://heycam.github.io/webidl/#aborterror">AbortError</a></dfn></code>",
              "<code><dfn data-dfn-type="dfn" id="dfn-invalidstateerror"><a href="https://heycam.github.io/webidl/#invalidstateerror">InvalidStateError</a></dfn></code>",
              "<code><dfn data-dfn-type="dfn" id="dfn-notallowederror"><a href="https://heycam.github.io/webidl/#notallowederror">NotAllowedError</a></dfn></code>",
              "<code><dfn data-dfn-type="dfn" id="dfn-notsupportederror"><a href="https://heycam.github.io/webidl/#notsupportederror">NotSupportedError</a></dfn></code>", and
              "<code><dfn data-dfn-type="dfn" id="dfn-securityerror"><a href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></dfn></code>".
            </p>
          </dd><dt>
            Writing Promise-Using Specifications
          </dt>
          <dd>
            The terms <dfn data-dfn-type="dfn" id="dfn-a-new-promise"><a href="https://www.w3.org/2001/tag/doc/promises-guide#a-new-promise">a new
            promise</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-a-promise-rejected-with"><a href="https://www.w3.org/2001/tag/doc/promises-guide#a-promise-rejected-with">a promise rejected
            with</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-upon-fulfillment"><a href="https://www.w3.org/2001/tag/doc/promises-guide#upon-fulfillment">upon
            fulfillment</a></dfn> and <dfn data-dfn-type="dfn" id="dfn-upon-rejection"><a href="https://www.w3.org/2001/tag/doc/promises-guide#upon-rejection">upon rejection</a></dfn> are defined by
            [<cite><a class="bibref" href="#bib-promises-guide">PROMISES-GUIDE</a></cite>].
          </dd>
          </dl>
      </section>
      <section id="conformance"><!--OddPage--><h2 id="x22-conformance"><span class="secno">22. </span>Conformance<a class="self-link" aria-label="§" href="#conformance"></a></h2><p>
        As well as sections marked as non-normative, all authoring guidelines,
        diagrams, examples, and notes in this specification are non-normative.
        Everything else in this specification is normative.
      </p><p>
              The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">MUST NOT</em>, <em class="rfc2119">OPTIONAL</em>, <em class="rfc2119">RECOMMENDED</em>, <em class="rfc2119">SHOULD</em>, and <em class="rfc2119">SHOULD NOT</em>
              are to be interpreted as described in
              [<cite><a class="bibref" href="#bib-rfc2119">RFC2119</a></cite>].
            </p>
        <p>
          There is only one class of product that can claim conformance to this
          specification: a <dfn data-dfn-type="dfn" data-plurals="user agents" id="dfn-user-agent">user agent</dfn>.
        </p>
        <div class="note" role="note" id="issue-container-generatedID-34"><div role="heading" class="note-title marker" id="h-note-34" aria-level="3"><span>Note</span></div><p class="">
          Although this specification is primarily targeted at web browsers, it
          is feasible that other software could also implement this specification
          in a conforming manner.
        </p></div>
        <p>
          User agents <em class="rfc2119" title="MAY">MAY</em> implement algorithms given in this specification in any
          way desired, so long as the end result is indistinguishable from the
          result that would be obtained by the specification's algorithms.
        </p>
        <p>
          User agents <em class="rfc2119" title="MAY">MAY</em> impose implementation-specific limits on otherwise
          unconstrained inputs, e.g., to prevent denial of service attacks, to
          guard against running out of memory, or to work around
          platform-specific limitations. When an input exceeds
          implementation-specific limit, the user agent <em class="rfc2119" title="MUST">MUST</em> throw, or, in the
          context of a promise, reject with, a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"><code>TypeError</code></a> optionally
          informing the developer of how a particular input exceeded an
          implementation-specific limit.
        </p>
      </section>
      <section id="idl-index" class="appendix"><!--OddPage--><h2 id="a-idl-index"><span class="secno">A. </span>IDL Index<a class="self-link" aria-label="§" href="#idl-index"></a></h2><div><pre class="idl def" id="actual-idl-index"><span data-idl="" class="idlInterface" data-title="PaymentRequest">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a data-link-for="" href="#dom-paymentmethoddata" class="internalDFN" data-link-type="dfn"><code>PaymentMethodData</code></a>&gt;</span> <span class="idlParamName">methodData</span>,<span class="idlType"> <a data-link-for="" href="#dom-paymentdetailsinit" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsInit</code></a></span> <span class="idlParamName">details</span>, optional<span class="idlType"> <a data-link-for="" href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a></span> <span class="idlParamName">options</span>)</span>,
  <span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=Window</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentrequest" class="internalDFN" data-link-type="dfn"><code>PaymentRequest</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#interface-eventtarget"><code>EventTarget</code></a></span> {<span data-idl="" class="idlMethod" data-title="show" data-dfn-for="paymentrequest">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#NewObject">NewObject</a></span>]<span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a data-link-for="" href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a>&gt;</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.show()|paymentrequest.show|show()|show" href="#dom-paymentrequest-show" class="internalDFN" data-link-type="dfn"><code>show</code></a></span>(optional<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a data-link-for="" href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a>&gt;</span> <span class="idlParamName">detailsPromise</span>);</span><span data-idl="" class="idlMethod" data-title="abort" data-dfn-for="paymentrequest">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#NewObject">NewObject</a></span>]<span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.abort()|paymentrequest.abort|abort()|abort" href="#dom-paymentrequest-abort" class="internalDFN" data-link-type="dfn"><code>abort</code></a></span>();</span><span data-idl="" class="idlMethod" data-title="canMakePayment" data-dfn-for="paymentrequest">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#NewObject">NewObject</a></span>]<span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a>&gt;</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.canmakepayment()|paymentrequest.canmakepayment|canmakepayment()|canmakepayment" href="#dom-paymentrequest-canmakepayment" class="internalDFN" data-link-type="dfn"><code>canMakePayment</code></a></span>();</span><span data-idl="" class="idlAttribute" data-title="id" data-dfn-for="paymentrequest">

    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.id|id" href="#dom-paymentrequest-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="shippingAddress" data-dfn-for="paymentrequest">
    readonly attribute<span class="idlType"> <a data-link-for="" href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>?</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.shippingaddress|shippingaddress" href="#dom-paymentrequest-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="shippingOption" data-dfn-for="paymentrequest">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.shippingoption|shippingoption" href="#dom-paymentrequest-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="shippingType" data-dfn-for="paymentrequest">
    readonly attribute<span class="idlType"> <a data-link-for="" href="#dom-paymentshippingtype" class="internalDFN" data-link-type="dfn"><code>PaymentShippingType</code></a>?</span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.shippingtype|shippingtype" href="#dom-paymentrequest-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="onmerchantvalidation" data-dfn-for="paymentrequest">

    attribute<span class="idlType"> <a href="https://html.spec.whatwg.org/multipage/#eventhandler">EventHandler</a></span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.onmerchantvalidation|onmerchantvalidation" href="#dom-paymentrequest-onmerchantvalidation" class="internalDFN" data-link-type="dfn"><code>onmerchantvalidation</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="onshippingaddresschange" data-dfn-for="paymentrequest">
    attribute<span class="idlType"> <a href="https://html.spec.whatwg.org/multipage/#eventhandler">EventHandler</a></span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.onshippingaddresschange|onshippingaddresschange" href="#dom-paymentrequest-onshippingaddresschange" class="internalDFN" data-link-type="dfn"><code>onshippingaddresschange</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="onshippingoptionchange" data-dfn-for="paymentrequest">
    attribute<span class="idlType"> <a href="https://html.spec.whatwg.org/multipage/#eventhandler">EventHandler</a></span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.onshippingoptionchange|onshippingoptionchange" href="#dom-paymentrequest-onshippingoptionchange" class="internalDFN" data-link-type="dfn"><code>onshippingoptionchange</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="onpaymentmethodchange" data-dfn-for="paymentrequest">
    attribute<span class="idlType"> <a href="https://html.spec.whatwg.org/multipage/#eventhandler">EventHandler</a></span> <span class="idlName"><a data-link-for="paymentrequest" data-lt="paymentrequest.onpaymentmethodchange|onpaymentmethodchange" href="#dom-paymentrequest-onpaymentmethodchange" class="internalDFN" data-link-type="dfn"><code>onpaymentmethodchange</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentMethodData">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentmethoddata" class="internalDFN" data-link-type="dfn"><code>PaymentMethodData</code></a></span> {<span data-idl="" class="idlMember" data-title="supportedMethods" data-dfn-for="paymentmethoddata">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentmethoddata" data-lt="" href="#dom-paymentmethoddata-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a></span>;</span><span data-idl="" class="idlMember" data-title="data" data-dfn-for="paymentmethoddata"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentmethoddata" data-lt="" href="#dom-paymentmethoddata-data" class="internalDFN" data-link-type="dfn"><code>data</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentCurrencyAmount">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a></span> {<span data-idl="" class="idlMember" data-title="currency" data-dfn-for="paymentcurrencyamount">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentcurrencyamount" data-lt="" href="#dom-paymentcurrencyamount-currency" class="internalDFN" data-link-type="dfn"><code>currency</code></a></span>;</span><span data-idl="" class="idlMember" data-title="value" data-dfn-for="paymentcurrencyamount">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentcurrencyamount" data-lt="" href="#dom-paymentcurrencyamount-value" class="internalDFN" data-link-type="dfn"><code>value</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentDetailsBase">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a></span> {<span data-idl="" class="idlMember" data-title="displayItems" data-dfn-for="paymentdetailsbase"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a data-link-for="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a>&gt;</span> <span class="idlName"><a data-link-for="paymentdetailsbase" data-lt="" href="#dom-paymentdetailsbase-displayitems" class="internalDFN" data-link-type="dfn"><code>displayItems</code></a></span>;</span><span data-idl="" class="idlMember" data-title="shippingOptions" data-dfn-for="paymentdetailsbase"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a data-link-for="" href="#dom-paymentshippingoption" class="internalDFN" data-link-type="dfn"><code>PaymentShippingOption</code></a>&gt;</span> <span class="idlName"><a data-link-for="paymentdetailsbase" data-lt="" href="#dom-paymentdetailsbase-shippingoptions" class="internalDFN" data-link-type="dfn"><code>shippingOptions</code></a></span>;</span><span data-idl="" class="idlMember" data-title="modifiers" data-dfn-for="paymentdetailsbase"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a data-link-for="" href="#dom-paymentdetailsmodifier" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsModifier</code></a>&gt;</span> <span class="idlName"><a data-link-for="paymentdetailsbase" data-lt="" href="#dom-paymentdetailsbase-modifiers" class="internalDFN" data-link-type="dfn"><code>modifiers</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentDetailsInit">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentdetailsinit" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsInit</code></a></span> : <span class="idlSuperclass"><a data-link-for="" href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a></span> {<span data-idl="" class="idlMember" data-title="id" data-dfn-for="paymentdetailsinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentdetailsinit" data-lt="" href="#dom-paymentdetailsinit-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></span>;</span><span data-idl="" class="idlMember" data-title="total" data-dfn-for="paymentdetailsinit">
    required<span class="idlType"> <a data-link-for="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a></span> <span class="idlName"><a data-link-for="paymentdetailsinit" data-lt="" href="#dom-paymentdetailsinit-total" class="internalDFN" data-link-type="dfn"><code>total</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentDetailsUpdate">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a></span> : <span class="idlSuperclass"><a data-link-for="" href="#dom-paymentdetailsbase" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsBase</code></a></span> {<span data-idl="" class="idlMember" data-title="error" data-dfn-for="paymentdetailsupdate"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentdetailsupdate" data-lt="" href="#dom-paymentdetailsupdate-error" class="internalDFN" data-link-type="dfn"><code>error</code></a></span>;</span><span data-idl="" class="idlMember" data-title="total" data-dfn-for="paymentdetailsupdate"><span class="idlType">
    <a data-link-for="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a></span> <span class="idlName"><a data-link-for="paymentdetailsupdate" data-lt="" href="#dom-paymentdetailsupdate-total" class="internalDFN" data-link-type="dfn"><code>total</code></a></span>;</span><span data-idl="" class="idlMember" data-title="shippingAddressErrors" data-dfn-for="paymentdetailsupdate"><span class="idlType">
    <a data-link-for="" href="#dom-addresserrors" class="internalDFN" data-link-type="dfn"><code>AddressErrors</code></a></span> <span class="idlName"><a data-link-for="paymentdetailsupdate" data-lt="" href="#dom-paymentdetailsupdate-shippingaddresserrors" class="internalDFN" data-link-type="dfn"><code>shippingAddressErrors</code></a></span>;</span><span data-idl="" class="idlMember" data-title="payerErrors" data-dfn-for="paymentdetailsupdate"><span class="idlType">
    <a data-link-for="" href="#dom-payererrors" class="internalDFN" data-link-type="dfn"><code>PayerErrors</code></a></span> <span class="idlName"><a data-link-for="paymentdetailsupdate" data-lt="" href="#dom-paymentdetailsupdate-payererrors" class="internalDFN" data-link-type="dfn"><code>payerErrors</code></a></span>;</span><span data-idl="" class="idlMember" data-title="paymentMethodErrors" data-dfn-for="paymentdetailsupdate"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentdetailsupdate" data-lt="" href="#dom-paymentdetailsupdate-paymentmethoderrors" class="internalDFN" data-link-type="dfn"><code>paymentMethodErrors</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentDetailsModifier">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentdetailsmodifier" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsModifier</code></a></span> {<span data-idl="" class="idlMember" data-title="supportedMethods" data-dfn-for="paymentdetailsmodifier">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentdetailsmodifier" data-lt="" href="#dom-paymentdetailsmodifier-supportedmethods" class="internalDFN" data-link-type="dfn"><code>supportedMethods</code></a></span>;</span><span data-idl="" class="idlMember" data-title="total" data-dfn-for="paymentdetailsmodifier"><span class="idlType">
    <a data-link-for="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a></span> <span class="idlName"><a data-link-for="paymentdetailsmodifier" data-lt="" href="#dom-paymentdetailsmodifier-total" class="internalDFN" data-link-type="dfn"><code>total</code></a></span>;</span><span data-idl="" class="idlMember" data-title="additionalDisplayItems" data-dfn-for="paymentdetailsmodifier"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a data-link-for="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a>&gt;</span> <span class="idlName"><a data-link-for="paymentdetailsmodifier" data-lt="" href="#dom-paymentdetailsmodifier-additionaldisplayitems" class="internalDFN" data-link-type="dfn"><code>additionalDisplayItems</code></a></span>;</span><span data-idl="" class="idlMember" data-title="data" data-dfn-for="paymentdetailsmodifier"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentdetailsmodifier" data-lt="" href="#dom-paymentdetailsmodifier-data" class="internalDFN" data-link-type="dfn"><code>data</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlEnum" data-title="PaymentShippingType">enum <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentshippingtype" class="internalDFN" data-link-type="dfn"><code>PaymentShippingType</code></a></span> {
    <span class="idlEnumItem">"<a data-link-for="paymentshippingtype" data-lt="" href="#dom-paymentshippingtype-shipping" class="internalDFN" data-link-type="dfn"><code>shipping</code></a>"</span>,
    <span class="idlEnumItem">"<a data-link-for="paymentshippingtype" data-lt="" href="#dom-paymentshippingtype-delivery" class="internalDFN" data-link-type="dfn"><code>delivery</code></a>"</span>,
    <span class="idlEnumItem">"<a data-link-for="paymentshippingtype" data-lt="" href="#dom-paymentshippingtype-pickup" class="internalDFN" data-link-type="dfn"><code>pickup</code></a>"</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentOptions">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentoptions" class="internalDFN" data-link-type="dfn"><code>PaymentOptions</code></a></span> {<span data-idl="" class="idlMember" data-title="requestPayerName" data-dfn-for="paymentoptions"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-requestpayername" class="internalDFN" data-link-type="dfn"><code>requestPayerName</code></a></span> = false;</span><span data-idl="" class="idlMember" data-title="requestBillingAddress" data-dfn-for="paymentoptions"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-requestbillingaddress" class="internalDFN" data-link-type="dfn"><code>requestBillingAddress</code></a></span> = false;</span><span data-idl="" class="idlMember" data-title="requestPayerEmail" data-dfn-for="paymentoptions"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-requestpayeremail" class="internalDFN" data-link-type="dfn"><code>requestPayerEmail</code></a></span> = false;</span><span data-idl="" class="idlMember" data-title="requestPayerPhone" data-dfn-for="paymentoptions"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-requestpayerphone" class="internalDFN" data-link-type="dfn"><code>requestPayerPhone</code></a></span> = false;</span><span data-idl="" class="idlMember" data-title="requestShipping" data-dfn-for="paymentoptions"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-requestshipping" class="internalDFN" data-link-type="dfn"><code>requestShipping</code></a></span> = false;</span><span data-idl="" class="idlMember" data-title="shippingType" data-dfn-for="paymentoptions"><span class="idlType">
    <a data-link-for="" href="#dom-paymentshippingtype" class="internalDFN" data-link-type="dfn"><code>PaymentShippingType</code></a></span> <span class="idlName"><a data-link-for="paymentoptions" data-lt="" href="#dom-paymentoptions-shippingtype" class="internalDFN" data-link-type="dfn"><code>shippingType</code></a></span> = "shipping";</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentItem">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentitem" class="internalDFN" data-link-type="dfn"><code>PaymentItem</code></a></span> {<span data-idl="" class="idlMember" data-title="label" data-dfn-for="paymentitem">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentitem" data-lt="" href="#dom-paymentitem-label" class="internalDFN" data-link-type="dfn"><code>label</code></a></span>;</span><span data-idl="" class="idlMember" data-title="amount" data-dfn-for="paymentitem">
    required<span class="idlType"> <a data-link-for="" href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a></span> <span class="idlName"><a data-link-for="paymentitem" data-lt="" href="#dom-paymentitem-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a></span>;</span><span data-idl="" class="idlMember" data-title="pending" data-dfn-for="paymentitem"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentitem" data-lt="" href="#dom-paymentitem-pending" class="internalDFN" data-link-type="dfn"><code>pending</code></a></span> = false;</span>
  };</span>

  <span data-idl="" class="idlInterface" data-title="PaymentAddress">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(Window)</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a></span> {<span data-idl="" class="idlMethod" data-title="toJSON" data-dfn-for="paymentaddress">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#Default">Default</a></span>]<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.tojson()|paymentaddress.tojson|tojson()|tojson" href="#dom-paymentaddress-tojson" class="internalDFN" data-link-type="dfn"><code>toJSON</code></a></span>();</span><span data-idl="" class="idlAttribute" data-title="city" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.city|city" href="#dom-paymentaddress-city" class="internalDFN" data-link-type="dfn"><code>city</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="country" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.country|country" href="#dom-paymentaddress-country" class="internalDFN" data-link-type="dfn"><code>country</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="dependentLocality" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.dependentlocality|dependentlocality" href="#dom-paymentaddress-dependentlocality" class="internalDFN" data-link-type="dfn"><code>dependentLocality</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="organization" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.organization|organization" href="#dom-paymentaddress-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="phone" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.phone|phone" href="#dom-paymentaddress-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="postalCode" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.postalcode|postalcode" href="#dom-paymentaddress-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="recipient" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.recipient|recipient" href="#dom-paymentaddress-recipient" class="internalDFN" data-link-type="dfn"><code>recipient</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="region" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.region|region" href="#dom-paymentaddress-region" class="internalDFN" data-link-type="dfn"><code>region</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="sortingCode" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.sortingcode|sortingcode" href="#dom-paymentaddress-sortingcode" class="internalDFN" data-link-type="dfn"><code>sortingCode</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="addressLine" data-dfn-for="paymentaddress">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-frozen-array">FrozenArray</a>&lt;<a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>&gt;</span> <span class="idlName"><a data-link-for="paymentaddress" data-lt="paymentaddress.addressline|addressline" href="#dom-paymentaddress-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="AddressInit">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-addressinit" class="internalDFN" data-link-type="dfn"><code>AddressInit</code></a></span> {<span data-idl="" class="idlMember" data-title="country" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-country" class="internalDFN" data-link-type="dfn"><code>country</code></a></span>;</span><span data-idl="" class="idlMember" data-title="addressLine" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>&gt;</span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a></span>;</span><span data-idl="" class="idlMember" data-title="region" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-region" class="internalDFN" data-link-type="dfn"><code>region</code></a></span>;</span><span data-idl="" class="idlMember" data-title="city" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-city" class="internalDFN" data-link-type="dfn"><code>city</code></a></span>;</span><span data-idl="" class="idlMember" data-title="dependentLocality" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-dependentlocality" class="internalDFN" data-link-type="dfn"><code>dependentLocality</code></a></span>;</span><span data-idl="" class="idlMember" data-title="postalCode" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a></span>;</span><span data-idl="" class="idlMember" data-title="sortingCode" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-sortingcode" class="internalDFN" data-link-type="dfn"><code>sortingCode</code></a></span>;</span><span data-idl="" class="idlMember" data-title="organization" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a></span>;</span><span data-idl="" class="idlMember" data-title="recipient" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-recipient" class="internalDFN" data-link-type="dfn"><code>recipient</code></a></span>;</span><span data-idl="" class="idlMember" data-title="phone" data-dfn-for="addressinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addressinit" data-lt="" href="#dom-addressinit-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="AddressErrors">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-addresserrors" class="internalDFN" data-link-type="dfn"><code>AddressErrors</code></a></span> {<span data-idl="" class="idlMember" data-title="addressLine" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-addressline" class="internalDFN" data-link-type="dfn"><code>addressLine</code></a></span>;</span><span data-idl="" class="idlMember" data-title="city" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-city" class="internalDFN" data-link-type="dfn"><code>city</code></a></span>;</span><span data-idl="" class="idlMember" data-title="country" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-country" class="internalDFN" data-link-type="dfn"><code>country</code></a></span>;</span><span data-idl="" class="idlMember" data-title="dependentLocality" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-dependentlocality" class="internalDFN" data-link-type="dfn"><code>dependentLocality</code></a></span>;</span><span data-idl="" class="idlMember" data-title="organization" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-organization" class="internalDFN" data-link-type="dfn"><code>organization</code></a></span>;</span><span data-idl="" class="idlMember" data-title="phone" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a></span>;</span><span data-idl="" class="idlMember" data-title="postalCode" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-postalcode" class="internalDFN" data-link-type="dfn"><code>postalCode</code></a></span>;</span><span data-idl="" class="idlMember" data-title="recipient" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-recipient" class="internalDFN" data-link-type="dfn"><code>recipient</code></a></span>;</span><span data-idl="" class="idlMember" data-title="region" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-region" class="internalDFN" data-link-type="dfn"><code>region</code></a></span>;</span><span data-idl="" class="idlMember" data-title="sortingCode" data-dfn-for="addresserrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="addresserrors" data-lt="" href="#dom-addresserrors-sortingcode" class="internalDFN" data-link-type="dfn"><code>sortingCode</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentShippingOption">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentshippingoption" class="internalDFN" data-link-type="dfn"><code>PaymentShippingOption</code></a></span> {<span data-idl="" class="idlMember" data-title="id" data-dfn-for="paymentshippingoption">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentshippingoption" data-lt="" href="#dom-paymentshippingoption-id" class="internalDFN" data-link-type="dfn"><code>id</code></a></span>;</span><span data-idl="" class="idlMember" data-title="label" data-dfn-for="paymentshippingoption">
    required<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentshippingoption" data-lt="" href="#dom-paymentshippingoption-label" class="internalDFN" data-link-type="dfn"><code>label</code></a></span>;</span><span data-idl="" class="idlMember" data-title="amount" data-dfn-for="paymentshippingoption">
    required<span class="idlType"> <a data-link-for="" href="#dom-paymentcurrencyamount" class="internalDFN" data-link-type="dfn"><code>PaymentCurrencyAmount</code></a></span> <span class="idlName"><a data-link-for="paymentshippingoption" data-lt="" href="#dom-paymentshippingoption-amount" class="internalDFN" data-link-type="dfn"><code>amount</code></a></span>;</span><span data-idl="" class="idlMember" data-title="selected" data-dfn-for="paymentshippingoption"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlName"><a data-link-for="paymentshippingoption" data-lt="" href="#dom-paymentshippingoption-selected" class="internalDFN" data-link-type="dfn"><code>selected</code></a></span> = false;</span>
  };</span>

  <span data-idl="" class="idlEnum" data-title="PaymentComplete">enum <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentcomplete" class="internalDFN" data-link-type="dfn"><code>PaymentComplete</code></a></span> {
    <span class="idlEnumItem">"<a data-link-for="paymentcomplete" data-lt="" href="#dom-paymentcomplete-fail" class="internalDFN" data-link-type="dfn"><code>fail</code></a>"</span>,
    <span class="idlEnumItem">"<a data-link-for="paymentcomplete" data-lt="" href="#dom-paymentcomplete-success" class="internalDFN" data-link-type="dfn"><code>success</code></a>"</span>,
    <span class="idlEnumItem">"<a data-link-for="paymentcomplete" data-lt="" href="#dom-paymentcomplete-unknown" class="internalDFN" data-link-type="dfn"><code>unknown</code></a>"</span>
  };</span>

  <span data-idl="" class="idlInterface" data-title="PaymentResponse">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=Window</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentresponse" class="internalDFN" data-link-type="dfn"><code>PaymentResponse</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#interface-eventtarget"><code>EventTarget</code></a></span>  {<span data-idl="" class="idlMethod" data-title="toJSON" data-dfn-for="paymentresponse">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#Default">Default</a></span>]<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.tojson()|paymentresponse.tojson|tojson()|tojson" href="#dom-paymentresponse-tojson" class="internalDFN" data-link-type="dfn"><code>toJSON</code></a></span>();</span><span data-idl="" class="idlAttribute" data-title="requestId" data-dfn-for="paymentresponse">

    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.requestid|requestid" href="#dom-paymentresponse-requestid" class="internalDFN" data-link-type="dfn"><code>requestId</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="methodName" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.methodname|methodname" href="#dom-paymentresponse-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="details" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.details|details" href="#dom-paymentresponse-details" class="internalDFN" data-link-type="dfn"><code>details</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="shippingAddress" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a data-link-for="" href="#dom-paymentaddress" class="internalDFN" data-link-type="dfn"><code>PaymentAddress</code></a>?</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.shippingaddress|shippingaddress" href="#dom-paymentresponse-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="shippingOption" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.shippingoption|shippingoption" href="#dom-paymentresponse-shippingoption" class="internalDFN" data-link-type="dfn"><code>shippingOption</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="payerName" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.payername|payername" href="#dom-paymentresponse-payername" class="internalDFN" data-link-type="dfn"><code>payerName</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="payerEmail" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.payeremail|payeremail" href="#dom-paymentresponse-payeremail" class="internalDFN" data-link-type="dfn"><code>payerEmail</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="payerPhone" data-dfn-for="paymentresponse">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>?</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.payerphone|payerphone" href="#dom-paymentresponse-payerphone" class="internalDFN" data-link-type="dfn"><code>payerPhone</code></a></span>;</span><span data-idl="" class="idlMethod" data-title="complete" data-dfn-for="paymentresponse">

    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#NewObject">NewObject</a></span>]<span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="complete(result)|complete()|paymentresponse.complete()|paymentresponse.complete|complete" href="#dom-paymentresponse-complete" class="internalDFN" data-link-type="dfn"><code>complete</code></a></span>(optional<span class="idlType"> <a data-link-for="" href="#dom-paymentcomplete" class="internalDFN" data-link-type="dfn"><code>PaymentComplete</code></a></span> <span class="idlParamName">result</span> = "unknown");</span><span data-idl="" class="idlMethod" data-title="retry" data-dfn-for="paymentresponse">
    [<span class="extAttr"><a href="https://heycam.github.io/webidl/#NewObject">NewObject</a></span>]<span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.retry()|paymentresponse.retry|retry()|retry" href="#dom-paymentresponse-retry" class="internalDFN" data-link-type="dfn"><code>retry</code></a></span>(optional<span class="idlType"> <a data-link-for="" href="#dom-paymentvalidationerrors" class="internalDFN" data-link-type="dfn"><code>PaymentValidationErrors</code></a></span> <span class="idlParamName">errorFields</span>);</span><span data-idl="" class="idlAttribute" data-title="onpayerdetailchange" data-dfn-for="paymentresponse">

    attribute<span class="idlType"> <a href="https://html.spec.whatwg.org/multipage/#eventhandler">EventHandler</a></span> <span class="idlName"><a data-link-for="paymentresponse" data-lt="paymentresponse.onpayerdetailchange|onpayerdetailchange" href="#dom-paymentresponse-onpayerdetailchange" class="internalDFN" data-link-type="dfn"><code>onpayerdetailchange</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentValidationErrors">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentvalidationerrors" class="internalDFN" data-link-type="dfn"><code>PaymentValidationErrors</code></a></span> {<span data-idl="" class="idlMember" data-title="payer" data-dfn-for="paymentvalidationerrors"><span class="idlType">
    <a data-link-for="" href="#dom-payererrors" class="internalDFN" data-link-type="dfn"><code>PayerErrors</code></a></span> <span class="idlName"><a data-link-for="paymentvalidationerrors" data-lt="" href="#dom-paymentvalidationerrors-payer" class="internalDFN" data-link-type="dfn"><code>payer</code></a></span>;</span><span data-idl="" class="idlMember" data-title="shippingAddress" data-dfn-for="paymentvalidationerrors"><span class="idlType">
    <a data-link-for="" href="#dom-addresserrors" class="internalDFN" data-link-type="dfn"><code>AddressErrors</code></a></span> <span class="idlName"><a data-link-for="paymentvalidationerrors" data-lt="" href="#dom-paymentvalidationerrors-shippingaddress" class="internalDFN" data-link-type="dfn"><code>shippingAddress</code></a></span>;</span><span data-idl="" class="idlMember" data-title="error" data-dfn-for="paymentvalidationerrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentvalidationerrors" data-lt="" href="#dom-paymentvalidationerrors-error" class="internalDFN" data-link-type="dfn"><code>error</code></a></span>;</span><span data-idl="" class="idlMember" data-title="paymentMethod" data-dfn-for="paymentvalidationerrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-object">object</a></span> <span class="idlName"><a data-link-for="paymentvalidationerrors" data-lt="" href="#dom-paymentvalidationerrors-paymentmethod" class="internalDFN" data-link-type="dfn"><code>paymentMethod</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PayerErrors">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-payererrors" class="internalDFN" data-link-type="dfn"><code>PayerErrors</code></a></span> {<span data-idl="" class="idlMember" data-title="email" data-dfn-for="payererrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="payererrors" data-lt="" href="#dom-payererrors-email" class="internalDFN" data-link-type="dfn"><code>email</code></a></span>;</span><span data-idl="" class="idlMember" data-title="name" data-dfn-for="payererrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="payererrors" data-lt="" href="#dom-payererrors-name" class="internalDFN" data-link-type="dfn"><code>name</code></a></span>;</span><span data-idl="" class="idlMember" data-title="phone" data-dfn-for="payererrors"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="payererrors" data-lt="" href="#dom-payererrors-phone" class="internalDFN" data-link-type="dfn"><code>phone</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlInterface" data-title="MerchantValidationEvent">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-for="" href="#dom-merchantvalidationeventinit" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEventInit</code></a></span> <span class="idlParamName">eventInitDict</span>)</span>,
  <span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=Window</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-merchantvalidationevent" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEvent</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#event"><code>Event</code></a></span> {<span data-idl="" class="idlAttribute" data-title="methodName" data-dfn-for="merchantvalidationevent">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="merchantvalidationevent" data-lt="merchantvalidationevent.methodname|methodname" href="#dom-merchantvalidationevent-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="validationURL" data-dfn-for="merchantvalidationevent">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlName"><a data-link-for="merchantvalidationevent" data-lt="merchantvalidationevent.validationurl|validationurl" href="#dom-merchantvalidationevent-validationurl" class="internalDFN" data-link-type="dfn"><code>validationURL</code></a></span>;</span><span data-idl="" class="idlMethod" data-title="complete" data-dfn-for="merchantvalidationevent"><span class="idlType">
    void</span> <span class="idlName"><a data-link-for="merchantvalidationevent" data-lt="merchantvalidationevent.complete()|merchantvalidationevent.complete|complete()|complete" href="#dom-merchantvalidationevent-complete" class="internalDFN" data-link-type="dfn"><code>complete</code></a></span>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-any">any</a>&gt;</span> <span class="idlParamName">merchantSessionPromise</span>);</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="MerchantValidationEventInit">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-merchantvalidationeventinit" class="internalDFN" data-link-type="dfn"><code>MerchantValidationEventInit</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#dictdef-eventinit"><code>EventInit</code></a></span> {<span data-idl="" class="idlMember" data-title="methodName" data-dfn-for="merchantvalidationeventinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="merchantvalidationeventinit" data-lt="" href="#dom-merchantvalidationeventinit-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a></span> = "";</span><span data-idl="" class="idlMember" data-title="validationURL" data-dfn-for="merchantvalidationeventinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlName"><a data-link-for="merchantvalidationeventinit" data-lt="" href="#dom-merchantvalidationeventinit-validationurl" class="internalDFN" data-link-type="dfn"><code>validationURL</code></a></span> = "";</span>
  };</span>

  <span data-idl="" class="idlInterface" data-title="PaymentMethodChangeEvent">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-for="" href="#dom-paymentmethodchangeeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEventInit</code></a></span> <span class="idlParamName">eventInitDict</span>)</span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=Window</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentmethodchangeevent" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEvent</code></a></span> : <span class="idlSuperclass"><a data-link-for="" href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a></span> {<span data-idl="" class="idlAttribute" data-title="methodName" data-dfn-for="paymentmethodchangeevent">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentmethodchangeevent" data-lt="paymentmethodchangeevent.methodname|methodname" href="#dom-paymentmethodchangeevent-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a></span>;</span><span data-idl="" class="idlAttribute" data-title="methodDetails" data-dfn-for="paymentmethodchangeevent">
    readonly attribute<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-object">object</a>?</span> <span class="idlName"><a data-link-for="paymentmethodchangeevent" data-lt="paymentmethodchangeevent.methoddetails|methoddetails" href="#dom-paymentmethodchangeevent-methoddetails" class="internalDFN" data-link-type="dfn"><code>methodDetails</code></a></span>;</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentMethodChangeEventInit">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentmethodchangeeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentMethodChangeEventInit</code></a></span> : <span class="idlSuperclass"><a data-link-for="" href="#dom-paymentrequestupdateeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEventInit</code></a></span> {<span data-idl="" class="idlMember" data-title="methodName" data-dfn-for="paymentmethodchangeeventinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlName"><a data-link-for="paymentmethodchangeeventinit" data-lt="" href="#dom-paymentmethodchangeeventinit-methodname" class="internalDFN" data-link-type="dfn"><code>methodName</code></a></span> = "";</span><span data-idl="" class="idlMember" data-title="methodDetails" data-dfn-for="paymentmethodchangeeventinit"><span class="idlType">
    <a href="https://heycam.github.io/webidl/#idl-object">object</a>?</span> <span class="idlName"><a data-link-for="paymentmethodchangeeventinit" data-lt="" href="#dom-paymentmethodchangeeventinit-methoddetails" class="internalDFN" data-link-type="dfn"><code>methodDetails</code></a></span> = null;</span>
  };</span>

  <span data-idl="" class="idlInterface" data-title="PaymentRequestUpdateEvent">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-for="" href="#dom-paymentrequestupdateeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEventInit</code></a></span> <span class="idlParamName">eventInitDict</span>)</span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=Window</span>]
  interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentrequestupdateevent" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEvent</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#event"><code>Event</code></a></span> {<span data-idl="" class="idlMethod" data-title="updateWith" data-dfn-for="paymentrequestupdateevent"><span class="idlType">
    void</span> <span class="idlName"><a data-link-for="paymentrequestupdateevent" data-lt="updatewith(detailspromise)|updatewith()|paymentrequestupdateevent.updatewith()|paymentrequestupdateevent.updatewith|updatewith" href="#dom-paymentrequestupdateevent-updatewith" class="internalDFN" data-link-type="dfn"><code>updateWith</code></a></span>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a data-link-for="" href="#dom-paymentdetailsupdate" class="internalDFN" data-link-type="dfn"><code>PaymentDetailsUpdate</code></a>&gt;</span> <span class="idlParamName">detailsPromise</span>);</span>
  };</span>

  <span data-idl="" class="idlDictionary" data-title="PaymentRequestUpdateEventInit">dictionary <span class="idlID"><a data-link-for="" data-lt="" href="#dom-paymentrequestupdateeventinit" class="internalDFN" data-link-type="dfn"><code>PaymentRequestUpdateEventInit</code></a></span> : <span class="idlSuperclass"><a data-link-for="" data-link-type="dfn" href="https://dom.spec.whatwg.org/#dictdef-eventinit"><code>EventInit</code></a></span> {};</span></pre></div></section>
      <section class="appendix" id="acknowledgements">
        <!--OddPage--><h2 id="b-acknowledgements"><span class="secno">B. </span>
          Acknowledgements
        <a class="self-link" aria-label="§" href="#acknowledgements"></a></h2>
        <p>
          This specification was derived from a report published previously by
          the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator
          Community Group</a>.
        </p>
      </section>


  <section id="references" class="appendix">
        <!--OddPage--><h2 id="c-references"><span class="secno">C. </span>References<a class="self-link" aria-label="§" href="#references"></a></h2>

      <section id="normative-references">
          <h3 id="c-1-normative-references"><span class="secno">C.1 </span>Normative references<a class="self-link" aria-label="§" href="#normative-references"></a></h3>
        <dl class="bibliography">
          <dt id="bib-dom">[DOM]</dt><dd><a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a></dd><dt id="bib-e.164">[E.164]</dt><dd><a href="https://www.itu.int/rec/dologin_pub.asp?lang=e&amp;id=T-REC-E.164-201011-I!!PDF-E&amp;type=items"><cite>The international public telecommunication numbering plan</cite></a>.  ITU-T. November 2010. Recommendation. URL: <a href="https://www.itu.int/rec/dologin_pub.asp?lang=e&amp;id=T-REC-E.164-201011-I!!PDF-E&amp;type=items">https://www.itu.int/rec/dologin_pub.asp?lang=e&amp;id=T-REC-E.164-201011-I!!PDF-E&amp;type=items</a></dd><dt id="bib-ecma-402">[ecma-402]</dt><dd><a href="https://tc39.github.io/ecma402/"><cite>ECMAScript Internationalization API Specification</cite></a>.  Ecma International. URL: <a href="https://tc39.github.io/ecma402/">https://tc39.github.io/ecma402/</a></dd><dt id="bib-ecmascript">[ECMASCRIPT]</dt><dd><a href="https://tc39.github.io/ecma262/"><cite>ECMAScript Language Specification</cite></a>.  Ecma International. URL: <a href="https://tc39.github.io/ecma262/">https://tc39.github.io/ecma262/</a></dd><dt id="bib-feature-policy">[feature-policy]</dt><dd><a href="https://wicg.github.io/feature-policy/"><cite>Feature Policy</cite></a>.  WICG. Living Standard. URL: <a href="https://wicg.github.io/feature-policy/">https://wicg.github.io/feature-policy/</a></dd><dt id="bib-html">[HTML]</dt><dd><a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a></dd><dt id="bib-infra">[infra]</dt><dd><a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic Denicola. WHATWG. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a></dd><dt id="bib-iso3166-1">[ISO3166-1]</dt><dd><a href="https://www.iso.org/standard/63545.html"><cite>ISO 3166: Codes for the representation of names of countries and their subdivisions – Part 1: Country codes</cite></a>.  International Organization for Standardization (ISO). November 2013. Published. URL: <a href="https://www.iso.org/standard/63545.html">https://www.iso.org/standard/63545.html</a></dd><dt id="bib-iso3166-2">[ISO3166-2]</dt><dd><a href="https://www.iso.org/standard/63546.html"><cite>ISO 3166: Codes for the representation of names of countries and their subdivisions – Part 2: Country subdivision code.</cite></a>.  International Organization for Standardization (ISO). November 2013. Published. URL: <a href="https://www.iso.org/standard/63546.html">https://www.iso.org/standard/63546.html</a></dd><dt id="bib-iso4217">[ISO4217]</dt><dd><a href="http://www.iso.org/iso/home/standards/currency_codes.htm"><cite>Currency codes - ISO 4217</cite></a>.  ISO. 2015. International Standard. URL: <a href="http://www.iso.org/iso/home/standards/currency_codes.htm">http://www.iso.org/iso/home/standards/currency_codes.htm</a></dd><dt id="bib-payment-method-id">[payment-method-id]</dt><dd><a href="https://www.w3.org/TR/payment-method-id/"><cite>Payment Method Identifiers</cite></a>. Adrian Bateman; Zach Koch; Roy McElmurry; Marcos Caceres. W3C. 14 September 2017. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/payment-method-id/">https://www.w3.org/TR/payment-method-id/</a></dd><dt id="bib-promises-guide">[PROMISES-GUIDE]</dt><dd><a href="https://www.w3.org/2001/tag/doc/promises-guide"><cite>Writing Promise-Using Specifications</cite></a>. Domenic Denicola. W3C. 16 February 2016. TAG Finding. URL: <a href="https://www.w3.org/2001/tag/doc/promises-guide">https://www.w3.org/2001/tag/doc/promises-guide</a></dd><dt id="bib-rfc2119">[RFC2119]</dt><dd><a href="https://tools.ietf.org/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a></dd><dt id="bib-rfc4122">[RFC4122]</dt><dd><a href="https://tools.ietf.org/html/rfc4122"><cite>A Universally Unique IDentifier (UUID) URN Namespace</cite></a>. P. Leach; M. Mealling; R. Salz. IETF. July 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4122">https://tools.ietf.org/html/rfc4122</a></dd><dt id="bib-url">[URL]</dt><dd><a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Anne van Kesteren. WHATWG. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a></dd><dt id="bib-webidl">[WEBIDL]</dt><dd><a href="https://heycam.github.io/webidl/"><cite>Web IDL</cite></a>. Boris Zbarsky. W3C. 15 December 2016. W3C Editor's Draft. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a></dd>
        </dl></section><section id="informative-references">
          <h3 id="c-2-informative-references"><span class="secno">C.2 </span>Informative references<a class="self-link" aria-label="§" href="#informative-references"></a></h3>
        <dl class="bibliography">
          <dt id="bib-dom">[dom]</dt><dd><a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a></dd><dt id="bib-feature-policy">[feature-policy]</dt><dd><a href="https://wicg.github.io/feature-policy/"><cite>Feature Policy</cite></a>.  WICG. Living Standard. URL: <a href="https://wicg.github.io/feature-policy/">https://wicg.github.io/feature-policy/</a></dd><dt id="bib-fetch">[fetch]</dt><dd><a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Anne van Kesteren. WHATWG. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a></dd><dt id="bib-html">[html]</dt><dd><a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a></dd><dt id="bib-payment-method-basic-card">[payment-method-basic-card]</dt><dd><a href="https://www.w3.org/TR/payment-method-basic-card/"><cite>Payment Method: Basic Card</cite></a>. Marcos Caceres; Domenic Denicola; Zach Koch; Roy McElmurry; Adrian Bateman. W3C. 14 March 2019. W3C Working Draft. URL: <a href="https://www.w3.org/TR/payment-method-basic-card/">https://www.w3.org/TR/payment-method-basic-card/</a></dd><dt id="bib-rfc6454">[rfc6454]</dt><dd><a href="https://tools.ietf.org/html/rfc6454"><cite>The Web Origin Concept</cite></a>. A. Barth. IETF. December 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6454">https://tools.ietf.org/html/rfc6454</a></dd><dt id="bib-secure-contexts">[secure-contexts]</dt><dd><a href="https://www.w3.org/TR/secure-contexts/"><cite>Secure Contexts</cite></a>. Mike West. W3C. 15 September 2016. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/secure-contexts/">https://www.w3.org/TR/secure-contexts/</a></dd><dt id="bib-webidl">[webidl]</dt><dd><a href="https://heycam.github.io/webidl/"><cite>Web IDL</cite></a>. Boris Zbarsky. W3C. 15 December 2016. W3C Editor's Draft. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a></dd>
        </dl></section></section><p role="navigation" id="back-to-top"><a href="#title"><abbr title="Back to Top">↑</abbr></a></p><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>
